(self.webpackChunkangular_firestore=self.webpackChunkangular_firestore||[]).push([[179],{8255:Je=>{function Te(k){return Promise.resolve().then(()=>{var _=new Error("Cannot find module '"+k+"'");throw _.code="MODULE_NOT_FOUND",_})}Te.keys=()=>[],Te.resolve=Te,Te.id=8255,Je.exports=Te},4693:(Je,Te,k)=>{"use strict";k.d(Te,{AFp:()=>Q,ip1:()=>O,CZH:()=>F,hGG:()=>iN,z2F:()=>vE,sBO:()=>ob,_Vd:()=>id,EJc:()=>Kf,SBq:()=>os,qLn:()=>Kn,vpe:()=>ls,gxx:()=>kl,OlP:()=>Ht,zs3:()=>Qe,ZZ4:()=>od,aQg:()=>ud,soG:()=>Gn,h0i:()=>tc,PXZ:()=>OS,R0b:()=>ds,FiY:()=>Ds,Lbi:()=>Ot,g9A:()=>tt,Qsj:()=>XC,FYo:()=>Zg,JOm:()=>Di,Tiy:()=>Ff,q3G:()=>Yt,Rgc:()=>ec,dDg:()=>TA,q4F:()=>Lf,GfV:()=>rI,s_b:()=>Vf,ifc:()=>W,eFA:()=>MA,G48:()=>TS,Gpc:()=>_t,X6Q:()=>yT,_c5:()=>QS,VLi:()=>bS,c2e:()=>Xt,zSh:()=>Rs,wAp:()=>rt,vHH:()=>Y,EiD:()=>Tr,mCW:()=>Zi,qzn:()=>zi,JVY:()=>$E,pB0:()=>gh,eBb:()=>iy,L6k:()=>ph,LAX:()=>Cp,cg1:()=>Zu,Tjo:()=>KS,kL8:()=>Vg,yhl:()=>Dp,dqk:()=>ft,sIi:()=>Ea,CqO:()=>Sg,QGY:()=>Ag,F4k:()=>I_,RDi:()=>Ya,AaK:()=>he,z3N:()=>Wi,qOj:()=>jl,TTD:()=>za,_Bn:()=>Qu,xp6:()=>Sy,uIk:()=>hf,ekj:()=>Rg,Xpm:()=>Wr,lG2:()=>Cn,Yz7:()=>tn,cJS:()=>or,oAB:()=>Td,Yjl:()=>Ad,Y36:()=>yf,_UZ:()=>bg,qZA:()=>Rn,TgZ:()=>w_,EpF:()=>Zl,n5z:()=>Qd,LFG:()=>an,$8M:()=>ri,NdJ:()=>D_,oxw:()=>b_,Q6J:()=>E_,MAs:()=>ba,CHM:()=>jd,LSH:()=>Eh,kYT:()=>Ga,YNc:()=>Ca,W1O:()=>js,_uU:()=>Gu,Oqu:()=>Sa,hij:()=>Na});var _=k(9765),J=k(5319),j=k(7574),ge=k(6682),fe=k(7393);function de(){return function(i){return i.lift(new Ae(i))}}class Ae{constructor(i){this.connectable=i}call(i,a){const{connectable:c}=this;c._refCount++;const d=new Ee(i,c),h=a.subscribe(d);return d.closed||(d.connection=c.connect()),h}}class Ee extends fe.L{constructor(i,a){super(i),this.connectable=a}_unsubscribe(){const{connectable:i}=this;if(!i)return void(this.connection=null);this.connectable=null;const a=i._refCount;if(a<=0)return void(this.connection=null);if(i._refCount=a-1,a>1)return void(this.connection=null);const{connection:c}=this,d=i._connection;this.connection=null,d&&(!c||d===c)&&d.unsubscribe()}}class se extends j.y{constructor(i,a){super(),this.source=i,this.subjectFactory=a,this._refCount=0,this._isComplete=!1}_subscribe(i){return this.getSubject().subscribe(i)}getSubject(){const i=this._subject;return(!i||i.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let i=this._connection;return i||(this._isComplete=!1,i=this._connection=new J.w,i.add(this.source.subscribe(new B(this.getSubject(),this))),i.closed&&(this._connection=null,i=J.w.EMPTY)),i}refCount(){return de()(this)}}const P=(()=>{const s=se.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:s._subscribe},_isComplete:{value:s._isComplete,writable:!0},getSubject:{value:s.getSubject},connect:{value:s.connect},refCount:{value:s.refCount}}})();class B extends _.Yc{constructor(i,a){super(i),this.connectable=a}_error(i){this._unsubscribe(),super._error(i)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const i=this.connectable;if(i){this.connectable=null;const a=i._connection;i._refCount=0,i._subject=null,i._connection=null,a&&a.unsubscribe()}}}function ee(){return new _.xQ}function we(s){for(let i in s)if(s[i]===we)return i;throw Error("Could not find renamed property on target object.")}function xe(s,i){for(const a in i)i.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=i[a])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const i=s.toString();if(null==i)return""+i;const a=i.indexOf("\n");return-1===a?i:i.substring(0,a)}function Le(s,i){return null==s||""===s?null===i?"":i:null==i||""===i?s:s+" "+i}const $e=we({__forward_ref__:we});function _t(s){return s.__forward_ref__=_t,s.toString=function(){return he(this())},s}function ke(s){return Dt(s)?s():s}function Dt(s){return"function"==typeof s&&s.hasOwnProperty($e)&&s.__forward_ref__===_t}class Y extends Error{constructor(i,a){super(function(s,i){return`${s?`NG0${s}: `:""}${i}`}(i,a)),this.code=i}}function q(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():q(s)}function Gt(s,i){const a=i?` in ${i}`:"";throw new Y("201",`No provider for ${ve(s)} found${a}`)}function In(s,i){null==s&&function(s,i,a,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${a} ${c} ${i} <=Actual]`))}(i,s,null,"!=")}function tn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function or(s){return{providers:s.providers||[],imports:s.imports||[]}}function Gr(s){return ot(s,Dn)||ot(s,Ge)}function ot(s,i){return s.hasOwnProperty(i)?s[i]:null}function Wt(s){return s&&(s.hasOwnProperty(St)||s.hasOwnProperty(it))?s[St]:null}const Dn=we({\u0275prov:we}),St=we({\u0275inj:we}),Ge=we({ngInjectableDef:we}),it=we({ngInjectorDef:we});var qe=(()=>((qe=qe||{})[qe.Default=0]="Default",qe[qe.Host=1]="Host",qe[qe.Self=2]="Self",qe[qe.SkipSelf=4]="SkipSelf",qe[qe.Optional=8]="Optional",qe))();let pi;function qr(s){const i=pi;return pi=s,i}function ar(s,i,a){const c=Gr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&qe.Optional?null:void 0!==i?i:void Gt(he(s),"Injector")}function U(s){return{toString:s}.toString()}var V=(()=>((V=V||{})[V.OnPush=0]="OnPush",V[V.Default=1]="Default",V))(),W=(()=>((W=W||{})[W.Emulated=0]="Emulated",W[W.None=2]="None",W[W.ShadowDom=3]="ShadowDom",W))();const We="undefined"!=typeof globalThis&&globalThis,lt="undefined"!=typeof window&&window,Vt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,cn="undefined"!=typeof global&&global,ft=We||cn||lt||Vt,on={},vt=[],qs=we({\u0275cmp:we}),yc=we({\u0275dir:we}),Ha=we({\u0275pipe:we}),Cd=we({\u0275mod:we}),bd=we({\u0275loc:we}),Rr=we({\u0275fac:we}),Ws=we({__NG_ELEMENT_ID__:we});let $a=0;function Wr(s){return U(()=>{const a={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===V.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||vt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||W.Emulated,id:"c",styles:s.styles||vt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,h=s.features,y=s.pipes;return c.id+=$a++,c.inputs=Xf(s.inputs,a),c.outputs=Xf(s.outputs),h&&h.forEach(v=>v(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(Jf):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(_c):null,c})}function Jf(s){return Pn(s)||function(s){return s[yc]||null}(s)}function _c(s){return function(s){return s[Ha]||null}(s)}const vc={};function Td(s){return U(()=>{const i={type:s.type,bootstrap:s.bootstrap||vt,declarations:s.declarations||vt,imports:s.imports||vt,exports:s.exports||vt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(vc[s.id]=s.type),i})}function Ga(s,i){return U(()=>{const a=Or(s,!0);a.declarations=i.declarations||vt,a.imports=i.imports||vt,a.exports=i.exports||vt})}function Xf(s,i){if(null==s)return on;const a={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,i&&(i[d]=h)}return a}const Cn=Wr;function Ad(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Pn(s){return s[qs]||null}function Or(s,i){const a=s[Cd]||null;if(!a&&!0===i)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return a}function mi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Pr(s){return Array.isArray(s)&&!0===s[1]}function Md(s){return 0!=(8&s.flags)}function jo(s){return 2==(2&s.flags)}function wc(s){return 1==(1&s.flags)}function ni(s){return null!==s.template}function Rd(s){return 0!=(512&s[2])}function gs(s,i){return s.hasOwnProperty(Rr)?s[Rr]:null}class Dc{constructor(i,a,c){this.previousValue=i,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function za(){return Pd}function Pd(s){return s.type.prototype.ngOnChanges&&(s.setInput=kd),xE}function xE(){const s=qo(this),i=null==s?void 0:s.current;if(i){const a=s.previous;if(a===on)s.previous=i;else for(let c in i)a[c]=i[c];s.current=null,this.ngOnChanges(i)}}function kd(s,i,a,c){const d=qo(s)||function(s,i){return s[Cc]=i}(s,{previous:on,current:null}),h=d.current||(d.current={}),y=d.previous,v=this.declaredInputs[a],D=y[v];h[v]=new Dc(D&&D.currentValue,i,y===on),s[c]=i}za.ngInherit=!0;const Cc="__ngSimpleChanges__";function qo(s){return s[Cc]||null}let Wo;function Ya(s){Wo=s}function nn(s){return!!s.listen}const xm={createRenderer:(s,i)=>void 0!==Wo?Wo:"undefined"!=typeof document?document:void 0};function bn(s){for(;Array.isArray(s);)s=s[0];return s}function Zo(s,i){return bn(i[s])}function Zn(s,i){return bn(i[s.index])}function Qa(s,i){return s.data[i]}function Ir(s,i){const a=i[s];return mi(a)?a:a[0]}function Pi(s){return 128==(128&s[2])}function Zr(s,i){return null==i?null:s[i]}function Vd(s){s[18]=0}function ki(s,i){s[5]+=i;let a=s,c=s[3];for(;null!==c&&(1===i&&1===a[5]||-1===i&&0===a[5]);)c[5]+=i,a=c,c=c[3]}const at={lFrame:Lm(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function op(){return at.bindingsEnabled}function De(){return at.lFrame.lView}function Et(){return at.lFrame.tView}function jd(s){return at.lFrame.contextLView=s,s[8]}function _n(){let s=xc();for(;null!==s&&64===s.type;)s=s.parent;return s}function xc(){return at.lFrame.currentTNode}function Li(s,i){const a=at.lFrame;a.currentTNode=s,a.isParent=i}function Xa(){return at.lFrame.isParent}function Yo(){return at.isInCheckNoChangesMode}function Rc(s){at.isInCheckNoChangesMode=s}function Qo(){return at.lFrame.bindingIndex++}function ME(s,i){const a=at.lFrame;a.bindingIndex=a.bindingRootIndex=s,Hd(i)}function Hd(s){at.lFrame.currentDirectiveIndex=s}function km(s){at.lFrame.currentQueryIndex=s}function DD(s){const i=s[1];return 2===i.type?i.declTNode:1===i.type?s[6]:null}function RE(s,i,a){if(a&qe.SkipSelf){let d=i,h=s;for(;!(d=d.parent,null!==d||a&qe.Host||(d=DD(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;i=d,s=h}const c=at.lFrame=Fm();return c.currentTNode=i,c.lView=s,!0}function dp(s){const i=Fm(),a=s[1];at.lFrame=i,i.currentTNode=a.firstChild,i.lView=s,i.tView=a,i.contextLView=s,i.bindingIndex=a.bindingStartIndex,i.inI18n=!1}function Fm(){const s=at.lFrame,i=null===s?null:s.child;return null===i?Lm(s):i}function Lm(s){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=i),i}function Pc(){const s=at.lFrame;return at.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const _i=Pc;function Jo(){const s=Pc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function cr(){return at.lFrame.selectedIndex}function ys(s){at.lFrame.selectedIndex=s}function Kt(){const s=at.lFrame;return Qa(s.tView,s.selectedIndex)}function kc(s,i){for(let a=i.directiveStart,c=i.directiveEnd;a<c;a++){const h=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:D,ngAfterViewChecked:b,ngOnDestroy:T}=h;y&&(s.contentHooks||(s.contentHooks=[])).push(-a,y),v&&((s.contentHooks||(s.contentHooks=[])).push(a,v),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,v)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),b&&((s.viewHooks||(s.viewHooks=[])).push(a,b),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,b)),null!=T&&(s.destroyHooks||(s.destroyHooks=[])).push(a,T)}}function fp(s,i,a){_s(s,i,3,a)}function ro(s,i,a,c){(3&s[2])===a&&_s(s,i,a,c)}function jm(s,i){let a=s[2];(3&a)===i&&(a&=2047,a+=1,s[2]=a)}function _s(s,i,a,c){const h=null!=c?c:-1,y=i.length-1;let v=0;for(let D=void 0!==c?65535&s[18]:0;D<y;D++)if("number"==typeof i[D+1]){if(v=i[D],null!=c&&v>=c)break}else i[D]<0&&(s[18]+=65536),(v<h||-1==h)&&(Hm(s,a,i,D),s[18]=(4294901760&s[18])+D+2),D++}function Hm(s,i,a,c){const d=a[c]<0,h=a[c+1],v=s[d?-a[c]:a[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===i){s[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class Vi{constructor(i,a,c){this.factory=i,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function eu(s,i,a){const c=nn(s);let d=0;for(;d<a.length;){const h=a[d];if("number"==typeof h){if(0!==h)break;d++;const y=a[d++],v=a[d++],D=a[d++];c?s.setAttribute(i,v,D,y):i.setAttributeNS(y,v,D)}else{const y=h,v=a[++d];tu(y)?c&&s.setProperty(i,y,v):c?s.setAttribute(i,y,v):i.setAttribute(y,v),d++}}return d}function Gm(s){return 3===s||4===s||6===s}function tu(s){return 64===s.charCodeAt(0)}function Lc(s,i){if(null!==i&&0!==i.length)if(null===s||0===s.length)s=i.slice();else{let a=-1;for(let c=0;c<i.length;c++){const d=i[c];"number"==typeof d?a=d:0===a||ea(s,a,d,null,-1===a||2===a?i[++c]:null)}}return s}function ea(s,i,a,c,d){let h=0,y=s.length;if(-1===i)y=-1;else for(;h<s.length;){const v=s[h++];if("number"==typeof v){if(v===i){y=-1;break}if(v>i){y=h-1;break}}}for(;h<s.length;){const v=s[h];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==d&&(s[h+1]=d));if(c===s[h+1])return void(s[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==y&&(s.splice(y,0,i),h=y+1),s.splice(h++,0,a),null!==c&&s.splice(h++,0,c),null!==d&&s.splice(h++,0,d)}function Vc(s){return-1!==s}function Cr(s){return 32767&s}function vs(s,i){let a=function(s){return s>>16}(s),c=i;for(;a>0;)c=c[15],a--;return c}let hn=!0;function Uc(s){const i=hn;return hn=s,i}let io=0;function Bi(s,i){const a=Zd(s,i);if(-1!==a)return a;const c=i[1];c.firstCreatePass&&(s.injectorIndex=i.length,Bc(c.data,s),Bc(i,null),Bc(c.blueprint,null));const d=jc(s,i),h=s.injectorIndex;if(Vc(d)){const y=Cr(d),v=vs(d,i),D=v[1].data;for(let b=0;b<8;b++)i[h+b]=v[y+b]|D[y+b]}return i[h+8]=d,h}function Bc(s,i){s.push(0,0,0,0,0,0,0,0,i)}function Zd(s,i){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===i[s.injectorIndex+8]?-1:s.injectorIndex}function jc(s,i){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,c=null,d=i;for(;null!==d;){const h=d[1],y=h.type;if(c=2===y?h.declTNode:1===y?d[6]:null,null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function ra(s,i,a){!function(s,i,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ws)&&(c=a[Ws]),null==c&&(c=a[Ws]=io++);const d=255&c;i.data[s+(d>>5)]|=1<<d}(s,i,a)}function vi(s,i,a){if(a&qe.Optional)return s;Gt(i,"NodeInjector")}function Hc(s,i,a,c){if(a&qe.Optional&&void 0===c&&(c=null),0==(a&(qe.Self|qe.Host))){const d=s[9],h=qr(void 0);try{return d?d.get(i,c,a&qe.Optional):ar(i,c,a&qe.Optional)}finally{qr(h)}}return vi(c,i,a)}function Fn(s,i,a,c=qe.Default,d){if(null!==s){const h=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const i=s.hasOwnProperty(Ws)?s[Ws]:void 0;return"number"==typeof i?i>=0?255&i:$c:i}(a);if("function"==typeof h){if(!RE(i,s,c))return c&qe.Host?vi(d,a,c):Hc(i,a,c,d);try{const y=h(c);if(null!=y||c&qe.Optional)return y;Gt(a)}finally{_i()}}else if("number"==typeof h){let y=null,v=Zd(s,i),D=-1,b=c&qe.Host?i[16][6]:null;for((-1===v||c&qe.SkipSelf)&&(D=-1===v?jc(s,i):i[v+8],-1!==D&&Yd(c,!1)?(y=i[1],v=Cr(D),i=vs(D,i)):v=-1);-1!==v;){const T=i[1];if(Kd(h,v,T.data)){const x=FE(v,i,a,y,c,b);if(x!==ji)return x}D=i[v+8],-1!==D&&Yd(c,i[1].data[v+8]===b)&&Kd(h,v,i)?(y=T,v=Cr(D),i=vs(D,i)):v=-1}}}return Hc(i,a,c,d)}const ji={};function $c(){return new so(_n(),De())}function FE(s,i,a,c,d,h){const y=i[1],v=y.data[s+8],T=function(s,i,a,c,d){const h=s.providerIndexes,y=i.data,v=1048575&h,D=s.directiveStart,T=h>>20,R=d?v+T:s.directiveEnd;for(let L=c?v:v+T;L<R;L++){const H=y[L];if(L<D&&a===H||L>=D&&H.type===a)return L}if(d){const L=y[D];if(L&&ni(L)&&L.type===a)return D}return null}(v,y,a,null==c?jo(v)&&hn:c!=y&&0!=(3&v.type),d&qe.Host&&h===v);return null!==T?ia(i,y,T,v):ji}function ia(s,i,a,c){let d=s[a];const h=i.data;if(function(s){return s instanceof Vi}(d)){const y=d;y.resolving&&function(s,i){throw new Y("200",`Circular dependency in DI detected for ${s}`)}(ve(h[a]));const v=Uc(y.canSeeViewProviders);y.resolving=!0;const D=y.injectImpl?qr(y.injectImpl):null;RE(s,c,qe.Default);try{d=s[a]=y.factory(void 0,h,s,c),i.firstCreatePass&&a>=c.directiveStart&&function(s,i,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=i.type.prototype;if(c){const y=Pd(i);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,h))}(a,h[a],i)}finally{null!==D&&qr(D),Uc(v),y.resolving=!1,_i()}}return d}function Kd(s,i,a){return!!(a[i+(s>>5)]&1<<s)}function Yd(s,i){return!(s&qe.Self||s&qe.Host&&i)}class so{constructor(i,a){this._tNode=i,this._lView=a}get(i,a){return Fn(this._tNode,this._lView,i,void 0,a)}}function Qd(s){return U(()=>{const i=s.prototype.constructor,a=i[Rr]||qc(i),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const h=d[Rr]||qc(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function qc(s){return Dt(s)?()=>{const i=qc(ke(s));return i&&i()}:gs(s)}function ri(s){return function(s,i){if("class"===i)return s.classes;if("style"===i)return s.styles;const a=s.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(Gm(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===i)return a[d+1];d+=2}}}return null}(_n(),s)}const ao="__parameters__";function Ei(s,i,a){return U(()=>{const c=function(s){return function(...a){if(s){const c=s(...a);for(const d in c)this[d]=c[d]}}}(i);function d(...h){if(this instanceof d)return c.apply(this,h),this;const y=new d(...h);return v.annotation=y,v;function v(D,b,T){const x=D.hasOwnProperty(ao)?D[ao]:Object.defineProperty(D,ao,{value:[]})[ao];for(;x.length<=T;)x.push(null);return(x[T]=x[T]||[]).push(y),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class Ht{constructor(i,a){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=tn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}function si(s,i){s.forEach(a=>Array.isArray(a)?si(a,i):i(a))}function nh(s,i,a){i>=s.length?s.push(a):s.splice(i,0,a)}function oa(s,i){return i>=s.length-1?s.pop():s.splice(i,1)[0]}function kr(s,i,a){let c=$i(s,i);return c>=0?s[1|c]=a:(c=~c,function(s,i,a,c){let d=s.length;if(d==i)s.push(a,c);else if(1===d)s.push(c,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>i;)s[d]=s[d-2],d--;s[i]=a,s[i+1]=c}}(s,c,i,a)),c}function po(s,i){const a=$i(s,i);if(a>=0)return s[1|a]}function $i(s,i){return function(s,i,a){let c=0,d=s.length>>a;for(;d!==c;){const h=c+(d-c>>1),y=s[h<<a];if(i===y)return h<<a;y>i?d=h:c=h+1}return~(d<<a)}(s,i,1)}const mo={},yo="__NG_DI_FLAG__",ua="ngTempTokenPath",tl=/\n/gm,Gi="__source",au=we({provide:String,useValue:we});let la;function wi(s){const i=la;return la=s,i}function vp(s,i=qe.Default){if(void 0===la)throw new Error("inject() must be called from an injection context");return null===la?ar(s,void 0,i):la.get(s,i&qe.Optional?null:void 0,i)}function an(s,i=qe.Default){return(pi||vp)(ke(s),i)}function Yr(s){const i=[];for(let a=0;a<s.length;a++){const c=ke(s[a]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,h=qe.Default;for(let y=0;y<c.length;y++){const v=c[y],D=Ym(v);"number"==typeof D?-1===D?d=v.token:h|=D:d=v}i.push(an(d,h))}else i.push(an(c))}return i}function cu(s,i){return s[yo]=i,s.prototype[yo]=i,s}function Ym(s){return s[yo]}function Qm(s,i,a,c){const d=s[ua];throw i[Gi]&&d.unshift(i[Gi]),s.message=function(s,i,a,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=he(i);if(Array.isArray(i))d=i.map(he).join(" -> ");else if("object"==typeof i){let h=[];for(let y in i)if(i.hasOwnProperty(y)){let v=i[y];h.push(y+":"+("string"==typeof v?JSON.stringify(v):he(v)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${s.replace(tl,"\n  ")}`}("\n"+s.message,d,a,c),s.ngTokenPath=d,s[ua]=null,s}const ha=cu(Ei("Inject",s=>({token:s})),-1),Ds=cu(Ei("Optional"),8),Cs=cu(Ei("SkipSelf"),4);let fa;function vo(s){var i;return(null===(i=function(){if(void 0===fa&&(fa=null,ft.trustedTypes))try{fa=ft.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return fa}())||void 0===i?void 0:i.createHTML(s))||s}class Ts{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fh extends Ts{getTypeName(){return"HTML"}}class Ip extends Ts{getTypeName(){return"Style"}}class ny extends Ts{getTypeName(){return"Script"}}class hu extends Ts{getTypeName(){return"URL"}}class ry extends Ts{getTypeName(){return"ResourceURL"}}function Wi(s){return s instanceof Ts?s.changingThisBreaksApplicationSecurity:s}function zi(s,i){const a=Dp(s);if(null!=a&&a!==i){if("ResourceURL"===a&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===i}function Dp(s){return s instanceof Ts&&s.getTypeName()||null}function $E(s){return new fh(s)}function ph(s){return new Ip(s)}function iy(s){return new ny(s)}function Cp(s){return new hu(s)}function gh(s){return new ry(s)}class bp{constructor(i){this.inertDocumentHelper=i}getInertBodyElement(i){i="<body><remove></remove>"+i;try{const a=(new window.DOMParser).parseFromString(vo(i),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(i):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class sy{constructor(i){if(this.defaultDoc=i,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const c=this.inertDocument.createElement("body");a.appendChild(c)}}getInertBodyElement(i){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=vo(i),a;const c=this.inertDocument.createElement("body");return c.innerHTML=vo(i),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(i){const a=i.attributes;for(let d=a.length-1;0<d;d--){const y=a.item(d).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&i.removeAttribute(y)}let c=i.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const mh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zi(s){return(s=String(s)).match(mh)||s.match(fl)?s:"unsafe:"+s}function oi(s){const i={};for(const a of s.split(","))i[a]=!0;return i}function fu(...s){const i={};for(const a of s)for(const c in a)a.hasOwnProperty(c)&&(i[c]=!0);return i}const pl=oi("area,br,col,hr,img,wbr"),Ap=oi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yh=oi("rp,rt"),Np=fu(pl,fu(Ap,oi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fu(yh,oi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fu(yh,Ap)),_h=oi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gl=oi("srcset"),ay=fu(_h,gl,oi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),oi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uy=oi("script,style,template");class xp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(i){let a=i.firstChild,c=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(i){const a=i.nodeName.toLowerCase();if(!Np.hasOwnProperty(a))return this.sanitizedSomething=!0,!uy.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=i.attributes;for(let d=0;d<c.length;d++){const h=c.item(d),y=h.name,v=y.toLowerCase();if(!ay.hasOwnProperty(v)){this.sanitizedSomething=!0;continue}let D=h.value;_h[v]&&(D=Zi(D)),gl[v]&&(s=D,D=(s=String(s)).split(",").map(i=>Zi(i.trim())).join(", ")),this.buf.push(" ",y,'="',Sn(D),'"')}var s;return this.buf.push(">"),!0}endElement(i){const a=i.nodeName.toLowerCase();Np.hasOwnProperty(a)&&!pl.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(i){this.buf.push(Sn(i))}checkClobberedElement(i,a){if(a&&(i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`);return a}}const vh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,As=/([^\#-~ |!])/g;function Sn(s){return s.replace(/&/g,"&amp;").replace(vh,function(i){return"&#"+(1024*(i.charCodeAt(0)-55296)+(i.charCodeAt(1)-56320)+65536)+";"}).replace(As,function(i){return"&#"+i.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pa;function Tr(s,i){let a=null;try{pa=pa||function(s){const i=new sy(s);return function(){try{return!!(new window.DOMParser).parseFromString(vo(""),"text/html")}catch(s){return!1}}()?new bp(i):i}(s);let c=i?String(i):"";a=pa.getInertBodyElement(c);let d=5,h=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=h,h=a.innerHTML,a=pa.getInertBodyElement(c)}while(c!==h);return vo((new xp).sanitizeChildren(Ss(a)||a))}finally{if(a){const c=Ss(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Ss(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Yt=(()=>((Yt=Yt||{})[Yt.NONE=0]="NONE",Yt[Yt.HTML=1]="HTML",Yt[Yt.STYLE=2]="STYLE",Yt[Yt.SCRIPT=3]="SCRIPT",Yt[Yt.URL=4]="URL",Yt[Yt.RESOURCE_URL=5]="RESOURCE_URL",Yt))();function Eh(s){const i=function(){const s=De();return s&&s[12]}();return i?i.sanitize(Yt.URL,s)||"":zi(s,"URL")?Wi(s):Zi(q(s))}const Op="__ngContext__";function ne(s,i){s[Op]=i}function gu(s){const i=function(s){return s[Op]||null}(s);return i?Array.isArray(i)?i:i.lView:null}function et(s){return s.ngOriginalError}function Bt(s,...i){s.error(...i)}class Kn{constructor(){this._console=console}handleError(i){const a=this._findOriginalError(i),c=this._findContext(i),d=(s=i)&&s.ngErrorLogger||Bt;var s;d(this._console,"ERROR",i),a&&d(this._console,"ORIGINAL ERROR",a),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(i){return i?i.ngDebugContext||this._findContext(et(i)):null}_findOriginalError(i){let a=i&&et(i);for(;a&&et(a);)a=et(a);return a||null}}const Sh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ft))();function Ii(s){return s instanceof Function?s():s}var Di=(()=>((Di=Di||{})[Di.Important=1]="Important",Di[Di.DashCase=2]="DashCase",Di))();function hy(s,i){return undefined(s,i)}function _u(s){const i=s[3];return Pr(i)?i[3]:i}function fy(s){return Up(s[13])}function py(s){return Up(s[4])}function Up(s){for(;null!==s&&!Pr(s);)s=s[4];return s}function wl(s,i,a,c,d){if(null!=c){let h,y=!1;Pr(c)?h=c:mi(c)&&(y=!0,c=c[0]);const v=bn(c);0===s&&null!==a?null==d?Ey(i,a,v):Eo(i,a,v,d||null,!0):1===s&&null!==a?Eo(i,a,v,d||null,!0):2===s?function(s,i,a){const c=Il(s,i);c&&function(s,i,a,c){nn(s)?s.removeChild(i,a,c):i.removeChild(a)}(s,c,i,a)}(i,v,y):3===s&&i.destroyNode(v),null!=h&&function(s,i,a,c,d){const h=a[7];h!==bn(a)&&wl(i,s,c,h,d);for(let v=10;v<a.length;v++){const D=a[v];Lh(D[1],D,s,i,c,h)}}(i,s,h,a,d)}}function my(s,i,a){return nn(s)?s.createElement(i,a):null===a?s.createElement(i):s.createElementNS(a,i)}function Hp(s,i){const a=s[9],c=a.indexOf(i),d=i[3];1024&i[2]&&(i[2]&=-1025,ki(d,-1)),a.splice(c,1)}function Rh(s,i){if(s.length<=10)return;const a=10+i,c=s[a];if(c){const d=c[17];null!==d&&d!==s&&Hp(d,c),i>0&&(s[a-1][4]=c[4]);const h=oa(s,10+i);!function(s,i){Lh(s,i,i[11],2,null,null),i[0]=null,i[6]=null}(c[1],c);const y=h[19];null!==y&&y.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function $p(s,i){if(!(256&i[2])){const a=i[11];nn(a)&&a.destroyNode&&Lh(s,i,a,3,null,null),function(s){let i=s[13];if(!i)return Gp(s[1],s);for(;i;){let a=null;if(mi(i))a=i[13];else{const c=i[10];c&&(a=c)}if(!a){for(;i&&!i[4]&&i!==s;)mi(i)&&Gp(i[1],i),i=i[3];null===i&&(i=s),mi(i)&&Gp(i[1],i),a=i&&i[4]}i=a}}(i)}}function Gp(s,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function(s,i){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let c=0;c<a.length;c+=2){const d=i[a[c]];if(!(d instanceof Vi)){const h=a[c+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const v=d[h[y]],D=h[y+1];try{D.call(v)}finally{}}else try{h.call(d)}finally{}}}}(s,i),function(s,i){const a=s.cleanup,c=i[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+1],v="function"==typeof y?y(i):bn(i[y]),D=c[d=a[h+2]],b=a[h+3];"boolean"==typeof b?v.removeEventListener(a[h],D,b):b>=0?c[d=b]():c[d=-b].unsubscribe(),h+=2}else{const y=c[d=a[h+1]];a[h].call(y)}if(null!==c){for(let h=d+1;h<c.length;h++)c[h]();i[7]=null}}(s,i),1===i[1].type&&nn(i[11])&&i[11].destroy();const a=i[17];if(null!==a&&Pr(i[3])){a!==i[3]&&Hp(a,i);const c=i[19];null!==c&&c.detachView(s)}}}function _y(s,i,a){return function(s,i,a){let c=i;for(;null!==c&&40&c.type;)c=(i=c).parent;if(null===c)return a[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===W.None||d===W.Emulated)return null}return Zn(c,a)}(s,i.parent,a)}function Eo(s,i,a,c,d){nn(s)?s.insertBefore(i,a,c,d):i.insertBefore(a,c,d)}function Ey(s,i,a){nn(s)?s.appendChild(i,a):i.appendChild(a)}function JE(s,i,a,c,d){null!==c?Eo(s,i,a,c,d):Ey(s,i,a)}function Il(s,i){return nn(s)?s.parentNode(i):i.parentNode}let Oh=function(s,i,a){return 40&s.type?Zn(s,a):null};function qp(s,i,a,c){const d=_y(s,c,i),h=i[11],v=function(s,i,a){return Oh(s,i,a)}(c.parent||i[6],c,i);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)JE(h,d,a[D],v,!1);else JE(h,d,a,v,!1)}function kh(s,i){if(null!==i){const a=i.type;if(3&a)return Zn(i,s);if(4&a)return Dy(-1,s[i.index]);if(8&a){const c=i.child;if(null!==c)return kh(s,c);{const d=s[i.index];return Pr(d)?Dy(-1,d):bn(d)}}if(32&a)return hy(i,s)()||bn(s[i.index]);{const c=e0(s,i);return null!==c?Array.isArray(c)?c[0]:kh(_u(s[16]),c):kh(s,i.next)}}return null}function e0(s,i){return null!==i?s[16][6].projection[i.projection]:null}function Dy(s,i){const a=10+s+1;if(a<i.length){const c=i[a],d=c[1].firstChild;if(null!==d)return kh(c,d)}return i[7]}function Fh(s,i,a,c,d,h,y){for(;null!=a;){const v=c[a.index],D=a.type;if(y&&0===i&&(v&&ne(bn(v),c),a.flags|=4),64!=(64&a.flags))if(8&D)Fh(s,i,a.child,c,d,h,!1),wl(i,s,d,v,h);else if(32&D){const b=hy(a,c);let T;for(;T=b();)wl(i,s,d,T,h);wl(i,s,d,v,h)}else 16&D?by(s,i,c,a,d,h):wl(i,s,d,v,h);a=y?a.projectionNext:a.next}}function Lh(s,i,a,c,d,h){Fh(a,c,s.firstChild,i,d,h,!1)}function by(s,i,a,c,d,h){const y=a[16],D=y[6].projection[c.projection];if(Array.isArray(D))for(let b=0;b<D.length;b++)wl(i,s,d,D[b],h);else Fh(s,i,D,y[3],d,h,!0)}function Zp(s,i,a){nn(s)?s.setAttribute(i,"style",a):i.style.cssText=a}function Vh(s,i,a){nn(s)?""===a?s.removeAttribute(i,"class"):s.setAttribute(i,"class",a):i.className=a}function Ty(s,i,a){let c=s.length;for(;;){const d=s.indexOf(i,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const h=i.length;if(d+h===c||s.charCodeAt(d+h)<=32)return d}a=d+1}}const Dl="ng-template";function t0(s,i,a){let c=0;for(;c<s.length;){let d=s[c++];if(a&&"class"===d){if(d=s[c],-1!==Ty(d.toLowerCase(),i,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===i)return!0;return!1}}return!1}function Ay(s){return 4===s.type&&s.value!==Dl}function n0(s,i,a){return i===(4!==s.type||a?s.value:Dl)}function Kp(s,i,a){let c=4;const d=s.attrs||[],h=function(s){for(let i=0;i<s.length;i++)if(Gm(s[i]))return i;return s.length}(d);let y=!1;for(let v=0;v<i.length;v++){const D=i[v];if("number"!=typeof D){if(!y)if(4&c){if(c=2|1&c,""!==D&&!n0(s,D,a)||""===D&&1===i.length){if(Qi(c))return!1;y=!0}}else{const b=8&c?D:i[++v];if(8&c&&null!==s.attrs){if(!t0(s.attrs,b,a)){if(Qi(c))return!1;y=!0}continue}const x=OD(8&c?"class":D,d,Ay(s),a);if(-1===x){if(Qi(c))return!1;y=!0;continue}if(""!==b){let R;R=x>h?"":d[x+1].toLowerCase();const L=8&c?R:null;if(L&&-1!==Ty(L,b,0)||2&c&&b!==R){if(Qi(c))return!1;y=!0}}}}else{if(!y&&!Qi(c)&&!Qi(D))return!1;if(y&&Qi(D))continue;y=!1,c=D|1&c}}return Qi(c)||y}function Qi(s){return 0==(1&s)}function OD(s,i,a,c){if(null===i)return-1;let d=0;if(c||!a){let h=!1;for(;d<i.length;){const y=i[d];if(y===s)return d;if(3===y||6===y)h=!0;else{if(1===y||2===y){let v=i[++d];for(;"string"==typeof v;)v=i[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=h?1:2}return-1}return function(s,i){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const c=s[a];if("number"==typeof c)return-1;if(c===i)return a;a++}return-1}(i,s)}function vu(s,i,a=!1){for(let c=0;c<i.length;c++)if(Kp(s,i[c],a))return!0;return!1}function Uh(s,i){return s?":not("+i.trim()+")":i}function s0(s){let i=s[0],a=1,c=2,d="",h=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&c){const v=s[++a];d+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Qi(y)&&(i+=Uh(h,d),d=""),c=y,h=h||!Qi(c);a++}return""!==d&&(i+=Uh(h,d)),i}const Ye={};function Sy(s){Cl(Et(),De(),cr()+s,Yo())}function Cl(s,i,a,c){if(!c)if(3==(3&i[2])){const h=s.preOrderCheckHooks;null!==h&&fp(i,h,a)}else{const h=s.preOrderHooks;null!==h&&ro(i,h,0,a)}ys(a)}function wu(s,i){return s<<17|i<<2}function Ci(s){return s>>17&32767}function Qp(s){return 2|s}function ui(s){return(131068&s)>>2}function jh(s,i){return-131069&s|i<<2}function Hh(s){return 1|s}function xl(s,i){const a=s.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],h=a[c+1];if(-1!==h){const y=s.data[h];km(d),y.contentQueries(2,i[h],h)}}}function Ml(s,i,a,c,d,h,y,v,D,b){const T=i.blueprint.slice();return T[0]=d,T[2]=140|c,Vd(T),T[3]=T[15]=s,T[8]=a,T[10]=y||s&&s[10],T[11]=v||s&&s[11],T[12]=D||s&&s[12]||null,T[9]=b||s&&s[9]||null,T[6]=h,T[16]=2==i.type?s[16]:T,T}function bu(s,i,a,c,d){let h=s.data[i];if(null===h)h=function(s,i,a,c,d){const h=xc(),y=Xa(),D=s.data[i]=function(s,i,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,i,c,d);return null===s.firstChild&&(s.firstChild=D),null!==h&&(y?null==h.child&&null!==D.parent&&(h.child=D):null===h.next&&(h.next=D)),D}(s,i,a,c,d),at.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const y=function(){const s=at.lFrame,i=s.currentTNode;return s.isParent?i:i.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Li(h,!0),h}function Rl(s,i,a,c){if(0===a)return-1;const d=i.length;for(let h=0;h<a;h++)i.push(c),s.blueprint.push(c),s.data.push(null);return d}function Yh(s,i,a){dp(i);try{const c=s.viewQuery;null!==c&&Pl(1,c,a);const d=s.template;null!==d&&Fy(s,i,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xl(s,i),s.staticViewQueries&&Pl(2,s.viewQuery,a);const h=s.components;null!==h&&function(s,i){for(let a=0;a<i.length;a++)Yy(s,i[a])}(i,h)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{i[2]&=-5,Jo()}}function Tu(s,i,a,c){const d=i[2];if(256==(256&d))return;dp(i);const h=Yo();try{Vd(i),function(s){at.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Fy(s,i,a,2,c);const y=3==(3&d);if(!h)if(y){const b=s.preOrderCheckHooks;null!==b&&fp(i,b,null)}else{const b=s.preOrderHooks;null!==b&&ro(i,b,0,null),jm(i,0)}if(function(s){for(let i=fy(s);null!==i;i=py(i)){if(!i[2])continue;const a=i[9];for(let c=0;c<a.length;c++){const d=a[c],h=d[3];0==(1024&d[2])&&ki(h,1),d[2]|=1024}}}(i),function(s){for(let i=fy(s);null!==i;i=py(i))for(let a=10;a<i.length;a++){const c=i[a],d=c[1];Pi(c)&&Tu(d,c,d.template,c[8])}}(i),null!==s.contentQueries&&xl(s,i),!h)if(y){const b=s.contentCheckHooks;null!==b&&fp(i,b)}else{const b=s.contentHooks;null!==b&&ro(i,b,1),jm(i,1)}!function(s,i){const a=s.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)ys(~d);else{const h=d,y=a[++c],v=a[++c];ME(y,h),v(2,i[h])}}}finally{ys(-1)}}(s,i);const v=s.components;null!==v&&function(s,i){for(let a=0;a<i.length;a++)E0(s,i[a])}(i,v);const D=s.viewQuery;if(null!==D&&Pl(2,D,c),!h)if(y){const b=s.viewCheckHooks;null!==b&&fp(i,b)}else{const b=s.viewHooks;null!==b&&ro(i,b,2),jm(i,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),h||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,ki(i[3],-1))}finally{Jo()}}function HD(s,i,a,c){const d=i[10],h=!Yo(),y=function(s){return 4==(4&s[2])}(i);try{h&&!y&&d.begin&&d.begin(),y&&Yh(s,i,c),Tu(s,i,a,c)}finally{h&&!y&&d.end&&d.end()}}function Fy(s,i,a,c,d){const h=cr(),y=2&c;try{ys(-1),y&&i.length>20&&Cl(s,i,20,Yo()),a(c,d)}finally{ys(h)}}function Qh(s,i,a){!op()||(function(s,i,a,c){const d=a.directiveStart,h=a.directiveEnd;s.firstCreatePass||Bi(a,i),ne(c,i);const y=a.initialInputs;for(let v=d;v<h;v++){const D=s.data[v],b=ni(D);b&&zy(i,a,D);const T=ia(i,s,v,a);ne(T,i),null!==y&&Zy(0,v-d,T,D,0,y),b&&(Ir(a.index,i)[8]=T)}}(s,i,a,Zn(a,i)),128==(128&a.flags)&&function(s,i,a){const c=a.directiveStart,d=a.directiveEnd,y=a.index,v=at.lFrame.currentDirectiveIndex;try{ys(y);for(let D=c;D<d;D++){const b=s.data[D],T=i[D];Hd(D),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&$y(b,T)}}finally{ys(-1),Hd(v)}}(s,i,a))}function Jh(s,i,a=Zn){const c=i.localNames;if(null!==c){let d=i.index+1;for(let h=0;h<c.length;h+=2){const y=c[h+1],v=-1===y?a(i,s):s[y];s[d++]=v}}}function Vy(s){const i=s.tView;return null===i||i.incompleteFirstPass?s.tView=Xh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):i}function Xh(s,i,a,c,d,h,y,v,D,b){const T=20+c,x=T+d,R=function(s,i){const a=[];for(let c=0;c<i;c++)a.push(c<s?null:Ye);return a}(T,x),L="function"==typeof b?b():b;return R[1]={type:s,blueprint:R,template:a,queries:null,viewQuery:v,declTNode:i,data:R.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:x,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:D,consts:L,incompleteFirstPass:!1}}function nf(s,i,a){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(i,d):a[c]=[i,d]}return a}function jy(s,i,a,c){let d=!1;if(op()){const h=function(s,i,a){const c=s.directiveRegistry;let d=null;if(c)for(let h=0;h<c.length;h++){const y=c[h];vu(a,y.selectors,!1)&&(d||(d=[]),ra(Bi(a,i),s,y.type),ni(y)?(Gy(s,a),d.unshift(y)):d.push(y))}return d}(s,i,a),y=null===c?null:{"":-1};if(null!==h){d=!0,Ol(a,s.data.length,h.length);for(let T=0;T<h.length;T++){const x=h[T];x.providersResolver&&x.providersResolver(x)}let v=!1,D=!1,b=Rl(s,i,h.length,null);for(let T=0;T<h.length;T++){const x=h[T];a.mergedAttrs=Lc(a.mergedAttrs,x.hostAttrs),Wy(s,a,i,b,x),qy(b,x,y),null!==x.contentQueries&&(a.flags|=8),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=128);const R=x.type.prototype;!v&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),v=!0),!D&&(R.ngOnChanges||R.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),b++}!function(s,i){const c=i.directiveEnd,d=s.data,h=i.attrs,y=[];let v=null,D=null;for(let b=i.directiveStart;b<c;b++){const T=d[b],x=T.inputs,R=null===h||Ay(i)?null:ng(x,h);y.push(R),v=nf(x,b,v),D=nf(T.outputs,b,D)}null!==v&&(v.hasOwnProperty("class")&&(i.flags|=16),v.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=y,i.inputs=v,i.outputs=D}(s,a)}y&&function(s,i,a){if(i){const c=s.localNames=[];for(let d=0;d<i.length;d+=2){const h=a[i[d+1]];if(null==h)throw new Y("301",`Export of name '${i[d+1]}' not found!`);c.push(i[d],h)}}}(a,c,y)}return a.mergedAttrs=Lc(a.mergedAttrs,a.attrs),d}function Hy(s,i,a,c,d,h){const y=h.hostBindings;if(y){let v=s.hostBindingOpCodes;null===v&&(v=s.hostBindingOpCodes=[]);const D=~i.index;(function(s){let i=s.length;for(;i>0;){const a=s[--i];if("number"==typeof a&&a<0)return a}return 0})(v)!=D&&v.push(D),v.push(c,d,y)}}function $y(s,i){null!==s.hostBindings&&s.hostBindings(1,i)}function Gy(s,i){i.flags|=2,(s.components||(s.components=[])).push(i.index)}function qy(s,i,a){if(a){if(i.exportAs)for(let c=0;c<i.exportAs.length;c++)a[i.exportAs[c]]=s;ni(i)&&(a[""]=s)}}function Ol(s,i,a){s.flags|=1,s.directiveStart=i,s.directiveEnd=i+a,s.providerIndexes=i}function Wy(s,i,a,c,d){s.data[c]=d;const h=d.factory||(d.factory=gs(d.type)),y=new Vi(h,ni(d),null);s.blueprint[c]=y,a[c]=y,Hy(s,i,0,c,Rl(s,a,d.hostVars,Ye),d)}function zy(s,i,a){const c=Zn(i,s),d=Vy(a),h=s[10],y=Au(s,Ml(s,d,null,a.onPush?64:16,c,i,h,h.createRenderer(c,a),null,null));s[i.index]=y}function ci(s,i,a,c,d,h){const y=Zn(s,i);!function(s,i,a,c,d,h,y){if(null==h)nn(s)?s.removeAttribute(i,d,a):i.removeAttribute(d);else{const v=null==y?q(h):y(h,c||"",d);nn(s)?s.setAttribute(i,d,v,a):a?i.setAttributeNS(a,d,v):i.setAttribute(d,v)}}(i[11],y,h,s.value,a,c,d)}function Zy(s,i,a,c,d,h){const y=h[i];if(null!==y){const v=c.setInput;for(let D=0;D<y.length;){const b=y[D++],T=y[D++],x=y[D++];null!==v?c.setInput(a,x,b,T):a[T]=x}}}function ng(s,i){let a=null,c=0;for(;c<i.length;){const d=i[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],i[c+1])),c+=2}else c+=2;else c+=4}return a}function Ky(s,i,a,c){return new Array(s,!0,!1,i,null,0,c,a,null,null)}function E0(s,i){const a=Ir(i,s);if(Pi(a)){const c=a[1];80&a[2]?Tu(c,a,c.template,a[8]):a[5]>0&&of(a)}}function of(s){for(let c=fy(s);null!==c;c=py(c))for(let d=10;d<c.length;d++){const h=c[d];if(1024&h[2]){const y=h[1];Tu(y,h,y.template,h[8])}else h[5]>0&&of(h)}const a=s[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Ir(a[c],s);Pi(d)&&d[5]>0&&of(d)}}function Yy(s,i){const a=Ir(i,s),c=a[1];(function(s,i){for(let a=i.length;a<s.blueprint.length;a++)i.push(s.blueprint[a])})(c,a),Yh(c,a,a[8])}function Au(s,i){return s[13]?s[14][4]=i:s[13]=i,s[14]=i,i}function rg(s){for(;s;){s[2]|=64;const i=_u(s);if(Rd(s)&&!i)return s;s=i}return null}function ig(s,i,a){const c=i[10];c.begin&&c.begin();try{Tu(s,i,s.template,a)}catch(d){throw A0(i,d),d}finally{c.end&&c.end()}}function Qy(s){!function(s){for(let i=0;i<s.components.length;i++){const a=s.components[i],c=gu(a),d=c[1];HD(d,c,d.template,a)}}(s[8])}function Pl(s,i,a){km(0),i(s,a)}const b0=(()=>Promise.resolve(null))();function Jy(s){return s[7]||(s[7]=[])}function Su(s){return s.cleanup||(s.cleanup=[])}function A0(s,i){const a=s[9],c=a?a.get(Kn,null):null;c&&c.handleError(i)}function sg(s,i,a,c,d){for(let h=0;h<a.length;){const y=a[h++],v=a[h++],D=i[y],b=s.data[y];null!==b.setInput?b.setInput(D,d,c,v):D[v]=d}}function Co(s,i,a){const c=Zo(i,s);!function(s,i,a){nn(s)?s.setValue(i,a):i.textContent=a}(s[11],c,a)}function og(s,i,a){let c=a?s.styles:null,d=a?s.classes:null,h=0;if(null!==i)for(let y=0;y<i.length;y++){const v=i[y];"number"==typeof v?h=v:1==h?d=Le(d,v):2==h&&(c=Le(c,v+": "+i[++y]+";"))}a?s.styles=c:s.stylesWithoutHost=c,a?s.classes=d:s.classesWithoutHost=d}const kl=new Ht("INJECTOR",-1);class Xn{get(i,a=mo){if(a===mo){const c=new Error(`NullInjectorError: No provider for ${he(i)}!`);throw c.name="NullInjectorError",c}return a}}const Rs=new Ht("Set Injector scope."),Ti={},e_={};let t_;function Me(){return void 0===t_&&(t_=new Xn),t_}function Fl(s,i=null,a=null,c){return new n_(s,a,i||Me(),c)}class n_{constructor(i,a,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&si(a,v=>this.processProvider(v,i,a)),si([i],v=>this.processInjectorType(v,[],h)),this.records.set(kl,re(void 0,this));const y=this.records.get(Rs);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof i?null:he(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,a=mo,c=qe.Default){this.assertNotDestroyed();const d=wi(this),h=qr(void 0);try{if(!(c&qe.SkipSelf)){let v=this.records.get(i);if(void 0===v){const D=("function"==typeof(s=i)||"object"==typeof s&&s instanceof Ht)&&Gr(i);v=D&&this.injectableDefInScope(D)?re(ze(i),Ti):null,this.records.set(i,v)}if(null!=v)return this.hydrate(i,v)}return(c&qe.Self?Me():this.parent).get(i,a=c&qe.Optional&&a===mo?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[ua]=y[ua]||[]).unshift(he(i)),d)throw y;return Qm(y,i,"R3InjectorError",this.source)}throw y}finally{qr(h),wi(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((c,d)=>i.push(he(d))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(i,a,c){if(!(i=ke(i)))return!1;let d=Wt(i);const h=null==d&&i.ngModule||void 0,y=void 0===h?i:h,v=-1!==c.indexOf(y);if(void 0!==h&&(d=Wt(h)),null==d)return!1;if(null!=d.imports&&!v){let T;c.push(y);try{si(d.imports,x=>{this.processInjectorType(x,a,c)&&(void 0===T&&(T=[]),T.push(x))})}finally{}if(void 0!==T)for(let x=0;x<T.length;x++){const{ngModule:R,providers:L}=T[x];si(L,H=>this.processProvider(H,R,L||vt))}}this.injectorDefTypes.add(y);const D=gs(y)||(()=>new y);this.records.set(y,re(D,Ti));const b=d.providers;if(null!=b&&!v){const T=i;si(b,x=>this.processProvider(x,T,b))}return void 0!==h&&void 0!==i.providers}processProvider(i,a,c){let d=Ll(i=ke(i))?i:ke(i&&i.provide);const h=Se(s=i)?re(void 0,s.useValue):re(Fe(s),Ti);var s;if(Ll(i)||!0!==i.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=re(void 0,Ti,!0),y.factory=()=>Yr(y.multi),this.records.set(d,y)),d=i,y.multi.push(i)}this.records.set(d,h)}hydrate(i,a){return a.value===Ti&&(a.value=e_,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(s=a.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var s}injectableDefInScope(i){if(!i.providedIn)return!1;const a=ke(i.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function ze(s){const i=Gr(s),a=null!==i?i.factory:gs(s);if(null!==a)return a;if(s instanceof Ht)throw new Error(`Token ${he(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const i=s.length;if(i>0){const c=function(s,i){const a=[];for(let c=0;c<s;c++)a.push(i);return a}(i,"?");throw new Error(`Can't resolve all parameters for ${he(s)}: (${c.join(", ")}).`)}const a=function(s){const i=s&&(s[Dn]||s[Ge]);if(i){const a=function(s){if(s.hasOwnProperty("name"))return s.name;const i=(""+s).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),i}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Error("unreachable")}function Fe(s,i,a){let c;if(Ll(s)){const d=ke(s);return gs(d)||ze(d)}if(Se(s))c=()=>ke(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Yr(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>an(ke(s.useExisting));else{const d=ke(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return gs(d)||ze(d);c=()=>new d(...Yr(s.deps))}return c}function re(s,i,a=!1){return{factory:s,value:i,multi:a?[]:void 0}}function Se(s){return null!==s&&"object"==typeof s&&au in s}function Ll(s){return"function"==typeof s}const r_=function(s,i,a){return function(s,i=null,a=null,c){const d=Fl(s,i,a,c);return d._resolveInjectorDefTypes(),d}({name:a},i,s,a)};let Qe=(()=>{class s{static create(a,c){return Array.isArray(a)?r_(a,c,""):r_(a.providers,a.parent,a.name||"")}}return s.THROW_IF_NOT_FOUND=mo,s.NULL=new Xn,s.\u0275prov=tn({token:s,providedIn:"any",factory:()=>an(kl)}),s.__NG_ELEMENT_ID__=-1,s})();function k0(s,i){kc(gu(s)[1],_n())}function jl(s){let i=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const c=[s];for(;i;){let d;if(ni(s))d=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new Error("Directives cannot inherit Components");d=i.\u0275dir}if(d){if(a){c.push(d);const y=s;y.inputs=fr(s.inputs),y.declaredInputs=fr(s.declaredInputs),y.outputs=fr(s.outputs);const v=d.hostBindings;v&&oC(s,v);const D=d.viewQuery,b=d.contentQueries;if(D&&iC(s,D),b&&sC(s,b),xe(s.inputs,d.inputs),xe(s.declaredInputs,d.declaredInputs),xe(s.outputs,d.outputs),ni(d)&&d.data.animation){const T=s.data;T.animation=(T.animation||[]).concat(d.data.animation)}}const h=d.features;if(h)for(let y=0;y<h.length;y++){const v=h[y];v&&v.ngInherit&&v(s),v===jl&&(a=!1)}}i=Object.getPrototypeOf(i)}!function(s){let i=0,a=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=i+=d.hostVars,d.hostAttrs=Lc(d.hostAttrs,a=Lc(a,d.hostAttrs))}}(c)}function fr(s){return s===on?{}:s===vt?[]:s}function iC(s,i){const a=s.viewQuery;s.viewQuery=a?(c,d)=>{i(c,d),a(c,d)}:i}function sC(s,i){const a=s.contentQueries;s.contentQueries=a?(c,d,h)=>{i(c,d,h),a(c,d,h)}:i}function oC(s,i){const a=s.hostBindings;s.hostBindings=a?(c,d)=>{i(c,d),a(c,d)}:i}let mg=null;function Hl(){if(!mg){const s=ft.Symbol;if(s&&s.iterator)mg=s.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<i.length;++a){const c=i[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(mg=c)}}}return mg}function Ea(s){return!!yg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Hl()in s)}function yg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pr(s,i,a){return!Object.is(s[i],a)&&(s[i]=a,!0)}function hf(s,i,a,c){const d=De();return pr(d,Qo(),i)&&(Et(),ci(Kt(),d,s,i,a,c)),hf}function Ca(s,i,a,c,d,h,y,v){const D=De(),b=Et(),T=s+20,x=b.firstCreatePass?function(s,i,a,c,d,h,y,v,D){const b=i.consts,T=bu(i,s,4,y||null,Zr(b,v));jy(i,a,T,Zr(b,D)),kc(i,T);const x=T.tViews=Xh(2,T,c,d,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,b);return null!==i.queries&&(i.queries.template(i,T),x.queries=i.queries.embeddedTView(T)),T}(T,b,D,i,a,c,d,h,y):b.data[T];Li(x,!1);const R=D[11].createComment("");qp(b,D,R,x),ne(R,D),Au(D,D[T]=Ky(R,D,R,x)),wc(x)&&Qh(b,D,x),null!=y&&Jh(D,x,v)}function ba(s){return function(s,i){return s[i]}(at.lFrame.contextLView,20+s)}function yf(s,i=qe.Default){const a=De();return null===a?an(s,i):Fn(_n(),a,ke(s),i)}function E_(s,i,a){const c=De();return pr(c,Qo(),i)&&function(s,i,a,c,d,h,y,v){const D=Zn(i,a);let T,b=i.inputs;!v&&null!=b&&(T=b[c])?(sg(s,a,T,c,d),jo(i)&&function(s,i){const a=Ir(i,s);16&a[2]||(a[2]|=64)}(a,i.index)):3&i.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,i.value||"",c):d,nn(h)?h.setProperty(D,c,d):tu(c)||(D.setProperty?D.setProperty(c,d):D[c]=d))}(Et(),Kt(),c,s,i,c[11],a,!1),E_}function Lu(s,i,a,c,d){const y=d?"class":"style";sg(s,a,i.inputs[y],y,c)}function w_(s,i,a,c){const d=De(),h=Et(),y=20+s,v=d[11],D=d[y]=my(v,i,at.lFrame.currentNamespace),b=h.firstCreatePass?function(s,i,a,c,d,h,y){const v=i.consts,b=bu(i,s,2,d,Zr(v,h));return jy(i,a,b,Zr(v,y)),null!==b.attrs&&og(b,b.attrs,!1),null!==b.mergedAttrs&&og(b,b.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,b),b}(y,h,d,0,i,a,c):h.data[y];Li(b,!0);const T=b.mergedAttrs;null!==T&&eu(v,D,T);const x=b.classes;null!==x&&Vh(v,D,x);const R=b.styles;null!==R&&Zp(v,D,R),64!=(64&b.flags)&&qp(h,d,D,b),0===at.lFrame.elementDepthCount&&ne(D,d),at.lFrame.elementDepthCount++,wc(b)&&(Qh(h,d,b),function(s,i,a){if(Md(i)){const d=i.directiveEnd;for(let h=i.directiveStart;h<d;h++){const y=s.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}(h,b,d)),null!==c&&Jh(d,b)}function Rn(){let s=_n();Xa()?at.lFrame.isParent=!1:(s=s.parent,Li(s,!1));const i=s;at.lFrame.elementDepthCount--;const a=Et();a.firstCreatePass&&(kc(a,s),Md(s)&&a.queries.elementEnd(s)),null!=i.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(i)&&Lu(a,i,De(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(i)&&Lu(a,i,De(),i.stylesWithoutHost,!1)}function bg(s,i,a,c){w_(s,i,a,c),Rn()}function Zl(){return De()}function Ag(s){return!!s&&"function"==typeof s.then}function I_(s){return!!s&&"function"==typeof s.subscribe}const Sg=I_;function D_(s,i,a,c){const d=De(),h=Et(),y=_n();return function(s,i,a,c,d,h,y,v){const D=wc(c),T=s.firstCreatePass&&Su(s),x=i[8],R=Jy(i);let L=!0;if(3&c.type||v){const z=Zn(c,i),Ne=v?v(z):z,pe=R.length,Xe=v?dt=>v(bn(dt[c.index])):c.index;if(nn(a)){let dt=null;if(!v&&D&&(dt=function(s,i,a,c){const d=s.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const y=d[h];if(y===a&&d[h+1]===c){const v=i[7],D=d[h+2];return v.length>D?v[D]:null}"string"==typeof y&&(h+=2)}return null}(s,i,d,c.index)),null!==dt)(dt.__ngLastListenerFn__||dt).__ngNextListenerFn__=h,dt.__ngLastListenerFn__=h,L=!1;else{h=xg(c,i,x,h,!1);const bt=a.listen(Ne,d,h);R.push(h,bt),T&&T.push(d,Xe,pe,pe+1)}}else h=xg(c,i,x,h,!0),Ne.addEventListener(d,h,y),R.push(h),T&&T.push(d,Xe,pe,y)}else h=xg(c,i,x,h,!1);const H=c.outputs;let te;if(L&&null!==H&&(te=H[d])){const z=te.length;if(z)for(let Ne=0;Ne<z;Ne+=2){const Er=i[te[Ne]][te[Ne+1]].subscribe(h),Hs=R.length;R.push(h,Er),T&&T.push(d,c.index,Hs,-(Hs+1))}}}(h,d,d[11],y,s,i,!!a,c),D_}function ew(s,i,a,c){try{return!1!==a(c)}catch(d){return A0(s,d),!1}}function xg(s,i,a,c,d){return function h(y){if(y===Function)return c;const v=2&s.flags?Ir(s.index,i):i;0==(32&i[2])&&rg(v);let D=ew(i,0,c,y),b=h.__ngNextListenerFn__;for(;b;)D=ew(i,0,b,y)&&D,b=b.__ngNextListenerFn__;return d&&!1===D&&(y.preventDefault(),y.returnValue=!1),D}}function b_(s=1){return function(s){return(at.lFrame.contextLView=function(s,i){for(;s>0;)i=i[15],s--;return i}(s,at.lFrame.contextLView))[8]}(s)}function Ls(s,i,a,c,d){const h=s[a+1],y=null===i;let v=c?Ci(h):ui(h),D=!1;for(;0!==v&&(!1===D||y);){const T=s[v+1];CC(s[v],i)&&(D=!0,s[v+1]=c?Hh(T):Qp(T)),v=c?Ci(T):ui(T)}D&&(s[a+1]=c?Qp(h):Hh(h))}function CC(s,i){return null===s||null==i||(Array.isArray(s)?s[1]:s)===i||!(!Array.isArray(s)||"string"!=typeof i)&&$i(s,i)>=0}function Rg(s,i){return function(s,i,a,c){const d=De(),h=Et(),y=function(s){const i=at.lFrame,a=i.bindingIndex;return i.bindingIndex=i.bindingIndex+s,a}(2);h.firstUpdatePass&&function(s,i,a,c){const d=s.data;if(null===d[a+1]){const h=d[cr()],y=function(s,i){return i>=s.expandoStartIndex}(s,a);(function(s,i){return 0!=(s.flags&(i?16:32))})(h,c)&&null===i&&!y&&(i=!1),i=function(s,i,a,c){const d=function(s){const i=at.lFrame.currentDirectiveIndex;return-1===i?null:s[i]}(s);let h=c?i.residualClasses:i.residualStyles;if(null===d)0===(c?i.classBindings:i.styleBindings)&&(a=Hu(a=Sr(null,s,i,a,c),i.attrs,c),h=null);else{const y=i.directiveStylingLast;if(-1===y||s[y]!==d)if(a=Sr(d,s,i,a,c),null===h){let D=function(s,i,a){const c=a?i.classBindings:i.styleBindings;if(0!==ui(c))return s[Ci(c)]}(s,i,c);void 0!==D&&Array.isArray(D)&&(D=Sr(null,s,i,D[1],c),D=Hu(D,i.attrs,c),function(s,i,a,c){s[Ci(a?i.classBindings:i.styleBindings)]=c}(s,i,c,D))}else h=function(s,i,a){let c;const d=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<d;h++)c=Hu(c,s[h].hostAttrs,a);return Hu(c,i.attrs,a)}(s,i,c)}return void 0!==h&&(c?i.residualClasses=h:i.residualStyles=h),a}(d,h,i,c),function(s,i,a,c,d,h){let y=h?i.classBindings:i.styleBindings,v=Ci(y),D=ui(y);s[c]=a;let T,b=!1;if(Array.isArray(a)){const x=a;T=x[1],(null===T||$i(x,T)>0)&&(b=!0)}else T=a;if(d)if(0!==D){const R=Ci(s[v+1]);s[c+1]=wu(R,v),0!==R&&(s[R+1]=jh(s[R+1],c)),s[v+1]=function(s,i){return 131071&s|i<<17}(s[v+1],c)}else s[c+1]=wu(v,0),0!==v&&(s[v+1]=jh(s[v+1],c)),v=c;else s[c+1]=wu(D,0),0===v?v=c:s[D+1]=jh(s[D+1],c),D=c;b&&(s[c+1]=Qp(s[c+1])),Ls(s,T,c,!0),Ls(s,T,c,!1),function(s,i,a,c,d){const h=d?s.residualClasses:s.residualStyles;null!=h&&"string"==typeof i&&$i(h,i)>=0&&(a[c+1]=Hh(a[c+1]))}(i,T,s,c,h),y=wu(v,D),h?i.classBindings=y:i.styleBindings=y}(d,h,i,a,y,c)}}(h,s,y,c),i!==Ye&&pr(d,y,i)&&function(s,i,a,c,d,h,y,v){if(!(3&i.type))return;const D=s.data,b=D[v+1];Kl(function(s){return 1==(1&s)}(b)?x_(D,i,a,d,ui(b),y):void 0)||(Kl(h)||function(s){return 2==(2&s)}(b)&&(h=x_(D,null,a,d,v,y)),function(s,i,a,c,d){const h=nn(s);if(i)d?h?s.addClass(a,c):a.classList.add(c):h?s.removeClass(a,c):a.classList.remove(c);else{let y=-1===c.indexOf("-")?void 0:Di.DashCase;if(null==d)h?s.removeStyle(a,c,y):a.style.removeProperty(c);else{const v="string"==typeof d&&d.endsWith("!important");v&&(d=d.slice(0,-10),y|=Di.Important),h?s.setStyle(a,c,d,y):a.style.setProperty(c,d,v?"important":"")}}}(c,y,Zo(cr(),a),d,h))}(h,h.data[cr()],d,d[11],s,d[y+1]=function(s,i){return null==s||("string"==typeof i?s+=i:"object"==typeof s&&(s=he(Wi(s)))),s}(i,a),c,y)}(s,i,null,!0),Rg}function Sr(s,i,a,c,d){let h=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(h=i[v],c=Hu(c,h.hostAttrs,d),h!==s);)v++;return null!==s&&(a.directiveStylingLast=v),c}function Hu(s,i,a){const c=a?1:2;let d=-1;if(null!==i)for(let h=0;h<i.length;h++){const y=i[h];"number"==typeof y?d=y:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),kr(s,y,!!a||i[++h]))}return void 0===s?null:s}function x_(s,i,a,c,d,h){const y=null===i;let v;for(;d>0;){const D=s[d],b=Array.isArray(D),T=b?D[1]:D,x=null===T;let R=a[d+1];R===Ye&&(R=x?vt:void 0);let L=x?po(R,c):T===c?R:void 0;if(b&&!Kl(L)&&(L=po(D,c)),Kl(L)&&(v=L,y))return v;const H=s[d+1];d=y?Ci(H):ui(H)}if(null!==i){let D=h?i.residualClasses:i.residualStyles;null!=D&&(v=po(D,c))}return v}function Kl(s){return void 0!==s}function Gu(s,i=""){const a=De(),c=Et(),d=s+20,h=c.firstCreatePass?bu(c,d,1,i,null):c.data[d],y=a[d]=function(s,i){return nn(s)?s.createText(i):s.createTextNode(i)}(a[11],i);qp(c,a,y,h),Li(h,!1)}function Sa(s){return Na("",s,""),Sa}function Na(s,i,a){const c=De(),d=function(s,i,a,c){return pr(s,Qo(),a)?i+q(a)+c:Ye}(c,s,i,a);return d!==Ye&&Co(c,cr(),d),Na}const Vs=void 0;var Rw=["en",[["a","p"],["AM","PM"],Vs],[["AM","PM"],Vs,Vs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vs,"{1} 'at' {0}",Vs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const i=Math.floor(Math.abs(s)),a=s.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===a?1:5}];let Ra={};function Zu(s){const i=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Pw(i);if(a)return a;const c=i.split("-")[0];if(a=Pw(c),a)return a;if("en"===c)return Rw;throw new Error(`Missing locale data for the locale "${s}".`)}function Vg(s){return Zu(s)[rt.PluralCase]}function Pw(s){return s in Ra||(Ra[s]=ft.ng&&ft.ng.common&&ft.ng.common.locales&&ft.ng.common.locales[s]),Ra[s]}var rt=(()=>((rt=rt||{})[rt.LocaleId=0]="LocaleId",rt[rt.DayPeriodsFormat=1]="DayPeriodsFormat",rt[rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",rt[rt.DaysFormat=3]="DaysFormat",rt[rt.DaysStandalone=4]="DaysStandalone",rt[rt.MonthsFormat=5]="MonthsFormat",rt[rt.MonthsStandalone=6]="MonthsStandalone",rt[rt.Eras=7]="Eras",rt[rt.FirstDayOfWeek=8]="FirstDayOfWeek",rt[rt.WeekendRange=9]="WeekendRange",rt[rt.DateFormat=10]="DateFormat",rt[rt.TimeFormat=11]="TimeFormat",rt[rt.DateTimeFormat=12]="DateTimeFormat",rt[rt.NumberSymbols=13]="NumberSymbols",rt[rt.NumberFormats=14]="NumberFormats",rt[rt.CurrencyCode=15]="CurrencyCode",rt[rt.CurrencySymbol=16]="CurrencySymbol",rt[rt.CurrencyName=17]="CurrencyName",rt[rt.Currencies=18]="Currencies",rt[rt.Directionality=19]="Directionality",rt[rt.PluralCase=20]="PluralCase",rt[rt.ExtraData=21]="ExtraData",rt))();const wf="en-US";let Lw=wf;function Oa(s){In(s,"Expected localeId to be defined"),"string"==typeof s&&(Lw=s.toLowerCase().replace(/_/g,"-"))}function Of(s,i,a,c,d){if(s=ke(s),Array.isArray(s))for(let h=0;h<s.length;h++)Of(s[h],i,a,c,d);else{const h=Et(),y=De();let v=Ll(s)?s:ke(s.provide),D=Fe(s);const b=_n(),T=1048575&b.providerIndexes,x=b.directiveStart,R=b.providerIndexes>>20;if(Ll(s)||!s.multi){const L=new Vi(D,d,yf),H=Us(v,i,d?T:T+R,x);-1===H?(ra(Bi(b,y),h,v),Pf(h,s,i.length),i.push(v),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(L),y.push(L)):(a[H]=L,y[H]=L)}else{const L=Us(v,i,T+R,x),H=Us(v,i,T,T+R),te=L>=0&&a[L],z=H>=0&&a[H];if(d&&!z||!d&&!te){ra(Bi(b,y),h,v);const Ne=function(s,i,a,c,d){const h=new Vi(s,a,yf);return h.multi=[],h.index=i,h.componentProviders=0,Yu(h,d,c&&!a),h}(d?rd:uv,a.length,d,c,D);!d&&z&&(a[H].providerFactory=Ne),Pf(h,s,i.length,0),i.push(v),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(Ne),y.push(Ne)}else Pf(h,s,L>-1?L:H,Yu(a[d?H:L],D,!d&&c));!d&&c&&z&&a[H].componentProviders++}}}function Pf(s,i,a,c){const d=Ll(i);if(d||function(s){return!!s.useClass}(i)){const y=(i.useClass||i).prototype.ngOnDestroy;if(y){const v=s.destroyHooks||(s.destroyHooks=[]);if(!d&&i.multi){const D=v.indexOf(a);-1===D?v.push(a,[c,y]):v[D+1].push(c,y)}else v.push(a,y)}}}function Yu(s,i,a){return a&&s.componentProviders++,s.multi.push(i)-1}function Us(s,i,a,c){for(let d=a;d<c;d++)if(i[d]===s)return d;return-1}function uv(s,i,a,c){return Fa(this.multi,[])}function rd(s,i,a,c){const d=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=ia(a,a[1],this.providerFactory.index,c);h=v.slice(0,y),Fa(d,h);for(let D=y;D<v.length;D++)h.push(v[D])}else h=[],Fa(d,h);return h}function Fa(s,i){for(let a=0;a<s.length;a++)i.push((0,s[a])());return i}function Qu(s,i=[]){return a=>{a.providersResolver=(c,d)=>function(s,i,a){const c=Et();if(c.firstCreatePass){const d=ni(s);Of(a,c.data,c.blueprint,d,!0),Of(i,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,i)}}class Xw{}const zg="ngComponent";class cv{resolveComponentFactory(i){throw function(s){const i=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return i[zg]=s,i}(i)}}let id=(()=>{class s{}return s.NULL=new cv,s})();function sd(...s){}function Ju(s,i){return new os(Zn(s,i))}const tI=function(){return Ju(_n(),De())};let os=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=tI,s})();class Zg{}let XC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>dv(),s})();const dv=function(){const s=De(),a=Ir(_n().index,s);return function(s){return s[11]}(mi(a)?a:s)};let Ff=(()=>{class s{}return s.\u0275prov=tn({token:s,providedIn:"root",factory:()=>null}),s})();class rI{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const Lf=new rI("12.2.7");class fv{constructor(){}supports(i){return Ea(i)}create(i){return new rb(i)}}const pv=(s,i)=>i;class rb{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||pv}forEachItem(i){let a;for(a=this._itHead;null!==a;a=a._next)i(a)}forEachOperation(i){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const y=!c||a&&a.currentIndex<iI(c,d,h)?a:c,v=iI(y,d,h),D=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{h||(h=[]);const b=v-d,T=D-d;if(b!=T){for(let R=0;R<b;R++){const L=R<h.length?h[R]:h[R]=0,H=L+R;T<=H&&H<b&&(h[R]=L+1)}h[y.previousIndex]=T-b}}v!==D&&i(y,v,D)}}forEachPreviousItem(i){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachMovedItem(i){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}forEachIdentityChange(i){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)i(a)}diff(i){if(null==i&&(i=[]),!Ea(i))throw new Error(`Error trying to diff '${he(i)}'. Only arrays and iterables are allowed`);return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let d,h,y,a=this._itHead,c=!1;if(Array.isArray(i)){this.length=i.length;for(let v=0;v<this.length;v++)h=i[v],y=this._trackByFn(v,h),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,h,y,v)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,v),c=!0),a=a._next}else d=0,function(s,i){if(Array.isArray(s))for(let a=0;a<s.length;a++)i(s[a]);else{const a=s[Hl()]();let c;for(;!(c=a.next()).done;)i(c.value)}}(i,v=>{y=this._trackByFn(d,v),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,v,y,d)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,a,c,d){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._reinsertAfter(i,h,d)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(i.item,a)||this._addIdentityChange(i,a),this._moveAfter(i,h,d)):i=this._addAfter(new gv(a,c),h,d),i}_verifyReinsertion(i,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?i=this._reinsertAfter(h,i._prev,d):i.currentIndex!=d&&(i.currentIndex=d,this._addToMoves(i,d)),i}_truncate(i){for(;null!==i;){const a=i._next;this._addToRemovals(this._unlink(i)),i=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const d=i._prevRemoved,h=i._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(i,a,c),this._addToMoves(i,c),i}_moveAfter(i,a,c){return this._unlink(i),this._insertAfter(i,a,c),this._addToMoves(i,c),i}_addAfter(i,a,c){return this._insertAfter(i,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,a,c){const d=null===a?this._itHead:a._next;return i._next=d,i._prev=a,null===d?this._itTail=i:d._prev=i,null===a?this._itHead=i:a._next=i,null===this._linkedRecords&&(this._linkedRecords=new Kg),this._linkedRecords.put(i),i.currentIndex=c,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const a=i._prev,c=i._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,i}_addToMoves(i,a){return i.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Kg),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,a){return i.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class gv{constructor(i,a){this.item=i,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ib{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,i))return c;return null}remove(i){const a=i._prevDup,c=i._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Kg{constructor(){this.map=new Map}put(i){const a=i.trackById;let c=this.map.get(a);c||(c=new ib,this.map.set(a,c)),c.add(i)}get(i,a){const d=this.map.get(i);return d?d.get(i,a):null}remove(i){const a=i.trackById;return this.map.get(a).remove(i)&&this.map.delete(a),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iI(s,i,a){const c=s.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+i+d}class Yg{constructor(){}supports(i){return i instanceof Map||yg(i)}create(){return new sb}}class sb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let a;for(a=this._mapHead;null!==a;a=a._next)i(a)}forEachPreviousItem(i){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)i(a)}forEachChangedItem(i){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)i(a)}forEachAddedItem(i){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)i(a)}forEachRemovedItem(i){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)i(a)}diff(i){if(i){if(!(i instanceof Map||yg(i)))throw new Error(`Error trying to diff '${he(i)}'. Only maps and objects are allowed`)}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(i,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,a){if(i){const c=i._prev;return a._next=i,a._prev=c,i._prev=a,c&&(c._next=a),i===this._mapHead&&(this._mapHead=a),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(i,a){if(this._records.has(i)){const d=this._records.get(i);this._maybeAddToChanges(d,a);const h=d._prev,y=d._next;return h&&(h._next=y),y&&(y._prev=h),d._next=null,d._prev=null,d}const c=new mv(i);return this._records.set(i,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,a){Object.is(a,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=a,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,a){i instanceof Map?i.forEach(a):Object.keys(i).forEach(c=>a(i[c],c))}}class mv{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qg(){return new od([new fv])}let od=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||Qg()),deps:[[s,new Cs,new Ds]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(s){return s.name||typeof s}(a)}'`)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:Qg}),s})();function yv(){return new ud([new Yg])}let ud=(()=>{class s{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:c=>s.create(a,c||yv()),deps:[[s,new Cs,new Ds]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return s.\u0275prov=tn({token:s,providedIn:"root",factory:yv}),s})();function Jg(s,i,a,c,d=!1){for(;null!==a;){const h=i[a.index];if(null!==h&&c.push(bn(h)),Pr(h))for(let v=10;v<h.length;v++){const D=h[v],b=D[1].firstChild;null!==b&&Jg(D[1],D,b,c)}const y=a.type;if(8&y)Jg(s,i,a.child,c);else if(32&y){const v=hy(a,i);let D;for(;D=v();)c.push(D)}else if(16&y){const v=e0(i,a);if(Array.isArray(v))c.push(...v);else{const D=_u(i[16]);Jg(D[1],D,v,c,!0)}}a=d?a.projectionNext:a.next}return c}class Xu{constructor(i,a){this._lView=i,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,a=i[1];return Jg(a,i,a.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(Pr(i)){const a=i[8],c=a?a.indexOf(this):-1;c>-1&&(Rh(i,c),oa(a,c))}this._attachedToViewContainer=!1}$p(this._lView[1],this._lView)}onDestroy(i){!function(s,i,a,c){const d=Jy(i);null===a?d.push(c):(d.push(a),s.firstCreatePass&&Su(s).push(c,d.length-1))}(this._lView[1],this._lView,null,i)}markForCheck(){rg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ig(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,i,a){Rc(!0);try{ig(s,i,a)}finally{Rc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var i;this._appRef=null,Lh(this._lView[1],i=this._lView,i[11],2,null,null)}attachToAppRef(i){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=i}}class xo extends Xu{constructor(i){super(i),this._view=i}detectChanges(){Qy(this._view)}checkNoChanges(){!function(s){Rc(!0);try{Qy(s)}finally{Rc(!1)}}(this._view)}get context(){return null}}const vv=function(s){return function(s,i,a){if(jo(s)&&!a){const c=Ir(s.index,i);return new Xu(c,c)}return 47&s.type?new Xu(i[16],i):null}(_n(),De(),16==(16&s))};let ob=(()=>{class s{}return s.__NG_ELEMENT_ID__=vv,s})();const ub=[new Yg],cb=new od([new fv]),Iv=new ud(ub),oI=function(){return cd(_n(),De())};let ec=(()=>{class s{}return s.__NG_ELEMENT_ID__=oI,s})();const aI=ec,db=class extends aI{constructor(i,a,c){super(),this._declarationLView=i,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(i){const a=this._declarationTContainer.tViews,c=Ml(this._declarationLView,a,i,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(c[19]=h.createEmbeddedView(a)),Yh(a,c,i),new Xu(c)}};function cd(s,i){return 4&s.type?new db(i,s,Ju(s,i)):null}class tc{}const fb=function(){return function(s,i){let a;const c=i[s.index];if(Pr(c))a=c;else{let d;if(8&s.type)d=bn(c);else{const h=i[11];d=h.createComment("");const y=Zn(s,i);Eo(h,Il(h,y),d,function(s,i){return nn(s)?s.nextSibling(i):i.nextSibling}(h,y),!1)}i[s.index]=a=Ky(c,i,d,s),Au(i,a)}return new Xg(a,s,i)}(_n(),De())};let Vf=(()=>{class s{}return s.__NG_ELEMENT_ID__=fb,s})();const pb=Vf,Xg=class extends pb{constructor(i,a,c){super(),this._lContainer=i,this._hostTNode=a,this._hostLView=c}get element(){return Ju(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){const i=jc(this._hostTNode,this._hostLView);if(Vc(i)){const a=vs(i,this._hostLView),c=Cr(i);return new so(a[1].data[c+8],a)}return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const a=bv(this._lContainer);return null!==a&&a[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,a,c){const d=i.createEmbeddedView(a||{});return this.insert(d,c),d}createComponent(i,a,c,d,h){const y=c||this.parentInjector;if(!h&&null==i.ngModule&&y){const D=y.get(tc,null);D&&(h=D)}const v=i.create(y,d,void 0,h);return this.insert(v.hostView,a),v}insert(i,a){const c=i._lView,d=c[1];if(Pr(c[3])){const T=this.indexOf(i);if(-1!==T)this.detach(T);else{const x=c[3],R=new Xg(x,x[6],x[3]);R.detach(R.indexOf(i))}}const h=this._adjustIndex(a),y=this._lContainer;!function(s,i,a,c){const d=10+c,h=a.length;c>0&&(a[d-1][4]=i),c<h-10?(i[4]=a[d],nh(a,10+c,i)):(a.push(i),i[4]=null),i[3]=a;const y=i[17];null!==y&&a!==y&&function(s,i){const a=s[9];i[16]!==i[3][3][16]&&(s[2]=!0),null===a?s[9]=[i]:a.push(i)}(y,i);const v=i[19];null!==v&&v.insertView(s),i[2]|=128}(d,c,y,h);const v=Dy(h,y),D=c[11],b=Il(D,y[7]);return null!==b&&function(s,i,a,c,d,h){c[0]=d,c[6]=i,Lh(s,c,a,1,d,h)}(d,y[6],D,c,b,v),i.attachToViewContainerRef(),nh(ld(y),h,i),i}move(i,a){return this.insert(i,a)}indexOf(i){const a=bv(this._lContainer);return null!==a?a.indexOf(i):-1}remove(i){const a=this._adjustIndex(i,-1),c=Rh(this._lContainer,a);c&&(oa(ld(this._lContainer),a),$p(c[1],c))}detach(i){const a=this._adjustIndex(i,-1),c=Rh(this._lContainer,a);return c&&null!=oa(ld(this._lContainer),a)?new Xu(c):null}_adjustIndex(i,a=0){return null==i?this.length+a:i}};function bv(s){return s[8]}function ld(s){return s[8]||(s[8]=[])}const vd={};class Qv extends id{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const a=Pn(i);return new Jv(a,this.ngModule)}}function AI(s){const i=[];for(let a in s)s.hasOwnProperty(a)&&i.push({propName:s[a],templateName:a});return i}const SI=new Ht("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sh});class Jv extends Xw{constructor(i,a){super(),this.componentDef=i,this.ngModule=a,this.componentType=i.type,this.selector=i.selectors.map(s0).join(","),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return AI(this.componentDef.inputs)}get outputs(){return AI(this.componentDef.outputs)}create(i,a,c,d){const h=(d=d||this.ngModule)?function(s,i){return{get:(a,c,d)=>{const h=s.get(a,vd,d);return h!==vd||c===vd?h:i.get(a,c,d)}}}(i,d.injector):i,y=h.get(Zg,xm),v=h.get(Ff,null),D=y.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",T=c?function(s,i,a){if(nn(s))return s.selectRootElement(i,a===W.ShadowDom);let c="string"==typeof i?s.querySelector(i):i;return c.textContent="",c}(D,c,this.componentDef.encapsulation):my(y.createRenderer(null,this.componentDef),b,function(s){const i=s.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(b)),x=this.componentDef.onPush?576:528,R=function(s,i){return{components:[],scheduler:s||Sh,clean:b0,playerHandler:i||null,flags:0}}(),L=Xh(0,null,null,1,0,null,null,null,null,null),H=Ml(null,L,R,x,null,null,y,D,v,h);let te,z;dp(H);try{const Ne=function(s,i,a,c,d,h){const y=a[1];a[20]=s;const D=bu(y,20,2,"#host",null),b=D.mergedAttrs=i.hostAttrs;null!==b&&(og(D,b,!0),null!==s&&(eu(d,s,b),null!==D.classes&&Vh(d,s,D.classes),null!==D.styles&&Zp(d,s,D.styles)));const T=c.createRenderer(s,i),x=Ml(a,Vy(i),null,i.onPush?64:16,a[20],D,c,T,h||null,null);return y.firstCreatePass&&(ra(Bi(D,a),y,i.type),Gy(y,D),Ol(D,a.length,1)),Au(a,x),a[20]=x}(T,this.componentDef,H,y,D);if(T)if(c)eu(D,T,["ng-version",Lf.full]);else{const{attrs:pe,classes:Xe}=function(s){const i=[],a=[];let c=1,d=2;for(;c<s.length;){let h=s[c];if("string"==typeof h)2===d?""!==h&&i.push(h,s[++c]):8===d&&a.push(h);else{if(!Qi(d))break;d=h}c++}return{attrs:i,classes:a}}(this.componentDef.selectors[0]);pe&&eu(D,T,pe),Xe&&Xe.length>0&&Vh(D,T,Xe.join(" "))}if(z=Qa(L,20),void 0!==a){const pe=z.projection=[];for(let Xe=0;Xe<this.ngContentSelectors.length;Xe++){const dt=a[Xe];pe.push(null!=dt?Array.from(dt):null)}}te=function(s,i,a,c,d){const h=a[1],y=function(s,i,a){const c=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Wy(s,c,i,Rl(s,i,1,null),a));const d=ia(i,s,c.directiveStart,c);ne(d,i);const h=Zn(c,i);return h&&ne(h,i),d}(h,a,i);if(c.components.push(y),s[8]=y,d&&d.forEach(D=>D(y,i)),i.contentQueries){const D=_n();i.contentQueries(1,y,D.directiveStart)}const v=_n();return!h.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ys(v.index),Hy(a[1],v,0,v.directiveStart,v.directiveEnd,i),$y(i,y)),y}(Ne,this.componentDef,H,R,[k0]),Yh(L,H,null)}finally{Jo()}return new cm(this.componentType,te,Ju(z,H),H,z)}}class cm extends class{}{constructor(i,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new xo(d),this.componentType=i}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}const uc=new Map;class Fb extends tc{constructor(i,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Qv(this);const c=Or(i),d=i[bd]||null;d&&Oa(d),this._bootstrapComponents=Ii(c.bootstrap),this._r3Injector=Fl(i,a,[{provide:tc,useValue:this},{provide:id,useValue:this.componentFactoryResolver}],he(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,a=Qe.THROW_IF_NOT_FOUND,c=qe.Default){return i===Qe||i===tc||i===kl?this:this._r3Injector.get(i,a,c)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class Xv extends class{}{constructor(i){super(),this.moduleType=i,null!==Or(i)&&function(s){const i=new Set;!function a(c){const d=Or(c,!0),h=d.id;null!==h&&(function(s,i,a){if(i&&i!==a)throw new Error(`Duplicate module registered for ${s} - ${he(i)} vs ${he(i.name)}`)}(h,uc.get(h),c),uc.set(h,c));const y=Ii(d.imports);for(const v of y)i.has(v)||(i.add(v),a(v))}(s)}(i)}create(i){return new Fb(this.moduleType,i)}}function nE(s){return i=>{setTimeout(s,void 0,i)}}const ls=class extends _.xQ{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,a,c){var d,h,y;let v=i,D=a||(()=>null),b=c;if(i&&"object"==typeof i){const x=i;v=null===(d=x.next)||void 0===d?void 0:d.bind(x),D=null===(h=x.error)||void 0===h?void 0:h.bind(x),b=null===(y=x.complete)||void 0===y?void 0:y.bind(x)}this.__isAsync&&(D=nE(D),v&&(v=nE(v)),b&&(b=nE(b)));const T=super.subscribe({next:v,error:D,complete:b});return i instanceof J.w&&i.add(T),T}};function js(s,i){return cd(s,i)}Symbol;const O=new Ht("Application Initializer");let F=(()=>{class s{constructor(a){this.appInits=a,this.resolve=sd,this.reject=sd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(Ag(h))a.push(h);else if(Sg(h)){const y=new Promise((v,D)=>{h.subscribe({complete:v,error:D})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(an(O,8))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();const Q=new Ht("AppId"),Ie={provide:Q,useFactory:function(){return`${Be()}${Be()}${Be()}`},deps:[]};function Be(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tt=new Ht("Platform Initializer"),Ot=new Ht("Platform ID"),Jt=new Ht("appBootstrapListener");let Xt=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();const Gn=new Ht("LocaleId"),Kf=new Ht("DefaultCurrencyCode");class dS{constructor(i,a){this.ngModuleFactory=i,this.componentFactories=a}}const hT=function(s){return new Xv(s)},hS=hT,fS=function(s){return Promise.resolve(hT(s))},DA=function(s){const i=hT(s),c=Ii(Or(s).declarations).reduce((d,h)=>{const y=Pn(h);return y&&d.push(new Jv(y)),d},[]);return new dS(i,c)},pS=DA,gS=function(s){return Promise.resolve(DA(s))};let hD=(()=>{class s{constructor(){this.compileModuleSync=hS,this.compileModuleAsync=fS,this.compileModuleAndAllComponentsSync=pS,this.compileModuleAndAllComponentsAsync=gS}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();const _S=(()=>Promise.resolve(0))();function fT(s){"undefined"==typeof Zone?_S.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ds{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ls(!1),this.onMicrotaskEmpty=new ls(!1),this.onStable=new ls(!1),this.onError=new ls(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=ft.requestAnimationFrame,i=ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&i){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function(s){const i=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(ft,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,gT(s),s.isCheckStableRunning=!0,pT(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),gT(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,y,v)=>{try{return CA(s),a.invokeTask(d,h,y,v)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||s.shouldCoalesceRunChangeDetection)&&i(),bA(s)}},onInvoke:(a,c,d,h,y,v,D)=>{try{return CA(s),a.invoke(d,h,y,v,D)}finally{s.shouldCoalesceRunChangeDetection&&i(),bA(s)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(s._hasPendingMicrotasks=h.microTask,gT(s),pT(s)):"macroTask"==h.change&&(s.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),s.runOutsideAngular(()=>s.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ds.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ds.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,a,c){return this._inner.run(i,a,c)}runTask(i,a,c,d){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+d,i,ES,sd,sd);try{return h.runTask(y,a,c)}finally{h.cancelTask(y)}}runGuarded(i,a,c){return this._inner.runGuarded(i,a,c)}runOutsideAngular(i){return this._outer.run(i)}}const ES={};function pT(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function gT(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function CA(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function bA(s){s._nesting--,pT(s)}class DS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ls,this.onMicrotaskEmpty=new ls,this.onStable=new ls,this.onError=new ls}run(i,a,c){return i.apply(a,c)}runGuarded(i,a,c){return i.apply(a,c)}runOutsideAngular(i){return i()}runTask(i,a,c,d){return i.apply(a,c)}}let TA=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ds.assertNotInAngularZone(),fT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fT(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(an(ds))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})(),AA=(()=>{class s{constructor(){this._applications=new Map,mT.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return mT.findTestabilityInTree(this,a,c)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();class CS{addToWindow(i){}findTestabilityInTree(i,a,c){return null}}function bS(s){mT=s}let mT=new CS,SA=!0,NA=!1;function yT(){return NA=!0,SA}function TS(){if(NA)throw new Error("Cannot enable prod mode after platform setup.");SA=!1}let ko;const xA=new Ht("AllowMultipleToken");class OS{constructor(i,a){this.name=i,this.token=a}}function MA(s,i,a=[]){const c=`Platform: ${i}`,d=new Ht(c);return(h=[])=>{let y=RA();if(!y||y.injector.get(xA,!1))if(s)s(a.concat(h).concat({provide:d,useValue:!0}));else{const v=a.concat(h).concat({provide:d,useValue:!0},{provide:Rs,useValue:"platform"});!function(s){if(ko&&!ko.destroyed&&!ko.injector.get(xA,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ko=s.get(OA);const i=s.get(tt,null);i&&i.forEach(a=>a())}(Qe.create({providers:v,name:c}))}return function(s){const i=RA();if(!i)throw new Error("No platform exists!");if(!i.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return i}(d)}}function RA(){return ko&&!ko.destroyed?ko:null}let OA=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const v=function(s,i){let a;return a="noop"===s?new DS:("zone.js"===s?void 0:s)||new ds({enableLongStackTrace:yT(),shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),D=[{provide:ds,useValue:v}];return v.run(()=>{const b=Qe.create({providers:D,parent:this.injector,name:a.moduleType.name}),T=a.create(b),x=T.injector.get(Kn,null);if(!x)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return v.runOutsideAngular(()=>{const R=v.onError.subscribe({next:L=>{x.handleError(L)}});T.onDestroy(()=>{_T(this._modules,T),R.unsubscribe()})}),function(s,i,a){try{const c=a();return Ag(c)?c.catch(d=>{throw i.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw i.runOutsideAngular(()=>s.handleError(c)),c}}(x,v,()=>{const R=T.injector.get(F);return R.runInitializers(),R.donePromise.then(()=>(Oa(T.injector.get(Gn,wf)||wf),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,c=[]){const d=PA({},c);return function(s,i,a){const c=new Xv(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(vE);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${he(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(an(Qe))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();function PA(s,i){return Array.isArray(i)?i.reduce(PA,s):Object.assign(Object.assign({},s),i)}let vE=(()=>{class s{constructor(a,c,d,h,y){this._zone=a,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new j.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),D=new j.y(b=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{ds.assertNotInAngularZone(),fT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{T.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ge.T)(v,D.pipe(s=>de()(function(s,i){return function(c){let d;d="function"==typeof s?s:function(){return s};const h=Object.create(c,P);return h.source=c,h.subjectFactory=d,h}}(ee)(s))))}bootstrap(a,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=a instanceof Xw?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const h=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get(tc),v=d.create(Qe.NULL,[],c||d.selector,h),D=v.location.nativeElement,b=v.injector.get(TA,null),T=b&&v.injector.get(AA);return b&&T&&T.registerApplication(D,b),v.onDestroy(()=>{this.detachView(v.hostView),_T(this.components,v),T&&T.unregisterApplication(D)}),this._loadComponent(v),v}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;_T(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Jt,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(an(ds),an(Qe),an(Kn),an(id),an(F))},s.\u0275prov=tn({token:s,factory:s.\u0275fac}),s})();function _T(s,i){const a=s.indexOf(i);a>-1&&s.splice(a,1)}const KS=function(s){return null},QS=MA(null,"core",[{provide:Ot,useValue:"unknown"},{provide:OA,deps:[Qe]},{provide:AA,deps:[]},{provide:Xt,deps:[]}]),nN=[{provide:vE,useClass:vE,deps:[ds,Qe,Kn,id,F]},{provide:SI,deps:[ds],useFactory:function(s){let i=[];return s.onStable.subscribe(()=>{for(;i.length;)i.pop()()}),function(a){i.push(a)}}},{provide:F,useClass:F,deps:[[new Ds,O]]},{provide:hD,useClass:hD,deps:[]},Ie,{provide:od,useFactory:function(){return cb},deps:[]},{provide:ud,useFactory:function(){return Iv},deps:[]},{provide:Gn,useFactory:function(s){return Oa(s=s||"undefined"!=typeof $localize&&$localize.locale||wf),s},deps:[[new ha(Gn),new Ds,new Cs]]},{provide:Kf,useValue:"USD"}];let iN=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(an(vE))},s.\u0275mod=Td({type:s}),s.\u0275inj=or({providers:nN}),s})()},8939:(Je,Te,k)=>{"use strict";k.d(Te,{hO:()=>X,xv:()=>se,Dh:()=>Ee,GT:()=>de,on:()=>P,pX:()=>fe});var _=k(4693),J=k(7841),j=k(2993);Je=k.hmd(Je);const ge=["ngOnDestroy"],fe=(Z,ce,ee,_e={})=>new Proxy(Z,{get:(we,xe)=>ee.runOutsideAngular(()=>{var he;if(Z[xe])return(null===(he=null==_e?void 0:_e.spy)||void 0===he?void 0:he.get)&&_e.spy.get(xe,Z[xe]),Z[xe];if(ge.indexOf(xe)>-1)return()=>{};const Le=ce.toPromise().then($e=>{const _t=$e&&$e[xe];return"function"==typeof _t?_t.bind($e):_t&&_t.then?_t.then(ke=>ee.run(()=>ke)):ee.run(()=>_t)});return new Proxy(()=>{},{get:($e,_t)=>Le[_t],apply:($e,_t,ke)=>Le.then(Dt=>{var me;const Y=Dt&&Dt(...ke);return(null===(me=null==_e?void 0:_e.spy)||void 0===me?void 0:me.apply)&&_e.spy.apply(xe,ke,Y),Y})})})}),de=(Z,ce)=>{ce.forEach(ee=>{Object.getOwnPropertyNames(ee.prototype||ee).forEach(_e=>{Object.defineProperty(Z.prototype,_e,Object.getOwnPropertyDescriptor(ee.prototype||ee,_e))})})};class Ae{constructor(ce){return ce}}const Ee=new _.OlP("angularfire2.app.options"),se=new _.OlP("angularfire2.app.name");function P(Z,ce,ee){const we="object"==typeof ee&&ee||{};we.name=we.name||"string"==typeof ee&&ee||"[DEFAULT]";const he=J.Z.apps.filter(Le=>Le&&Le.name===we.name)[0]||ce.runOutsideAngular(()=>J.Z.initializeApp(Z,we));try{JSON.stringify(Z)!==JSON.stringify(he.options)&&B("error",`${he.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Le){}return new Ae(he)}const B=(Z,...ce)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Z](...ce)},K={provide:Ae,useFactory:P,deps:[Ee,_.R0b,[new _.FiY,se]]};let X=(()=>{class Z{constructor(ee){J.Z.registerVersion("angularfire",j.q4.full,"core"),J.Z.registerVersion("angularfire",j.q4.full,"app-compat"),J.Z.registerVersion("angular",_.q4F.full,ee.toString())}static initializeApp(ee,_e){return{ngModule:Z,providers:[{provide:Ee,useValue:ee},{provide:se,useValue:_e}]}}}return Z.\u0275fac=function(ee){return new(ee||Z)(_.LFG(_.Lbi))},Z.\u0275mod=_.oAB({type:Z}),Z.\u0275inj=_.cJS({providers:[K]}),Z})()},2993:(Je,Te,k)=>{"use strict";k.d(Te,{q4:()=>ce,iC:()=>oe,HU:()=>me,cc:()=>we});var _=k(4693);(0,k(5452).registerVersion)("firebase","9.1.0","app");var fe=k(7771),de=k(3637),Ae=k(7393);function Ee(){}var se=k(9105);class B{constructor(Re,Ue,Ke){this.nextOrObserver=Re,this.error=Ue,this.complete=Ke}call(Re,Ue){return Ue.subscribe(new K(Re,this.nextOrObserver,this.error,this.complete))}}class K extends Ae.L{constructor(Re,Ue,Ke,ht){super(Re),this._tapNext=Ee,this._tapError=Ee,this._tapComplete=Ee,this._tapError=Ke||Ee,this._tapComplete=ht||Ee,(0,se.m)(Ue)?(this._context=this,this._tapNext=Ue):Ue&&(this._context=Ue,this._tapNext=Ue.next||Ee,this._tapError=Ue.error||Ee,this._tapComplete=Ue.complete||Ee)}_next(Re){try{this._tapNext.call(this._context,Re)}catch(Ue){return void this.destination.error(Ue)}this.destination.next(Re)}_error(Re){try{this._tapError.call(this._context,Re)}catch(Ue){return void this.destination.error(Ue)}this.destination.error(Re)}_complete(){try{this._tapComplete.call(this._context)}catch(Re){return void this.destination.error(Re)}return this.destination.complete()}}var X=k(3101),Z=k(309);Je=k.hmd(Je);const ce=new _.GfV("7.0.4"),ee=!!Je.hot,_e=(Ce,...Re)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[Ce](...Re)};function we(Ce,Re,Ue,Ke,ht){const[,en,qt]=globalThis.\u0275AngularfireInstanceCache.find(Pt=>Pt[0]===Ce)||[];if(en)return function(Ce,Re){try{return Ce.toString()===Re.toString()}catch(Ue){return Ce===Re}}(ht,qt)||(_e("error",`${Re} was already initialized on the ${Ue} Firebase App with different settings.${ee?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ht,was:qt})),en;{const Pt=Ke();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Pt,ht]),Pt}}function _t(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class ke{constructor(Re,Ue=fe.N){this.zone=Re,this.delegate=Ue}now(){return this.delegate.now()}schedule(Re,Ue,Ke){const ht=this.zone;return this.delegate.schedule(function(qt){ht.runGuarded(()=>{Re.apply(this,[qt])})},Ue,Ke)}}class Dt{constructor(Re){this.zone=Re,this.task=null}call(Re,Ue){const Ke=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_t,{},_t,_t)),Ue.pipe((Ce={next:Ke,complete:Ke,error:Ke},function(ht){return ht.lift(new B(Ce,void 0,void 0))})).subscribe(Re).add(Ke);var Ce}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let me=(()=>{class Ce{constructor(Ue){this.ngZone=Ue,this.outsideAngular=Ue.runOutsideAngular(()=>new ke(Zone.current)),this.insideAngular=Ue.run(()=>new ke(Zone.current,de.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Ce.\u0275fac=function(Ue){return new(Ue||Ce)(_.LFG(_.R0b))},Ce.\u0275prov=_.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})();function Y(){const Ce=globalThis.\u0275AngularFireScheduler;if(!Ce)throw new Error("AngularFireModule has not been provided");return Ce}function oe(Ce){return Y(),function(Ce){return function(Ue){return(Ue=Ue.lift(new Dt(Ce.ngZone))).pipe((0,X.R)(Ce.outsideAngular),(0,Z.QV)(Ce.insideAngular))}}(Y())(Ce)}},4486:(Je,Te,k)=>{"use strict";k.d(Te,{Z:()=>ce});var _=k(3854),J=k(6034),j=k(5452),ge=k(5601);class fe{constructor(_e,we){this._delegate=_e,this.firebase=we,(0,j._addComponent)(_e,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(_e,we=j._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const he=this._delegate.container.getProvider(_e);return!he.isInitialized()&&"EXPLICIT"===(null===(xe=he.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&he.initialize(),he.getImmediate({identifier:we})}_removeServiceInstance(_e,we=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(we)}_addComponent(_e){(0,j._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,j._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function se(){const ee=function(ee){const _e={},we={__esModule:!0,initializeApp:function(Dt,me={}){const Y=j.initializeApp(Dt,me);if((0,_.r3)(_e,Y.name))return _e[Y.name];const ae=new ee(Y,we);return _e[Y.name]=ae,ae},app:he,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function(Dt){const me=Dt.name,Y=me.replace("-compat","");if(j._registerComponent(Dt)&&"PUBLIC"===Dt.type){const ae=(ue=he())=>{if("function"!=typeof ue[Y])throw Ae.create("invalid-app-argument",{appName:me});return ue[Y]()};void 0!==Dt.serviceProps&&(0,_.ZB)(ae,Dt.serviceProps),we[Y]=ae,ee.prototype[Y]=function(...ue){return this._getService.bind(this,me).apply(this,Dt.multipleInstances?ue:[])}}return"PUBLIC"===Dt.type?we[Y]:null},removeApp:function(Dt){delete _e[Dt]},useAsService:function(Dt,me){return"serverAuth"===me?null:me},modularAPIs:j}};function he(Dt){if(!(0,_.r3)(_e,Dt=Dt||j._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:Dt});return _e[Dt]}return we.default=we,Object.defineProperty(we,"apps",{get:function(){return Object.keys(_e).map(Dt=>_e[Dt])}}),he.App=ee,we}(fe);return ee.INTERNAL=Object.assign(Object.assign({},ee.INTERNAL),{createFirebaseNamespace:se,extendNamespace:function(we){(0,_.ZB)(ee,we)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),ee}(),B=new ge.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ee=self.firebase.SDK_VERSION;ee&&ee.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ce=P;(0,j.registerVersion)("@firebase/app-compat","0.1.2",undefined)},5452:(Je,Te,k)=>{"use strict";k.r(Te),k.d(Te,{FirebaseError:()=>ge.ZR,SDK_VERSION:()=>ei,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Ke,_addOrOverwriteComponent:()=>ht,_apps:()=>Re,_clearComponents:()=>Tt,_components:()=>Ue,_getProvider:()=>qt,_registerComponent:()=>en,_removeServiceInstance:()=>Pt,deleteApp:()=>Gs,getApp:()=>xt,getApps:()=>mc,initializeApp:()=>In,onLog:()=>sr,registerVersion:()=>tn,setLogLevel:()=>or});var _=k(8239),J=k(6034),j=k(5601),ge=k(3854);class fe{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(jt=>{if(function(ot){const nt=ot.getComponent();return"VERSION"===(null==nt?void 0:nt.type)}(jt)){const Wt=jt.getImmediate();return`${Wt.library}/${Wt.version}`}return null}).filter(jt=>jt).join(" ")}}const Ae="@firebase/app",se=new j.Yd("@firebase/app"),Gt="[DEFAULT]",Ce={[Ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Re=new Map,Ue=new Map;function Ke(ot,nt){try{ot.container.addComponent(nt)}catch(jt){se.debug(`Component ${nt.name} failed to register with FirebaseApp ${ot.name}`,jt)}}function ht(ot,nt){ot.container.addOrOverwriteComponent(nt)}function en(ot){const nt=ot.name;if(Ue.has(nt))return se.debug(`There were multiple attempts to register component ${nt}.`),!1;Ue.set(nt,ot);for(const jt of Re.values())Ke(jt,ot);return!0}function qt(ot,nt){return ot.container.getProvider(nt)}function Pt(ot,nt,jt=Gt){qt(ot,nt).clearInstance(jt)}function Tt(){Ue.clear()}const Mi=new ge.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class $s{constructor(nt,jt,Wt){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},jt),this._name=jt.name,this._automaticDataCollectionEnabled=jt.automaticDataCollectionEnabled,this._container=Wt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}const ei="9.1.0";function In(ot,nt={}){"object"!=typeof nt&&(nt={name:nt});const jt=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},nt),Wt=jt.name;if("string"!=typeof Wt||!Wt)throw Mi.create("bad-app-name",{appName:String(Wt)});const Dn=Re.get(Wt);if(Dn){if((0,ge.vZ)(ot,Dn.options)&&(0,ge.vZ)(jt,Dn.config))return Dn;throw Mi.create("duplicate-app",{appName:Wt})}const St=new J.H0(Wt);for(const it of Ue.values())St.addComponent(it);const Ge=new $s(ot,jt,St);return Re.set(Wt,Ge),Ge}function xt(ot=Gt){const nt=Re.get(ot);if(!nt)throw Mi.create("no-app",{appName:ot});return nt}function mc(){return Array.from(Re.values())}function Gs(ot){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,_.Z)(function*(ot){const nt=ot.name;Re.has(nt)&&(Re.delete(nt),yield Promise.all(ot.container.getProviders().map(jt=>jt.delete())),ot.isDeleted=!0)})).apply(this,arguments)}function tn(ot,nt,jt){var Wt;let Dn=null!==(Wt=Ce[ot])&&void 0!==Wt?Wt:ot;jt&&(Dn+=`-${jt}`);const St=Dn.match(/\s|\//),Ge=nt.match(/\s|\//);if(St||Ge){const it=[`Unable to register library "${Dn}" with version "${nt}":`];return St&&it.push(`library name "${Dn}" contains illegal characters (whitespace or "/")`),St&&Ge&&it.push("and"),Ge&&it.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void se.warn(it.join(" "))}en(new J.wA(`${Dn}-version`,()=>({library:Dn,version:nt}),"VERSION"))}function sr(ot,nt){if(null!==ot&&"function"!=typeof ot)throw Mi.create("invalid-log-argument");(0,j.Am)(ot,nt)}function or(ot){(0,j.Ub)(ot)}en(new J.wA("platform-logger",nt=>new fe(nt),"PRIVATE")),tn(Ae,"0.7.1",undefined),tn("fire-js","")},6034:(Je,Te,k)=>{"use strict";k.d(Te,{wA:()=>j,H0:()=>Ee});var _=k(4762),J=k(3854),j=function(){function se(P,B,K){this.name=P,this.instanceFactory=B,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return se.prototype.setInstantiationMode=function(P){return this.instantiationMode=P,this},se.prototype.setMultipleInstances=function(P){return this.multipleInstances=P,this},se.prototype.setServiceProps=function(P){return this.serviceProps=P,this},se.prototype.setInstanceCreatedCallback=function(P){return this.onInstanceCreated=P,this},se}(),ge="[DEFAULT]",fe=function(){function se(P,B){this.name=P,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return se.prototype.get=function(P){var B=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(B)){var K=new J.BH;if(this.instancesDeferred.set(B,K),this.isInitialized(B)||this.shouldAutoInitialize())try{var X=this.getOrInitializeService({instanceIdentifier:B});X&&K.resolve(X)}catch(Z){}}return this.instancesDeferred.get(B).promise},se.prototype.getImmediate=function(P){var B,K=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),X=null!==(B=null==P?void 0:P.optional)&&void 0!==B&&B;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(X)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(Z){if(X)return null;throw Z}},se.prototype.getComponent=function(){return this.component},se.prototype.setComponent=function(P){var B,K;if(P.name!==this.name)throw Error("Mismatching Component "+P.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=P,this.shouldAutoInitialize()){if(function(se){return"EAGER"===se.instantiationMode}(P))try{this.getOrInitializeService({instanceIdentifier:ge})}catch(he){}try{for(var X=(0,_.XA)(this.instancesDeferred.entries()),Z=X.next();!Z.done;Z=X.next()){var ce=(0,_.CR)(Z.value,2),_e=ce[1],we=this.normalizeInstanceIdentifier(ce[0]);try{var xe=this.getOrInitializeService({instanceIdentifier:we});_e.resolve(xe)}catch(he){}}}catch(he){B={error:he}}finally{try{Z&&!Z.done&&(K=X.return)&&K.call(X)}finally{if(B)throw B.error}}}},se.prototype.clearInstance=function(P){void 0===P&&(P=ge),this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)},se.prototype.delete=function(){return(0,_.mG)(this,void 0,void 0,function(){var P;return(0,_.Jh)(this,function(B){switch(B.label){case 0:return P=Array.from(this.instances.values()),[4,Promise.all((0,_.ev)((0,_.ev)([],(0,_.CR)(P.filter(function(K){return"INTERNAL"in K}).map(function(K){return K.INTERNAL.delete()}))),(0,_.CR)(P.filter(function(K){return"_delete"in K}).map(function(K){return K._delete()}))))];case 1:return B.sent(),[2]}})})},se.prototype.isComponentSet=function(){return null!=this.component},se.prototype.isInitialized=function(P){return void 0===P&&(P=ge),this.instances.has(P)},se.prototype.getOptions=function(P){return void 0===P&&(P=ge),this.instancesOptions.get(P)||{}},se.prototype.initialize=function(P){var B,K;void 0===P&&(P={});var X=P.options,Z=void 0===X?{}:X,ce=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(ce))throw Error(this.name+"("+ce+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var ee=this.getOrInitializeService({instanceIdentifier:ce,options:Z});try{for(var _e=(0,_.XA)(this.instancesDeferred.entries()),we=_e.next();!we.done;we=_e.next()){var xe=(0,_.CR)(we.value,2),Le=xe[1];ce===this.normalizeInstanceIdentifier(xe[0])&&Le.resolve(ee)}}catch(_t){B={error:_t}}finally{try{we&&!we.done&&(K=_e.return)&&K.call(_e)}finally{if(B)throw B.error}}return ee},se.prototype.onInit=function(P,B){var K,X=this.normalizeInstanceIdentifier(B),Z=null!==(K=this.onInitCallbacks.get(X))&&void 0!==K?K:new Set;Z.add(P),this.onInitCallbacks.set(X,Z);var ce=this.instances.get(X);return ce&&P(ce,X),function(){Z.delete(P)}},se.prototype.invokeOnInitCallbacks=function(P,B){var K,X,Z=this.onInitCallbacks.get(B);if(Z)try{for(var ce=(0,_.XA)(Z),ee=ce.next();!ee.done;ee=ce.next()){var _e=ee.value;try{_e(P,B)}catch(we){}}}catch(we){K={error:we}}finally{try{ee&&!ee.done&&(X=ce.return)&&X.call(ce)}finally{if(K)throw K.error}}},se.prototype.getOrInitializeService=function(P){var B=P.instanceIdentifier,K=P.options,X=void 0===K?{}:K,Z=this.instances.get(B);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:de(B),options:X}),this.instances.set(B,Z),this.instancesOptions.set(B,X),this.invokeOnInitCallbacks(Z,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Z)}catch(ce){}return Z||null},se.prototype.normalizeInstanceIdentifier=function(P){return void 0===P&&(P=ge),this.component?this.component.multipleInstances?P:ge:P},se.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},se}();function de(se){return se===ge?void 0:se}var Ee=function(){function se(P){this.name=P,this.providers=new Map}return se.prototype.addComponent=function(P){var B=this.getProvider(P.name);if(B.isComponentSet())throw new Error("Component "+P.name+" has already been registered with "+this.name);B.setComponent(P)},se.prototype.addOrOverwriteComponent=function(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)},se.prototype.getProvider=function(P){if(this.providers.has(P))return this.providers.get(P);var B=new fe(P,this);return this.providers.set(P,B),B},se.prototype.getProviders=function(){return Array.from(this.providers.values())},se}()},5601:(Je,Te,k)=>{"use strict";k.d(Te,{in:()=>J,Yd:()=>Ae,Ub:()=>Ee,Am:()=>se});const _=[];var J=(()=>{return(P=J||(J={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",J;var P})();const j={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ge=J.INFO,fe={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},de=(P,B,...K)=>{if(B<P.logLevel)return;const X=(new Date).toISOString(),Z=fe[B];if(!Z)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Z](`[${X}]  ${P.name}:`,...K)};class Ae{constructor(B){this.name=B,this._logLevel=ge,this._logHandler=de,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?j[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function Ee(P){_.forEach(B=>{B.setLogLevel(P)})}function se(P,B){for(const K of _){let X=null;B&&B.level&&(X=j[B.level]),K.userLogHandler=null===P?null:(Z,ce,...ee)=>{const _e=ee.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(xe){return null}}).filter(we=>we).join(" ");ce>=(null!=X?X:Z.logLevel)&&P({level:J[ce].toLowerCase(),message:_e,args:ee,type:Z.name})}}}},3854:(Je,Te,k)=>{"use strict";k.d(Te,{BH:()=>X,LL:()=>oe,ZR:()=>ve,tV:()=>se,r3:()=>qt,Sg:()=>Z,ne:()=>Gs,vZ:()=>Mi,ZB:()=>B,pd:()=>xt,m9:()=>Uo,z$:()=>ce,jU:()=>we,ru:()=>xe,d:()=>Le,xb:()=>Tt,w1:()=>$e,hl:()=>me,uI:()=>ee,UG:()=>_e,b$:()=>he,G6:()=>Dt,Mn:()=>_t,xO:()=>ei,zd:()=>In});const ge=function(U){const V=[];let $=0;for(let ye=0;ye<U.length;ye++){let W=U.charCodeAt(ye);W<128?V[$++]=W:W<2048?(V[$++]=W>>6|192,V[$++]=63&W|128):55296==(64512&W)&&ye+1<U.length&&56320==(64512&U.charCodeAt(ye+1))?(W=65536+((1023&W)<<10)+(1023&U.charCodeAt(++ye)),V[$++]=W>>18|240,V[$++]=W>>12&63|128,V[$++]=W>>6&63|128,V[$++]=63&W|128):(V[$++]=W>>12|224,V[$++]=W>>6&63|128,V[$++]=63&W|128)}return V},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,V){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let W=0;W<U.length;W+=3){const We=U[W],lt=W+1<U.length,Vt=lt?U[W+1]:0,cn=W+2<U.length,ft=cn?U[W+2]:0;let on=(15&Vt)<<2|ft>>6,vt=63&ft;cn||(vt=64,lt||(on=64)),ye.push($[We>>2],$[(3&We)<<4|Vt>>4],$[on],$[vt])}return ye.join("")},encodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(U):this.encodeByteArray(ge(U),V)},decodeString(U,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(U):function(U){const V=[];let $=0,ye=0;for(;$<U.length;){const W=U[$++];if(W<128)V[ye++]=String.fromCharCode(W);else if(W>191&&W<224){const We=U[$++];V[ye++]=String.fromCharCode((31&W)<<6|63&We)}else if(W>239&&W<365){const cn=((7&W)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;V[ye++]=String.fromCharCode(55296+(cn>>10)),V[ye++]=String.fromCharCode(56320+(1023&cn))}else{const We=U[$++],lt=U[$++];V[ye++]=String.fromCharCode((15&W)<<12|(63&We)<<6|63&lt)}}return V.join("")}(this.decodeStringToByteArray(U,V))},decodeStringToByteArray(U,V){this.init_();const $=V?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let W=0;W<U.length;){const We=$[U.charAt(W++)],Vt=W<U.length?$[U.charAt(W)]:0;++W;const ft=W<U.length?$[U.charAt(W)]:64;++W;const It=W<U.length?$[U.charAt(W)]:64;if(++W,null==We||null==Vt||null==ft||null==It)throw Error();ye.push(We<<2|Vt>>4),64!==ft&&(ye.push(Vt<<4&240|ft>>2),64!==It&&ye.push(ft<<6&192|It))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},Ee=function(U){return function(U){const V=ge(U);return de.encodeByteArray(V,!0)}(U).replace(/\./g,"")},se=function(U){try{return de.decodeString(U,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function B(U,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return V}for(const $ in V)!V.hasOwnProperty($)||!K($)||(U[$]=B(U[$],V[$]));return U}function K(U){return"__proto__"!==U}class X{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,$)=>{this.resolve=V,this.reject=$})}wrapCallback(V){return($,ye)=>{$?this.reject($):this.resolve(ye),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V($):V($,ye))}}}function Z(U,V){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=V||"demo-project",W=U.iat||0,We=U.sub||U.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const lt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:W,exp:W+3600,auth_time:W,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},U);return[Ee(JSON.stringify({alg:"none",type:"JWT"})),Ee(JSON.stringify(lt)),""].join(".")}function ce(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ee(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ce())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function we(){return"object"==typeof self&&self.self===self}function xe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function he(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return ce().indexOf("Electron/")>=0}function $e(){const U=ce();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function _t(){return ce().indexOf("MSAppHost/")>=0}function Dt(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}class ve extends Error{constructor(V,$,ye){super($),this.code=V,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(V,$,ye){this.service=V,this.serviceName=$,this.errors=ye}create(V,...$){const ye=$[0]||{},W=`${this.service}/${V}`,We=this.errors[V],lt=We?function(U,V){return U.replace(At,($,ye)=>{const W=V[ye];return null!=W?String(W):`<${ye}?>`})}(We,ye):"Error";return new ve(W,`${this.serviceName}: ${lt} (${W}).`,ye)}}const At=/\{\$([^}]+)}/g;function qt(U,V){return Object.prototype.hasOwnProperty.call(U,V)}function Tt(U){for(const V in U)if(Object.prototype.hasOwnProperty.call(U,V))return!1;return!0}function Mi(U,V){if(U===V)return!0;const $=Object.keys(U),ye=Object.keys(V);for(const W of $){if(!ye.includes(W))return!1;const We=U[W],lt=V[W];if($s(We)&&$s(lt)){if(!Mi(We,lt))return!1}else if(We!==lt)return!1}for(const W of ye)if(!$.includes(W))return!1;return!0}function $s(U){return null!==U&&"object"==typeof U}function ei(U){const V=[];for(const[$,ye]of Object.entries(U))Array.isArray(ye)?ye.forEach(W=>{V.push(encodeURIComponent($)+"="+encodeURIComponent(W))}):V.push(encodeURIComponent($)+"="+encodeURIComponent(ye));return V.length?"&"+V.join("&"):""}function In(U){const V={};return U.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[W,We]=ye.split("=");V[decodeURIComponent(W)]=decodeURIComponent(We)}}),V}function xt(U){const V=U.indexOf("?");if(!V)return"";const $=U.indexOf("#",V);return U.substring(V,$>0?$:void 0)}function Gs(U,V){const $=new Vo(U,V);return $.subscribe.bind($)}class Vo{constructor(V,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{V(this)}).catch(ye=>{this.error(ye)})}next(V){this.forEachObserver($=>{$.next(V)})}error(V){this.forEachObserver($=>{$.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,$,ye){let W;if(void 0===V&&void 0===$&&void 0===ye)throw new Error("Missing Observer.");W=function(U,V){if("object"!=typeof U||null===U)return!1;for(const $ of["next","error","complete"])if($ in U&&"function"==typeof U[$])return!0;return!1}(V)?V:{next:V,error:$,complete:ye},void 0===W.next&&(W.next=or),void 0===W.error&&(W.error=or),void 0===W.complete&&(W.complete=or);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(lt){}}),this.observers.push(W),We}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,V)}sendOne(V,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{$(this.observers[V])}catch(ye){"undefined"!=typeof console&&console.error&&console.error(ye)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function or(){}function Uo(U){return U&&U._delegate?U._delegate:U}},7841:(Je,Te,k)=>{"use strict";k.d(Te,{Z:()=>_.Z});var _=k(4486);_.Z.registerVersion("firebase","9.1.0","app-compat")},670:(Je,Te,k)=>{"use strict";k.r(Te);var _=k(8239),J=k(4486),j=k(3854),ge=k(5452),fe=k(4762),de=k(5601),Ae=k(6034);const ce=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ee=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new de.Yd("@firebase/auth");function he(w,...f){xe.logLevel<=de.in.ERROR&&xe.error(`Auth (${ge.SDK_VERSION}): ${w}`,...f)}function Le(w,...f){throw Dt(w,...f)}function $e(w,...f){return Dt(w,...f)}function _t(w,f,m){const I=Object.assign(Object.assign({},ee()),{[f]:m});return new j.LL("auth","Firebase",I).create(f,{appName:w.name})}function ke(w,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Le(w,"argument-error"),_t(w,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dt(w,...f){if("string"!=typeof w){const m=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(m,...I)}return _e.create(w,...f)}function me(w,f,...m){if(!w)throw Dt(f,...m)}function Y(w){const f="INTERNAL ASSERTION FAILED: "+w;throw he(f),new Error(f)}function ae(w,f){w||Y(f)}const ue=new Map;function q(w){ae(w instanceof Function,"Expected a class definition");let f=ue.get(w);return f?(ae(f instanceof w,"Instance stored in cache mismatched with class"),f):(f=new w,ue.set(w,f),f)}function ut(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function At(){return"http:"===Gt()||"https:"===Gt()}function Gt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ue{constructor(f,m){this.shortDelay=f,this.longDelay=m,ae(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(At()||(0,j.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ke(w,f){ae(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class ht{static initialize(f,m,I){this.fetchImpl=f,m&&(this.headersImpl=m),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Y("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Y("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Y("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const en={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qt=new Ue(3e4,6e4);function Pt(w,f){return w.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:w.tenantId}):f}function Tt(w,f,m,I){return hs.apply(this,arguments)}function hs(){return(hs=(0,_.Z)(function*(w,f,m,I,S={}){return Mi(w,S,()=>{let M={},G={};I&&("GET"===f?G=I:M={body:JSON.stringify(I)});const le=(0,j.xO)(Object.assign({key:w.config.apiKey},G)).slice(1),Oe=new(ht.headers());return Oe.set("Content-Type","application/json"),Oe.set("X-Client-Version",w._getSdkClientVersion()),w.languageCode&&Oe.set("X-Firebase-Locale",w.languageCode),ht.fetch()(xt(w,w.config.apiHost,m,le),Object.assign({method:f,headers:Oe,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function Mi(w,f,m){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(w,f,m){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},en),f);try{const S=new mc(w),M=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const G=yield M.json();if("needConfirmation"in G)throw Gs(w,"account-exists-with-different-credential",G);if(M.ok&&!("errorMessage"in G))return G;{const le=M.ok?G.errorMessage:G.error.message,[Oe,Pe]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw Gs(w,"credential-already-in-use",G);if("EMAIL_EXISTS"===Oe)throw Gs(w,"email-already-in-use",G);const et=I[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Pe)throw _t(w,et,Pe);Le(w,et)}}catch(S){if(S instanceof j.ZR)throw S;Le(w,"network-request-failed")}})).apply(this,arguments)}function ei(w,f,m,I){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(w,f,m,I,S={}){const M=yield Tt(w,f,m,I,S);return"mfaPendingCredential"in M&&Le(w,"multi-factor-auth-required",{serverResponse:M}),M})).apply(this,arguments)}function xt(w,f,m,I){const S=`${f}${m}?${I}`;return w.config.emulator?Ke(w.config,S):`${w.config.apiScheme}://${S}`}class mc{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,I)=>{this.timer=setTimeout(()=>I($e(this.auth,"timeout")),qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gs(w,f,m){const I={appName:w.name};m.email&&(I.email=m.email),m.phoneNumber&&(I.phoneNumber=m.phoneNumber);const S=$e(w,f,I);return S.customData._tokenResponse=m,S}function tn(){return(tn=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function sr(w,f){return or.apply(this,arguments)}function or(){return(or=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gr(w,f){return ot.apply(this,arguments)}function ot(){return(ot=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function nt(w){if(w)try{const f=new Date(Number(w));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function Dn(){return(Dn=(0,_.Z)(function*(w,f=!1){const m=(0,j.m9)(w),I=yield m.getIdToken(f),S=Ge(I);me(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,G=null==M?void 0:M.sign_in_provider;return{claims:S,token:I,authTime:nt(St(S.auth_time)),issuedAtTime:nt(St(S.iat)),expirationTime:nt(St(S.exp)),signInProvider:G||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function St(w){return 1e3*Number(w)}function Ge(w){const[f,m,I]=w.split(".");if(void 0===f||void 0===m||void 0===I)return he("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,j.tV)(m);return S?JSON.parse(S):(he("Failed to decode base64 JWT payload"),null)}catch(S){return he("Caught error parsing JWT payload as JSON",S),null}}function qe(w,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(w,f,m=!1){if(m)return f;try{return yield f}catch(I){throw I instanceof j.ZR&&gi(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function gi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class qr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),I)}iteration(){var f=this;return(0,_.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class ar{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Uo(w){return U.apply(this,arguments)}function U(){return(U=(0,_.Z)(function*(w){var f;const m=w.auth,I=yield w.getIdToken(),S=yield qe(w,Gr(m,{idToken:I}));me(null==S?void 0:S.users.length,m,"internal-error");const M=S.users[0];w._notifyReloadListener(M);const G=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?W(M.providerUserInfo):[],le=ye(w.providerData,G),et=!!w.isAnonymous&&!(w.email&&M.passwordHash||(null==le?void 0:le.length)),je={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:le,metadata:new ar(M.createdAt,M.lastLoginAt),isAnonymous:et};Object.assign(w,je)})).apply(this,arguments)}function $(){return($=(0,_.Z)(function*(w){const f=(0,j.m9)(w);yield Uo(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function ye(w,f){return[...w.filter(I=>!f.some(S=>S.providerId===I.providerId)),...f]}function W(w){return w.map(f=>{var{providerId:m}=f,I=(0,fe._T)(f,["providerId"]);return{providerId:m,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function lt(){return(lt=(0,_.Z)(function*(w,f){const m=yield Mi(w,{},()=>{const I=(0,j.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:S,apiKey:M}=w.config,G=xt(w,S,"/v1/token",`key=${M}`);return ht.fetch()(G,{method:"POST",headers:{"X-Client-Version":w._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:I})});return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){me(f.idToken,"internal-error"),me(void 0!==f.idToken,"internal-error"),me(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(w){const f=Ge(w);return me(f,"internal-error"),me(void 0!==f.exp,"internal-error"),me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var I=this;return(0,_.Z)(function*(){return me(!I.accessToken||I.refreshToken,f,"user-token-expired"),m||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var I=this;return(0,_.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:G}=yield function(w,f){return lt.apply(this,arguments)}(f,m);I.updateTokensAndExpiration(S,M,Number(G))})()}updateTokensAndExpiration(f,m,I){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,m){const{refreshToken:I,accessToken:S,expirationTime:M}=m,G=new Vt;return I&&(me("string"==typeof I,"internal-error",{appName:f}),G.refreshToken=I),S&&(me("string"==typeof S,"internal-error",{appName:f}),G.accessToken=S),M&&(me("number"==typeof M,"internal-error",{appName:f}),G.expirationTime=M),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Vt,this.toJSON())}_performRefresh(){return Y("not implemented")}}function cn(w,f){me("string"==typeof w||void 0===w,"internal-error",{appName:f})}class ft{constructor(f){var{uid:m,auth:I,stsTokenManager:S}=f,M=(0,fe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new qr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.metadata=new ar(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,_.Z)(function*(){const I=yield qe(m,m.stsTokenManager.getToken(m.auth,f));return me(I,m.auth,"internal-error"),m.accessToken!==I&&(m.accessToken=I,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),I})()}getIdTokenResult(f){return function(w){return Dn.apply(this,arguments)}(this,f)}reload(){return function(w){return $.apply(this,arguments)}(this)}_assign(f){this!==f&&(me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new ft(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var I=this;return(0,_.Z)(function*(){let S=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),S=!0),m&&(yield Uo(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,_.Z)(function*(){const m=yield f.getIdToken();return yield qe(f,function(w,f){return tn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var I,S,M,G,le,Oe,Pe,et;const je=null!==(I=m.displayName)&&void 0!==I?I:void 0,Bt=null!==(S=m.email)&&void 0!==S?S:void 0,Kn=null!==(M=m.phoneNumber)&&void 0!==M?M:void 0,yl=null!==(G=m.photoURL)&&void 0!==G?G:void 0,bh=null!==(le=m.tenantId)&&void 0!==le?le:void 0,_l=null!==(Oe=m._redirectEventId)&&void 0!==Oe?Oe:void 0,kp=null!==(Pe=m.createdAt)&&void 0!==Pe?Pe:void 0,Th=null!==(et=m.lastLoginAt)&&void 0!==et?et:void 0,{uid:Ms,emailVerified:Yn,isAnonymous:vl,providerData:Vn,stsTokenManager:El}=m;me(Ms&&El,f,"internal-error");const Qn=Vt.fromJSON(this.name,El);me("string"==typeof Ms,f,"internal-error"),cn(je,f.name),cn(Bt,f.name),me("boolean"==typeof Yn,f,"internal-error"),me("boolean"==typeof vl,f,"internal-error"),cn(Kn,f.name),cn(yl,f.name),cn(bh,f.name),cn(_l,f.name),cn(kp,f.name),cn(Th,f.name);const Ah=new ft({uid:Ms,auth:f,email:Bt,emailVerified:Yn,displayName:je,isAnonymous:vl,photoURL:yl,phoneNumber:Kn,tenantId:bh,stsTokenManager:Qn,createdAt:kp,lastLoginAt:Th});return Vn&&Array.isArray(Vn)&&(Ah.providerData=Vn.map(Sh=>Object.assign({},Sh))),_l&&(Ah._redirectEventId=_l),Ah}static _fromIdTokenResponse(f,m,I=!1){return(0,_.Z)(function*(){const S=new Vt;S.updateFromServerResponse(m);const M=new ft({uid:m.localId,auth:f,stsTokenManager:S,isAnonymous:I});return yield Uo(M),M})()}}const It=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,I){var S=this;return(0,_.Z)(function*(){S.storage[m]=I})()}_get(m){var I=this;return(0,_.Z)(function*(){const S=I.storage[m];return void 0===S?null:S})()}_remove(m){var I=this;return(0,_.Z)(function*(){delete I.storage[m]})()}_addListener(m,I){}_removeListener(m,I){}}return w.type="NONE",w})();function on(w,f,m){return`firebase:${w}:${f}:${m}`}class vt{constructor(f,m,I){this.persistence=f,this.auth=m,this.userKey=I;const{config:S,name:M}=this.auth;this.fullUserKey=on(this.userKey,S.apiKey,M),this.fullPersistenceKey=on("persistence",S.apiKey,M),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?ft._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,_.Z)(function*(){if(m.persistence===f)return;const I=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,I?m.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,I="authUser"){return(0,_.Z)(function*(){if(!m.length)return new vt(q(It),f,I);const S=(yield Promise.all(m.map(function(){var Pe=(0,_.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Pe.apply(this,arguments)}}()))).filter(Pe=>Pe);let M=S[0]||q(It);const G=on(I,f.config.apiKey,f.name);let le=null;for(const Pe of m)try{const et=yield Pe._get(G);if(et){const je=ft._fromJSON(f,et);Pe!==M&&(le=je),M=Pe;break}}catch(et){}const Oe=S.filter(Pe=>Pe._shouldAllowMigration);return M._shouldAllowMigration&&Oe.length?(M=Oe[0],le&&(yield M._set(G,le.toJSON())),yield Promise.all(m.map(function(){var Pe=(0,_.Z)(function*(et){if(et!==M)try{yield et._remove(G)}catch(je){}});return function(et){return Pe.apply(this,arguments)}}())),new vt(M,f,I)):new vt(M,f,I)})()}}function qs(w){const f=w.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(bd(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(yc(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ws(f))return"Blackberry";if($a(f))return"Webos";if(Ha(f))return"Safari";if((f.includes("chrome/")||Cd(f))&&!f.includes("edge/"))return"Chrome";if(Rr(f))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function yc(w=(0,j.z$)()){return/firefox\//i.test(w)}function Ha(w=(0,j.z$)()){const f=w.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Cd(w=(0,j.z$)()){return/crios\//i.test(w)}function bd(w=(0,j.z$)()){return/iemobile/i.test(w)}function Rr(w=(0,j.z$)()){return/android/i.test(w)}function Ws(w=(0,j.z$)()){return/blackberry/i.test(w)}function $a(w=(0,j.z$)()){return/webos/i.test(w)}function Wr(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)}function vc(w=(0,j.z$)()){return Wr(w)||Rr(w)||$a(w)||Ws(w)||/windows phone/i.test(w)||bd(w)}function Ga(w,f=[]){let m;switch(w){case"Browser":m=qs((0,j.z$)());break;case"Worker":m=`${qs((0,j.z$)())}-${w}`;break;default:m=w}const I=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ge.SDK_VERSION}/${I}`}class Xf{constructor(f,m){this.app=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ad(this),this.idTokenSubscription=new Ad(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(f,m){var I=this;return m&&(this._popupRedirectResolver=q(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var S;I._deleted||(I.persistenceManager=yield vt.create(I,f),!I._deleted&&((null===(S=I._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)&&(yield I._popupRedirectResolver._initialize(I)),yield I.initializeCurrentUser(m),!I._deleted&&(I._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,_.Z)(function*(){var I;let S=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const M=null===(I=m.redirectUser)||void 0===I?void 0:I._redirectEventId,G=null==S?void 0:S._redirectEventId,le=yield m.tryRedirectSignIn(f);(!M||M===G)&&(null==le?void 0:le.user)&&(S=le.user)}return S?S._redirectEventId?(me(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===S._redirectEventId?m.directlySetCurrentUser(S):m.reloadAndSetCurrentUserOrClear(S)):m.reloadAndSetCurrentUserOrClear(S):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,_.Z)(function*(){let I=null;try{I=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(S){yield m._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,_.Z)(function*(){try{yield Uo(f)}catch(I){if("auth/network-request-failed"!==I.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,_.Z)(function*(){const I=f?(0,j.m9)(f):null;return I&&me(I.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(I&&I._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,_.Z)(function*(){if(!m._deleted)return f&&me(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,_.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(q(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new j.LL("auth","Firebase",f())}onAuthStateChanged(f,m,I){return this.registerStateListener(this.authStateSubscription,f,m,I)}onIdTokenChanged(f,m,I){return this.registerStateListener(this.idTokenSubscription,f,m,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var I=this;return(0,_.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(m);return null===f?S.removeCurrentUser():S.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const I=f&&q(f)||m._popupRedirectResolver;me(I,m,"argument-error"),m.redirectPersistenceManager=yield vt.create(m,[q(I._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,_.Z)(function*(){var I,S;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(I=m._currentUser)||void 0===I?void 0:I._redirectEventId)===f?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,_.Z)(function*(){if(f===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,I,S){if(this._deleted)return()=>{};const M="function"==typeof m?m:m.next.bind(m),G=this._isInitialized?Promise.resolve():this._initializationPromise;return me(G,this,"internal-error"),G.then(()=>M(this.currentUser)),"function"==typeof m?f.addObserver(m,I,S):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ga(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Cn(w){return(0,j.m9)(w)}class Ad{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ri(w){const f=w.indexOf(":");return f<0?"":w.substr(0,f+1)}function Or(w){if(!w)return null;const f=Number(w);return isNaN(f)?null:f}class mn{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return Y("not implemented")}_getIdTokenResponse(f){return Y("not implemented")}_linkToIdToken(f,m){return Y("not implemented")}_getReauthenticationResolver(f){return Y("not implemented")}}function Ve(w,f){return yt.apply(this,arguments)}function yt(){return(yt=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:resetPassword",Pt(w,f))})).apply(this,arguments)}function zt(w,f){return ur.apply(this,arguments)}function ur(){return(ur=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Zs(w,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:update",Pt(w,f))})).apply(this,arguments)}function Zt(){return(Zt=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithPassword",Pt(w,f))})).apply(this,arguments)}function Oi(w,f){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:sendOobCode",Pt(w,f))})).apply(this,arguments)}function gt(w,f){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,_.Z)(function*(w,f){return Oi(w,f)})).apply(this,arguments)}function Ys(w,f){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(w,f){return Oi(w,f)})).apply(this,arguments)}function ps(w,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(w,f){return Oi(w,f)})).apply(this,arguments)}function qa(w,f){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.Z)(function*(w,f){return Oi(w,f)})).apply(this,arguments)}function Ft(){return(Ft=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithEmailLink",Pt(w,f))})).apply(this,arguments)}function Nd(){return(Nd=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithEmailLink",Pt(w,f))})).apply(this,arguments)}class Xs extends mn{constructor(f,m,I,S=null){super("password",I),this._email=f,this._password=m,this._tenantId=S}static _fromEmailAndPassword(f,m){return new Xs(f,m,"password")}static _fromEmailAndCode(f,m,I=null){return new Xs(f,m,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,_.Z)(function*(){switch(m.signInMethod){case"password":return function(w,f){return Zt.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(w,f){return Ft.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Le(f,"internal-error")}})()}_linkToIdToken(f,m){var I=this;return(0,_.Z)(function*(){switch(I.signInMethod){case"password":return zt(f,{idToken:m,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function(w,f){return Nd.apply(this,arguments)}(f,{idToken:m,email:I._email,oobCode:I._password});default:Le(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ln(w,f){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithIdp",Pt(w,f))})).apply(this,arguments)}class Wn extends mn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Wn(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Le("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:S}=m,M=(0,fe._T)(m,["providerId","signInMethod"]);if(!I||!S)return null;const G=new Wn(I,S);return Object.assign(G,M),G}_getIdTokenResponse(f){return ln(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,ln(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ln(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,j.xO)(m)}return f}}function zn(w,f){return xd.apply(this,arguments)}function xd(){return(xd=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:sendVerificationCode",Pt(w,f))})).apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithPhoneNumber",Pt(w,f))})).apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(w,f){const m=yield ei(w,"POST","/v1/accounts:signInWithPhoneNumber",Pt(w,f));if(m.temporaryProof)throw Gs(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const wc={USER_NOT_FOUND:"user-not-found"};function Rd(){return(Rd=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithPhoneNumber",Pt(w,Object.assign(Object.assign({},f),{operation:"REAUTH"})),wc)})).apply(this,arguments)}class Ho extends mn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ho({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ho({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function(w,f){return Pr.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function(w,f){return jo.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(w,f){return Rd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:I,verificationCode:S}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:I,code:S}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:M}=f;return I||m||S||M?new Ho({verificationId:m,verificationCode:I,phoneNumber:S,temporaryProof:M}):null}}class Ic{constructor(f){var m,I,S,M,G,le;const Oe=(0,j.zd)((0,j.pd)(f)),Pe=null!==(m=Oe.apiKey)&&void 0!==m?m:null,et=null!==(I=Oe.oobCode)&&void 0!==I?I:null,je=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Oe.mode)&&void 0!==S?S:null);me(Pe&&et&&je,"argument-error"),this.apiKey=Pe,this.operation=je,this.code=et,this.continueUrl=null!==(M=Oe.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(G=Oe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(le=Oe.tenantId)&&void 0!==le?le:null}static parseLink(f){const m=function(w){const f=(0,j.zd)((0,j.pd)(w)).link,m=f?(0,j.zd)((0,j.pd)(f)).deep_link_id:null,I=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(I?(0,j.zd)((0,j.pd)(I)).link:null)||I||m||f||w}(f);try{return new Ic(m)}catch(I){return null}}}let ep=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,I){return Xs._fromEmailAndPassword(m,I)}static credentialWithLink(m,I){const S=Ic.parseLink(I);return me(S,"argument-error"),Xs._fromEmailAndCode(m,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class to{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Wa extends to{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class no extends Wa{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return me("providerId"in m&&"signInMethod"in m,"argument-error"),Wn._fromParams(m)}credential(f){return this._credential(f)}_credential(f){return me(f.idToken||f.accessToken,"argument-error"),Wn._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return no.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return no.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:M,nonce:G,providerId:le}=f;if(!I&&!S&&!m&&!M||!le)return null;try{return new no(le)._credential({idToken:m,accessToken:I,rawNonce:G,pendingToken:M})}catch(Oe){return null}}}let Od=(()=>{class w extends Wa{constructor(){super("facebook.com")}static credential(m){return Wn._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Am=(()=>{class w extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(m,I){return Wn._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:I,oauthAccessToken:S}=m;if(!I&&!S)return null;try{return w.credential(I,S)}catch(M){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),TE=(()=>{class w extends Wa{constructor(){super("github.com")}static credential(m){return Wn._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(I){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class $o extends mn{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ln(f,this.buildRequest())}_linkToIdToken(f,m){const I=this.buildRequest();return I.idToken=m,ln(f,I)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ln(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:S,pendingToken:M}=m;return I&&S&&M&&I===S?new $o(I,M):null}static _create(f,m){return new $o(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Sm=(()=>{class w extends Wa{constructor(){super("twitter.com")}static credential(m,I){return Wn._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:I})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=m;if(!I||!S)return null;try{return w.credential(I,S)}catch(M){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function np(w,f){return Go.apply(this,arguments)}function Go(){return(Go=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signUp",Pt(w,f))})).apply(this,arguments)}class yi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,I,S=!1){return(0,_.Z)(function*(){const M=yield ft._fromIdTokenResponse(f,I,S),G=NE(I);return new yi({user:M,providerId:G,_tokenResponse:I,operationType:m})})()}static _forOperation(f,m,I){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const S=NE(I);return new yi({user:f,providerId:S,_tokenResponse:I,operationType:m})})()}}function NE(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function gs(){return(gs=(0,_.Z)(function*(w){var f;const m=Cn(w);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new yi({user:m.currentUser,providerId:null,operationType:"signIn"});const I=yield np(m,{returnSecureToken:!0}),S=yield yi._fromIdTokenResponse(m,"signIn",I,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Dc extends j.ZR{constructor(f,m,I,S){var M;super(m.code,m.message),this.operationType=I,this.user=S,this.name="FirebaseError",Object.setPrototypeOf(this,Dc.prototype),this.appName=f.name,this.code=m.code,this.tenantId=null!==(M=f.tenantId)&&void 0!==M?M:void 0,this.serverResponse=m.customData.serverResponse}static _fromErrorAndOperation(f,m,I,S){return new Dc(f,m,I,S)}}function za(w,f,m,I){return("reauthenticate"===f?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Dc._fromErrorAndOperation(w,M,f,I):M})}function Pd(w){return new Set(w.map(({providerId:f})=>f).filter(f=>!!f))}function kd(){return(kd=(0,_.Z)(function*(w,f){const m=(0,j.m9)(w);yield ms(!0,m,f);const{providerUserInfo:I}=yield sr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),S=Pd(I||[]);return m.providerData=m.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Cc(w,f){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.Z)(function*(w,f,m=!1){const I=yield qe(w,f._linkToIdToken(w.auth,yield w.getIdToken()),m);return yi._forOperation(w,"link",I)})).apply(this,arguments)}function ms(w,f,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,_.Z)(function*(w,f,m){yield Uo(f);const S=!1===w?"provider-already-linked":"no-such-provider";me(Pd(f.providerData).has(m)===w,f.auth,S)})).apply(this,arguments)}function Ka(w,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,_.Z)(function*(w,f,m=!1){const{auth:I}=w,S="reauthenticate";try{const M=yield qe(w,za(I,S,f,w),m);me(M.idToken,I,"internal-error");const G=Ge(M.idToken);me(G,I,"internal-error");const{sub:le}=G;return me(w.uid===le,I,"user-mismatch"),yi._forOperation(w,S,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Le(I,"user-mismatch"),M}})).apply(this,arguments)}function bc(w,f){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,_.Z)(function*(w,f,m=!1){const I="signIn",S=yield za(w,I,f),M=yield yi._fromIdTokenResponse(w,I,S);return m||(yield w._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Wo(w,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,_.Z)(function*(w,f){return bc(Cn(w),f)})).apply(this,arguments)}function Ac(w,f){return rp.apply(this,arguments)}function rp(){return(rp=(0,_.Z)(function*(w,f){const m=(0,j.m9)(w);return yield ms(!1,m,f.providerId),Cc(m,f)})).apply(this,arguments)}function nn(w,f){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,_.Z)(function*(w,f){return Ka((0,j.m9)(w),f)})).apply(this,arguments)}function xm(w,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,_.Z)(function*(w,f){return ei(w,"POST","/v1/accounts:signInWithCustomToken",Pt(w,f))})).apply(this,arguments)}function Fd(){return(Fd=(0,_.Z)(function*(w,f){const m=Cn(w),I=yield xm(m,{token:f,returnSecureToken:!0}),S=yield yi._fromIdTokenResponse(m,"signIn",I);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ld{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Zo._fromServerResponse(f,m):Le(f,"internal-error")}}class Zo extends Ld{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Zo(m)}}function Zn(w,f,m){var I;me((null===(I=m.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),me(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(me(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),f.iosBundleId=m.iOS.bundleId),m.android&&(me(m.android.packageName.length>0,w,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Qa(){return(Qa=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w),S={requestType:"PASSWORD_RESET",email:f};m&&Zn(I,S,m),yield Ys(I,S)})).apply(this,arguments)}function Ir(){return(Ir=(0,_.Z)(function*(w,f,m){yield Ve((0,j.m9)(w),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Pi(){return(Pi=(0,_.Z)(function*(w,f){yield Zs((0,j.m9)(w),{oobCode:f})})).apply(this,arguments)}function Ja(w,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,_.Z)(function*(w,f){const m=(0,j.m9)(w),I=yield Ve(m,{oobCode:f}),S=I.requestType;switch(me(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(I.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(I.mfaInfo,m,"internal-error");default:me(I.email,m,"internal-error")}let M=null;return I.mfaInfo&&(M=Ld._fromServerResponse(Cn(m),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(w,f){const{data:m}=yield Ja((0,j.m9)(w),f);return m.email})).apply(this,arguments)}function Sc(){return(Sc=(0,_.Z)(function*(w,f,m){const I=Cn(w),S=yield np(I,{returnSecureToken:!0,email:f,password:m}),M=yield yi._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(M.user),M})).apply(this,arguments)}function Nc(){return(Nc=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w),S={requestType:"EMAIL_SIGNIN",email:f};me(m.handleCodeInApp,I,"argument-error"),m&&Zn(I,S,m),yield ps(I,S)})).apply(this,arguments)}function Bd(){return(Bd=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w),S=ep.credentialWithLink(f,m||ut());return me(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Wo(I,S)})).apply(this,arguments)}function De(w,f){return Et.apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:createAuthUri",Pt(w,f))})).apply(this,arguments)}function _n(){return(_n=(0,_.Z)(function*(w,f){const I={identifier:f,continueUri:At()?ut():"http://localhost"},{signinMethods:S}=yield De((0,j.m9)(w),I);return S||[]})).apply(this,arguments)}function Fi(){return(Fi=(0,_.Z)(function*(w,f){const m=(0,j.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};f&&Zn(m.auth,S,f);const{email:M}=yield gt(m.auth,S);M!==w.email&&(yield w.reload())})).apply(this,arguments)}function Xa(){return(Xa=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:f};m&&Zn(I.auth,M,m);const{email:G}=yield qa(I.auth,M);G!==w.email&&(yield w.reload())})).apply(this,arguments)}function Mc(w,f){return ap.apply(this,arguments)}function ap(){return(ap=(0,_.Z)(function*(w,f){return Tt(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(w,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const I=(0,j.m9)(w),M={idToken:yield I.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},G=yield qe(I,Mc(I.auth,M));I.displayName=G.displayName||null,I.photoURL=G.photoUrl||null;const le=I.providerData.find(({providerId:Oe})=>"password"===Oe);le&&(le.displayName=I.displayName,le.photoURL=I.photoURL),yield I._updateTokensIfNecessary(G)})).apply(this,arguments)}function Kr(w,f,m){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,_.Z)(function*(w,f,m){const{auth:I}=w,M={idToken:yield w.getIdToken(),returnSecureToken:!0};f&&(M.email=f),m&&(M.password=m);const G=yield qe(w,zt(I,M));yield w._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Dr{constructor(f,m,I={}){this.isNewUser=f,this.providerId=m,this.profile=I}}class Pm extends Dr{constructor(f,m,I,S){super(f,m,I),this.username=S}}class up extends Dr{constructor(f,m){super(f,"facebook.com",m)}}class ME extends Pm{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class cp extends Dr{constructor(f,m){super(f,"google.com",m)}}class Hd extends Pm{constructor(f,m,I){super(f,"twitter.com",m,I)}}function $d(w){const{user:f,_tokenResponse:m}=w;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(w){var f,m;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},M=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&(null==w?void 0:w.idToken)){const G=null===(m=null===(f=Ge(w.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(G)return new Dr(M,"anonymous"!==G&&"custom"!==G?G:null)}if(!I)return null;switch(I){case"facebook.com":return new up(M,S);case"github.com":return new ME(M,S);case"google.com":return new cp(M,S);case"twitter.com":return new Hd(M,S,w.screenName||null);case"custom":case"anonymous":return new Dr(M,null);default:return new Dr(M,I,S)}}(m)}class _i{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new _i("enroll",f)}static _fromMfaPendingCredential(f){return new _i("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,I;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return _i._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(I=f.multiFactorSession)||void 0===I?void 0:I.idToken)return _i._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Jo{constructor(f,m,I){this.session=f,this.hints=m,this.signInResolver=I}static _fromError(f,m){const I=Cn(f),S=(m.serverResponse.mfaInfo||[]).map(G=>Ld._fromServerResponse(I,G));me(m.serverResponse.mfaPendingCredential,I,"internal-error");const M=_i._fromMfaPendingCredential(m.serverResponse.mfaPendingCredential);return new Jo(M,S,function(){var G=(0,_.Z)(function*(le){const Oe=yield le._process(I,M);delete m.serverResponse.mfaInfo,delete m.serverResponse.mfaPendingCredential;const Pe=Object.assign(Object.assign({},m.serverResponse),{idToken:Oe.idToken,refreshToken:Oe.refreshToken});switch(m.operationType){case"signIn":const et=yield yi._fromIdTokenResponse(I,m.operationType,Pe);return yield I._updateCurrentUser(et.user),et;case"reauthenticate":return me(m.user,I,"internal-error"),yi._forOperation(m.user,m.operationType,Pe);default:Le(I,"internal-error")}});return function(le){return G.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,_.Z)(function*(){return m.signInResolver(f)})()}}function Vm(w,f){return Tt(w,"POST","/v2/accounts/mfaEnrollment:start",Pt(w,f))}class Kt{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(I=>Ld._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new Kt(f)}getSession(){var f=this;return(0,_.Z)(function*(){return _i._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var I=this;return(0,_.Z)(function*(){const S=f,M=yield I.getSession(),G=yield qe(I.user,S._process(I.user.auth,M,m));return yield I.user._updateTokensIfNecessary(G),I.user.reload()})()}unenroll(f){var m=this;return(0,_.Z)(function*(){const I="string"==typeof f?f:f.uid,S=yield m.user.getIdToken(),M=yield qe(m.user,function(w,f){return Tt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Pt(w,f))}(m.user.auth,{idToken:S,mfaEnrollmentId:I}));m.enrolledFactors=m.enrolledFactors.filter(({uid:G})=>G!==I),yield m.user._updateTokensIfNecessary(M);try{yield m.user.reload()}catch(G){if("auth/user-token-expired"!==G.code)throw G}})()}}const qd=new WeakMap,Wd="__sak";class hp{constructor(f,m){this.storage=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}}const ro=(()=>{class w extends hp{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(m,I)=>this.onStorageEvent(m,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,j.z$)();return Ha(w)||Wr(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=vc(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),M=this.localCache[I];S!==M&&m(I,M,S)}}onStorageEvent(m,I=!1){if(!m.key)return void this.forAllChangedKeys((le,Oe,Pe)=>{this.notifyListeners(le,Pe)});const S=m.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(S);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!I)return}const M=()=>{const le=this.storage.getItem(S);!I&&this.localCache[S]===le||this.notifyListeners(S,le)},G=this.storage.getItem(S);(0,j.w1)()&&10===document.documentMode&&G!==m.newValue&&m.newValue!==m.oldValue?setTimeout(M,10):M()}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const M of Array.from(S))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,I){var S=()=>super._set,M=this;return(0,_.Z)(function*(){yield S().call(M,m,I),M.localCache[m]=JSON.stringify(I)})()}_get(m){var I=()=>super._get,S=this;return(0,_.Z)(function*(){const M=yield I().call(S,m);return S.localCache[m]=JSON.stringify(M),M})()}_remove(m){var I=()=>super._remove,S=this;return(0,_.Z)(function*(){yield I().call(S,m),delete S.localCache[m]})()}}return w.type="LOCAL",w})(),_s=(()=>{class w extends hp{constructor(){super(window.sessionStorage,"SESSION")}_addListener(m,I){}_removeListener(m,I){}}return w.type="SESSION",w})();let lr=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const I=this.receivers.find(M=>M.isListeningto(m));if(I)return I;const S=new w(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var I=this;return(0,_.Z)(function*(){const S=m,{eventId:M,eventType:G,data:le}=S.data,Oe=I.handlersMap[G];if(!(null==Oe?void 0:Oe.size))return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:G});const Pe=Array.from(Oe).map(function(){var je=(0,_.Z)(function*(Bt){return Bt(S.origin,le)});return function(Bt){return je.apply(this,arguments)}}()),et=yield function(w){return Promise.all(w.map(function(){var f=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(I){return{fulfilled:!1,reason:I}}});return function(m){return f.apply(this,arguments)}}()))}(Pe);S.ports[0].postMessage({status:"done",eventId:M,eventType:G,response:et})})()}_subscribe(m,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(I)}_unsubscribe(m,I){this.handlersMap[m]&&I&&this.handlersMap[m].delete(I),(!I||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Vi(w="",f=10){let m="";for(let I=0;I<f;I++)m+=Math.floor(10*Math.random());return w+m}class $m{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,I=50){var S=this;return(0,_.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let G,le;return new Promise((Oe,Pe)=>{const et=Vi("",20);M.port1.start();const je=setTimeout(()=>{Pe(new Error("unsupported_event"))},I);le={messageChannel:M,onMessage(Bt){const Kn=Bt;if(Kn.data.eventId===et)switch(Kn.data.status){case"ack":clearTimeout(je),G=setTimeout(()=>{Pe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Oe(Kn.data.response);break;default:clearTimeout(je),clearTimeout(G),Pe(new Error("invalid_response"))}}},S.handlers.add(le),M.port1.addEventListener("message",le.onMessage),S.target.postMessage({eventType:f,eventId:et,data:m},[M.port2])}).finally(()=>{le&&S.removeMessageHandler(le)})})()}}function dn(){return window}function Fc(){return void 0!==dn().WorkerGlobalScope&&"function"==typeof dn().importScripts}function pp(){return(pp=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const eu="firebaseLocalStorageDb",tu="firebaseLocalStorage",Lc="fbase_key";class ea{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Vc(w,f){return w.transaction([tu],f?"readwrite":"readonly").objectStore(tu)}function ta(){const w=indexedDB.open(eu,1);return new Promise((f,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(tu,{keyPath:Lc})}catch(S){m(S)}}),w.addEventListener("success",(0,_.Z)(function*(){const I=w.result;I.objectStoreNames.contains(tu)?f(I):(I.close(),yield function(){const w=indexedDB.deleteDatabase(eu);return new ea(w).toPromise()}(),f(yield ta()))}))})}function vs(w,f,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,_.Z)(function*(w,f,m){const I=Vc(w,!0).put({[Lc]:f,value:m});return new ea(I).toPromise()})).apply(this,arguments)}function gp(){return(gp=(0,_.Z)(function*(w,f){const m=Vc(w,!1).get(f),I=yield new ea(m).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function na(w,f){const m=Vc(w,!0).delete(f);return new ea(m).toPromise()}const Bi=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield ta()),m.db})()}_withRetries(m){var I=this;return(0,_.Z)(function*(){let S=0;for(;;)try{const M=yield I._openDb();return yield m(M)}catch(M){if(S++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return Fc()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=lr._getInstance(Fc()?self:null),m.receiver._subscribe("keyChanged",function(){var I=(0,_.Z)(function*(S,M){return{keyProcessed:(yield m._poll()).includes(M.key)}});return function(S,M){return I.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var I=(0,_.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return I.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var I,S;if(m.activeServiceWorker=yield function(){return pp.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new $m(m.activeServiceWorker);const M=yield m.sender._send("ping",{},800);!M||(null===(I=M[0])||void 0===I?void 0:I.fulfilled)&&(null===(S=M[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var I=this;return(0,_.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:m},I.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield ta();return yield vs(m,Wd,"1"),yield na(m,Wd),!0}catch(m){}return!1})()}_withPendingWrite(m){var I=this;return(0,_.Z)(function*(){I.pendingWrites++;try{yield m()}finally{I.pendingWrites--}})()}_set(m,I){var S=this;return(0,_.Z)(function*(){return S._withPendingWrite((0,_.Z)(function*(){return yield S._withRetries(M=>vs(M,m,I)),S.localCache[m]=I,S.notifyServiceWorker(m)}))})()}_get(m){var I=this;return(0,_.Z)(function*(){const S=yield I._withRetries(M=>function(w,f){return gp.apply(this,arguments)}(M,m));return I.localCache[m]=S,S})()}_remove(m){var I=this;return(0,_.Z)(function*(){return I._withPendingWrite((0,_.Z)(function*(){return yield I._withRetries(S=>na(S,m)),delete I.localCache[m],I.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const I=yield m._withRetries(G=>{const le=Vc(G,!1).getAll();return new ea(le).toPromise()});if(!I)return[];if(0!==m.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:G,value:le}of I)M.add(G),JSON.stringify(m.localCache[G])!==JSON.stringify(le)&&(m.notifyListeners(G,le),S.push(G));for(const G of Object.keys(m.localCache))m.localCache[G]&&!M.has(G)&&(m.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(m,I){this.localCache[m]=I;const S=this.listeners[m];if(S)for(const M of Array.from(S))M(I)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(I)}_removeListener(m,I){this.listeners[m]&&(this.listeners[m].delete(I),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Bc(w,f){return Tt(w,"POST","/v2/accounts/mfaSignIn:start",Pt(w,f))}function ra(){return(ra=(0,_.Z)(function*(w){return(yield Tt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vi(w){return new Promise((f,m)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=f,I.onerror=S=>{const M=$e("internal-error");M.customData=S,m(M)},I.type="text/javascript",I.charset="UTF-8",function(){var w,f;return null!==(f=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==f?f:document}().appendChild(I)})}function Hc(w){return`__${w}${Math.floor(1e6*Math.random())}`}const $c=1e12;class FE{constructor(f){this.auth=f,this.counter=$c,this._widgets=new Map}render(f,m){const I=this.counter;return this._widgets.set(I,new ru(f,this.auth.name,m||{})),this.counter++,I}reset(f){var m;const I=f||$c;null===(m=this._widgets.get(I))||void 0===m||m.delete(),this._widgets.delete(I)}getResponse(f){var m;return(null===(m=this._widgets.get(f||$c))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,_.Z)(function*(){var I;return null===(I=m._widgets.get(f||$c))||void 0===I||I.execute(),""})()}}class ru{constructor(f,m,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof f?document.getElementById(f):f;me(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<50;I++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}();const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gc=Hc("rcb"),Kd=new Ue(3e4,6e4);class so{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dn().grecaptcha}load(f,m=""){return me((w=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(dn().grecaptcha):new Promise((I,S)=>{const M=dn().setTimeout(()=>{S($e(f,"network-request-failed"))},Kd.get());dn()[Gc]=()=>{dn().clearTimeout(M),delete dn()[Gc];const le=dn().grecaptcha;if(!le)return void S($e(f,"internal-error"));const Oe=le.render;le.render=(Pe,et)=>{const je=Oe(Pe,et);return this.counter++,je},this.hostLanguage=m,I(le)},vi(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Gc,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(M),S($e(f,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!dn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qc{load(f){return(0,_.Z)(function*(){return new FE(f)})()}clearedOneInstance(){}}const ri="recaptcha",oo={theme:"light",type:"image"};class ao{constructor(f,m=Object.assign({},oo),I){this.parameters=m,this.type=ri,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(I),this.isInvisible="invisible"===this.parameters.size,me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof f?document.getElementById(f):f;me(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qc:new so,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(m)||new Promise(M=>{const G=le=>{!le||(f.tokenChangeListeners.delete(G),M(le))};f.tokenChangeListeners.add(G),f.isInvisible&&I.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(I=>I(m)),"function"==typeof f)f(m);else if("string"==typeof f){const I=dn()[f];"function"==typeof I&&I(m)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const I=document.createElement("div");m.appendChild(I),m=I}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){me(At()&&!Fc(),f.auth,"internal-error"),yield function(){let w=null;return new Promise(f=>{"complete"!==document.readyState?(w=()=>f(),window.addEventListener("load",w)):f()}).catch(f=>{throw w&&window.removeEventListener("load",w),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function(w){return ra.apply(this,arguments)}(f.auth);me(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Es{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ho._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Ei(){return(Ei=(0,_.Z)(function*(w,f,m){const I=Cn(w),S=yield iu(I,f,(0,j.m9)(m));return new Es(S,M=>Wo(I,M))})).apply(this,arguments)}function Wc(){return(Wc=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w);yield ms(!1,I,"phone");const S=yield iu(I.auth,f,(0,j.m9)(m));return new Es(S,M=>Ac(I,M))})).apply(this,arguments)}function zc(){return(zc=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w),S=yield iu(I.auth,f,(0,j.m9)(m));return new Es(S,M=>nn(I,M))})).apply(this,arguments)}function iu(w,f,m){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.Z)(function*(w,f,m){var I;const S=yield m.verify();try{let M;if(me("string"==typeof S,w,"argument-error"),me(m.type===ri,w,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const G=M.session;if("phoneNumber"in M)return me("enroll"===G.type,w,"internal-error"),(yield Vm(w,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{me("signin"===G.type,w,"internal-error");const le=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return me(le,w,"missing-multi-factor-info"),(yield Bc(w,{mfaPendingCredential:G.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield zn(w,{phoneNumber:M.phoneNumber,recaptchaToken:S});return G}}finally{m._reset()}})).apply(this,arguments)}function sa(){return(sa=(0,_.Z)(function*(w,f){yield Cc((0,j.m9)(w),f)})).apply(this,arguments)}let co=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=Cn(m)}verifyPhoneNumber(m,I){return iu(this.auth,m,(0,j.m9)(I))}static credential(m,I){return Ho._fromVerification(m,I)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:I,temporaryProof:S}=m;return I&&S?Ho._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function lo(w,f){return f?q(f):(me(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Xd extends mn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ln(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ln(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ln(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function zm(w){return bc(w.auth,new Xd(w),w.bypassAuthState)}function br(w){const{auth:f,user:m}=w;return me(m,f,"internal-error"),Ka(m,new Xd(w),w.bypassAuthState)}function ho(w){return eh.apply(this,arguments)}function eh(){return(eh=(0,_.Z)(function*(w){const{auth:f,user:m}=w;return me(m,f,"internal-error"),Cc(m,new Xd(w),w.bypassAuthState)})).apply(this,arguments)}class LE{constructor(f,m,I,S,M=!1){this.auth=f,this.resolver=I,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,_.Z)(function*(I,S){f.pendingPromise={resolve:I,reject:S};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(I,S){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,_.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:M,tenantId:G,error:le,type:Oe}=f;if(le)return void m.reject(le);const Pe={auth:m.auth,requestUri:I,sessionId:S,tenantId:G||void 0,postBody:M||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Oe)(Pe))}catch(et){m.reject(et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return zm;case"linkViaPopup":case"linkViaRedirect":return ho;case"reauthViaPopup":case"reauthViaRedirect":return br;default:Le(this.auth,"internal-error")}}resolve(f){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bD=new Ue(2e3,1e4);function Zc(){return(Zc=(0,_.Z)(function*(w,f,m){const I=Cn(w);ke(w,f,to);const S=lo(I,m);return new th(I,"signInViaPopup",f,S).executeNotNull()})).apply(this,arguments)}function ws(){return(ws=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w);ke(I.auth,f,to);const S=lo(I.auth,m);return new th(I.auth,"reauthViaPopup",f,S,I).executeNotNull()})).apply(this,arguments)}function Yc(){return(Yc=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w);ke(I.auth,f,to);const S=lo(I.auth,m);return new th(I.auth,"linkViaPopup",f,S,I).executeNotNull()})).apply(this,arguments)}let th=(()=>{class w extends LE{constructor(m,I,S,M,G){super(m,I,M,G),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const I=yield m.execute();return me(I,m.auth,"internal-error"),I})()}onExecution(){var m=this;return(0,_.Z)(function*(){ae(1===m.filter.length,"Popup operations only handle one event");const I=Vi();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],I),m.authWindow.associatedEvent=I,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject($e(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject($e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var I,S;this.pollId=(null===(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject($e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,bD.get())};m()}}return w.currentPopupAction=null,w})();const si=new Map;class nh extends LE{constructor(f,m,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,_.Z)(function*(){let I=si.get(m.auth._key());if(!I){try{const M=(yield function(w,f){return Hi.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;I=()=>Promise.resolve(M)}catch(S){I=()=>Promise.reject(S)}si.set(m.auth._key(),I)}return I()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,I=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(I,f);if("unknown"!==f.type){if(f.eventId){const S=yield I.auth._redirectUserForId(f.eventId);if(S)return I.user=S,m().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Hi(){return(Hi=(0,_.Z)(function*(w,f){const m=Jc(f),I="true"===(yield aa(w)._get(m));return yield aa(w)._remove(m),I})).apply(this,arguments)}function rh(w,f){return ih.apply(this,arguments)}function ih(){return(ih=(0,_.Z)(function*(w,f){return aa(w)._set(Jc(f),"true")})).apply(this,arguments)}function aa(w){return q(w._redirectPersistence)}function Jc(w){return on("pendingRedirect",w.config.apiKey,w.name)}function po(){return(po=(0,_.Z)(function*(w,f,m){const I=Cn(w);ke(w,f,to);const S=lo(I,m);return yield rh(S,I),S._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function Xc(){return(Xc=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w);ke(I.auth,f,to);const S=lo(I.auth,m);yield rh(S,I.auth);const M=yield ou(I);return S._openRedirect(I.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function el(){return(el=(0,_.Z)(function*(w,f,m){const I=(0,j.m9)(w);ke(I.auth,f,to);const S=lo(I.auth,m);yield ms(!1,I,f.providerId),yield rh(S,I.auth);const M=yield ou(I);return S._openRedirect(I.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function _p(){return(_p=(0,_.Z)(function*(w,f){return yield Cn(w)._initializationPromise,Is(w,f,!1)})).apply(this,arguments)}function Is(w,f){return go.apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(w,f,m=!1){const I=Cn(w),S=lo(I,f),G=yield new nh(I,S,m).execute();return G&&!m&&(delete G.user._redirectEventId,yield I._persistUserIfCurrent(G.user),yield I._setRedirectUser(null,f)),G})).apply(this,arguments)}function ou(w){return sh.apply(this,arguments)}function sh(){return(sh=(0,_.Z)(function*(w){const f=Vi(`${w.uid}:::`);return w._redirectEventId=f,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),f})).apply(this,arguments)}class yo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(m=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ca(w);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var I;if(f.error&&!ca(f)){const S=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";m.onError($e(this.auth,S))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const I=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ua(f))}saveEventToCache(f){this.cachedEventUids.add(ua(f)),this.lastProcessedEventTime=Date.now()}}function ua(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(f=>f).join("-")}function ca({type:w,error:f}){return"unknown"===w&&"auth/no-auth-event"===(null==f?void 0:f.code)}function _o(w){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,_.Z)(function*(w,f={}){return Tt(w,"GET","/v1/projects",f)})).apply(this,arguments)}const UE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,au=/^https?/;function wi(){return(wi=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:f}=yield _o(w);for(const m of f)try{if(vp(m))return}catch(I){}Le(w,"unauthorized-domain")})).apply(this,arguments)}function vp(w){const f=ut(),{protocol:m,hostname:I}=new URL(f);if(w.startsWith("chrome-extension://")){const G=new URL(w);return""===G.hostname&&""===I?"chrome-extension:"===m&&w.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&G.hostname===I}if(!au.test(m))return!1;if(UE.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const an=new Ue(3e4,6e4);function uu(){const w=dn().___jsl;if(null==w?void 0:w.H)for(const f of Object.keys(w.H))if(w.H[f].r=w.H[f].r||[],w.H[f].L=w.H[f].L||[],w.H[f].r=[...w.H[f].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let Yr=null;function cu(w){return Yr=Yr||function(w){return new Promise((f,m)=>{var I,S,M;function G(){uu(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{uu(),m($e(w,"network-request-failed"))},timeout:an.get()})}if(null===(S=null===(I=dn().gapi)||void 0===I?void 0:I.iframes)||void 0===S?void 0:S.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=dn().gapi)||void 0===M?void 0:M.load)){const le=Hc("iframefcb");return dn()[le]=()=>{gapi.load?G():m($e(w,"network-request-failed"))},vi(`https://apis.google.com/js/api.js?onload=${le}`)}G()}}).catch(f=>{throw Yr=null,f})}(w),Yr}const Ym=new Ue(5e3,15e3),nl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},ha=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ds(w){const f=w.config;me(f.authDomain,w,"auth-domain-config-required");const m=f.emulator?Ke(f,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:f.apiKey,appName:w.name,v:ge.SDK_VERSION},S=ha.get(w.config.apiHost);S&&(I.eid=S);const M=w._getFrameworks();return M.length&&(I.fw=M.join(",")),`${m}?${(0,j.xO)(I).slice(1)}`}function Cs(){return(Cs=(0,_.Z)(function*(w){const f=yield cu(w),m=dn().gapi;return me(m,w,"internal-error"),f.open({where:document.body,url:Ds(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nl,dontclear:!0},I=>new Promise(function(){var S=(0,_.Z)(function*(M,G){yield I.restyle({setHideOnLeave:!1});const le=$e(w,"network-request-failed"),Oe=dn().setTimeout(()=>{G(le)},Ym.get());function Pe(){dn().clearTimeout(Oe),M(I)}I.ping(Pe).then(Pe,()=>{G(le)})});return function(M,G){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const BE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uh{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function wp(w,f,m,I,S,M){me(w.config.authDomain,w,"auth-domain-config-required"),me(w.config.apiKey,w,"invalid-api-key");const G={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:I,v:ge.SDK_VERSION,eventId:S};if(f instanceof to){f.setDefaultLanguage(w.languageCode),G.providerId=f.providerId||"",(0,j.xb)(f.getCustomParameters())||(G.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Oe,Pe]of Object.entries(M||{}))G[Oe]=Pe}if(f instanceof Wa){const Oe=f.getScopes().filter(Pe=>""!==Pe);Oe.length>0&&(G.scopes=Oe.join(","))}w.tenantId&&(G.tid=w.tenantId);const le=G;for(const Oe of Object.keys(le))void 0===le[Oe]&&delete le[Oe];return`${function({config:w}){return w.emulator?Ke(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(le).slice(1)}`}const al="webStorageSupport";class ul extends class{constructor(f){this.factorId=f}_process(f,m,I){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,I);case"signin":return this._finalizeSignIn(f,m.credential);default:return Y("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ul(f)}_finalizeEnroll(f,m,I){return function(w,f){return Tt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Pt(w,f))}(f,{idToken:m,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function(w,f){return Tt(w,"POST","/v2/accounts/mfaSignIn:finalize",Pt(w,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fa=(()=>{class w{constructor(){}static assertion(m){return ul._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var w;class ty{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(I=>{var S;f((null===(S=I)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function qi(){return window}function ll(){return(ll=(0,_.Z)(function*(w,f,m){var I;const{BuildInfo:S}=qi();ae(f.sessionId,"AuthEvent did not contain a session ID");const M=yield Wi(f.sessionId),G={};return Wr()?G.ibi=S.packageName:Rr()?G.apn=S.packageName:Le(w,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=M,wp(w,m,f.type,void 0,null!==(I=f.eventId)&&void 0!==I?I:void 0,G)})).apply(this,arguments)}function fh(){return(fh=(0,_.Z)(function*(w){const{BuildInfo:f}=qi(),m={};Wr()?m.iosBundleId=f.packageName:Rr()?m.androidPackageName=f.packageName:Le(w,"operation-not-supported-in-this-environment"),yield _o(w,m)})).apply(this,arguments)}function hu(){return(hu=(0,_.Z)(function*(w,f,m){const{cordova:I}=qi();let S=()=>{};try{yield new Promise((M,G)=>{let le=null;function Oe(){var je;M();const Bt=null===(je=I.plugins.browsertab)||void 0===je?void 0:je.close;"function"==typeof Bt&&Bt(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Pe(){le||(le=window.setTimeout(()=>{G($e(w,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===(null==document?void 0:document.visibilityState)&&Pe()}f.addPassiveListener(Oe),document.addEventListener("resume",Pe,!1),Rr()&&document.addEventListener("visibilitychange",et,!1),S=()=>{f.removePassiveListener(Oe),document.removeEventListener("resume",Pe,!1),document.removeEventListener("visibilitychange",et,!1),le&&window.clearTimeout(le)}})}finally{S()}})).apply(this,arguments)}function Wi(w){return zi.apply(this,arguments)}function zi(){return(zi=(0,_.Z)(function*(w){const f=Dp(w),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Dp(w){if(ae(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const f=new ArrayBuffer(w.length),m=new Uint8Array(f);for(let I=0;I<w.length;I++)m[I]=w.charCodeAt(I);return m}w="Browser",(0,ge._registerComponent)(new Ae.wA("auth",(f,{options:m})=>{const I=f.getProvider("app").getImmediate(),{apiKey:S,authDomain:M}=I.options;return(G=>{me(S&&!S.includes(":"),"invalid-api-key",{appName:G.name}),me(!(null==M?void 0:M.includes(":")),"argument-error",{appName:G.name});const le={apiKey:S,authDomain:M,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ga(w)},Oe=new Xf(G,le);return function(w,f){const m=(null==f?void 0:f.persistence)||[],I=(Array.isArray(m)?m:[m]).map(q);(null==f?void 0:f.errorMap)&&w._updateErrorMap(f.errorMap),w._initializeWithPersistence(I,null==f?void 0:f.popupRedirectResolver)}(Oe,m),Oe})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,I)=>{f.getProvider("auth-internal").initialize()})),(0,ge._registerComponent)(new Ae.wA("auth-internal",f=>{const m=Cn(f.getProvider("auth").getImmediate());return new ty(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ge.registerVersion)("@firebase/auth","0.18.0",void 0);class ph extends yo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function gh(w){return dl.apply(this,arguments)}function dl(){return(dl=(0,_.Z)(function*(w){const f=yield hl()._get(mh(w));return f&&(yield hl()._remove(mh(w))),f})).apply(this,arguments)}function sy(){const w=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const I=Math.floor(Math.random()*f.length);w.push(f.charAt(I))}return w.join("")}function hl(){return q(ro)}function mh(w){return on("authEvent",w.config.apiKey,w.name)}function Zi(w){if(!(null==w?void 0:w.includes("?")))return{};const[f,...m]=w.split("?");return(0,j.zd)(m.join("?"))}function pl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:$e("no-auth-event")}}function Sp(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function _h(w=(0,j.z$)()){return!("file:"!==Sp()&&"ionic:"!==Sp()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function uy(){try{const w=self.localStorage,f=Vi();if(w)return w.setItem(f,"1"),w.removeItem(f),!function(w=(0,j.z$)()){return(0,j.w1)()&&11===(null==document?void 0:document.documentMode)||function(w=(0,j.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,j.hl)()}catch(w){return xp()&&(0,j.hl)()}return!1}function xp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vh(){return("http:"===Sp()||"https:"===Sp()||(0,j.ru)()||_h())&&!((0,j.b$)()||(0,j.UG)())&&uy()&&!xp()}function As(){return _h()&&"undefined"!=typeof document}function pa(){return(pa=(0,_.Z)(function*(){return!!As()&&new Promise(w=>{const f=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),w(!0)})})})).apply(this,arguments)}const Tr={LOCAL:"local",NONE:"none",SESSION:"session"},Ss=me,Mp="persistence";function Ki(w){return pu.apply(this,arguments)}function pu(){return(pu=(0,_.Z)(function*(w){yield w._initializationPromise;const f=wh(),m=on(Mp,w.config.apiKey,w.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(m,w._getPersistence())})).apply(this,arguments)}function wh(){return"undefined"!=typeof window?window:null}const Ih=me;class Ns{constructor(){this.browserResolver=q(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_s,this._completeRedirectFn=Is}_openPopup(f,m,I,S){var M=this;return(0,_.Z)(function*(){var G;ae(null===(G=M.eventManagers[f._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const le=wp(f,m,I,ut(),S);return function(w,f,m,I=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-I)/2,0).toString();let le="";const Oe=Object.assign(Object.assign({},BE),{width:I.toString(),height:S.toString(),top:M,left:G}),Pe=(0,j.z$)().toLowerCase();m&&(le=Cd(Pe)?"_blank":m),yc(Pe)&&(f=f||"http://localhost",Oe.scrollbars="yes");const et=Object.entries(Oe).reduce((Bt,[Kn,yl])=>`${Bt}${Kn}=${yl},`,"");if(function(w=(0,j.z$)()){var f;return Wr(w)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Pe)&&"_self"!==le)return function(w,f){const m=document.createElement("a");m.href=w,m.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(I)}(f||"",le),new uh(null);const je=window.open(f||"",le,et);me(je,w,"popup-blocked");try{je.focus()}catch(Bt){}return new uh(je)}(f,le,Vi())})()}_openRedirect(f,m,I,S){var M=this;return(0,_.Z)(function*(){return yield M._originValidation(f),w=wp(f,m,I,ut(),S),dn().location.href=w,new Promise(()=>{});var w})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:S,promise:M}=this.eventManagers[m];return S?Promise.resolve(S):(ae(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(f);return this.eventManagers[m]={promise:I},I}initAndGetManager(f){var m=this;return(0,_.Z)(function*(){const I=yield function(w){return Cs.apply(this,arguments)}(f),S=new yo(f);return I.register("authEvent",M=>(me(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:S},m.iframes[f._key()]=I,S})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(al,{type:al},S=>{var M;const G=null===(M=null==S?void 0:S[0])||void 0===M?void 0:M[al];void 0!==G&&m(!!G),Le(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(w){return wi.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return vc()||Ha()||Wr()}}),this.cordovaResolver=q(class{constructor(){this._redirectPersistence=_s,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Is}_initialize(f){var m=this;return(0,_.Z)(function*(){const I=f._key();let S=m.eventManagers.get(I);return S||(S=new ph(f),m.eventManagers.set(I,S),m.attachCallbackListeners(f,S)),S})()}_openPopup(f){Le(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,I,S){var M=this;return(0,_.Z)(function*(){!function(w){var f,m,I,S,M,G,le,Oe,Pe,et;const je=qi();me("function"==typeof(null===(f=null==je?void 0:je.universalLinks)||void 0===f?void 0:f.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(void 0!==(null===(m=null==je?void 0:je.BuildInfo)||void 0===m?void 0:m.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(M=null===(S=null===(I=null==je?void 0:je.cordova)||void 0===I?void 0:I.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(Oe=null===(le=null===(G=null==je?void 0:je.cordova)||void 0===G?void 0:G.plugins)||void 0===le?void 0:le.browsertab)||void 0===Oe?void 0:Oe.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(et=null===(Pe=null==je?void 0:je.cordova)||void 0===Pe?void 0:Pe.InAppBrowser)||void 0===et?void 0:et.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const G=yield M._initialize(f);yield G.initialized(),G.resetRedirect(),si.clear(),yield M._originValidation(f);const le=function(w,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:sy(),postBody:null,tenantId:w.tenantId,error:$e(w,"no-auth-event")}}(f,I,S);yield function(w,f){return hl()._set(mh(w),f)}(f,le);const Oe=yield function(w,f,m){return ll.apply(this,arguments)}(f,le,m),Pe=yield function(w){const{cordova:f}=qi();return new Promise(m=>{f.plugins.browsertab.isAvailable(I=>{let S=null;I?f.plugins.browsertab.openUrl(w):S=f.InAppBrowser.open(w,function(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),m(S)})})}(Oe);return function(w,f,m){return hu.apply(this,arguments)}(f,G,Pe)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(w){return fh.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:I,handleOpenURL:S,BuildInfo:M}=qi(),G=setTimeout((0,_.Z)(function*(){yield gh(f),m.onEvent(pl())}),500),le=function(){var et=(0,_.Z)(function*(je){clearTimeout(G);const Bt=yield gh(f);let Kn=null;Bt&&(null==je?void 0:je.url)&&(Kn=function(w,f){var m,I;const S=function(w){const f=Zi(w),m=f.link?decodeURIComponent(f.link):void 0,I=Zi(m).link,S=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Zi(S).link||S||I||m||w}(f);if(S.includes("/__/auth/callback")){const M=Zi(S),G=M.firebaseError?function(w){try{return JSON.parse(w)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,le=null===(I=null===(m=null==G?void 0:G.code)||void 0===m?void 0:m.split("auth/"))||void 0===I?void 0:I[1],Oe=le?$e(le):null;return Oe?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:S,postBody:null}}return null}(Bt,je.url)),m.onEvent(Kn||pl())});return function(Bt){return et.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,le);const Oe=S,Pe=`${M.packageName.toLowerCase()}://`;qi().handleOpenURL=function(){var et=(0,_.Z)(function*(je){if(je.toLowerCase().startsWith(Pe)&&le({url:je}),"function"==typeof Oe)try{Oe(je)}catch(Bt){console.error(Bt)}});return function(je){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=_s,this._completeRedirectFn=Is}_initialize(f){var m=this;return(0,_.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,I,S){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,m,I,S)})()}_openRedirect(f,m,I,S){var M=this;return(0,_.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,m,I,S)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return As()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ih(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const m=yield function(){return pa.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Rp(w){return w.unwrap()}function ly(w){return ml(w)}function zE(w,f){var m;const I=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Op(w,function(w,f){var m;const I=(0,j.m9)(w),S=f;return me(f.operationType,I,"argument-error"),me(null===(m=S.serverResponse)||void 0===m?void 0:m.mfaPendingCredential,I,"argument-error"),Jo._fromError(I,S)}(w,f));else if(I){const S=ml(f),M=f;S&&(M.credential=S,M.tenantId=I.tenantId||void 0,M.email=I.email||void 0,M.phoneNumber=I.phoneNumber||void 0)}}function ml(w){const{_tokenResponse:f}=w instanceof j.ZR?w.customData:w;if(!f)return null;if(!(w instanceof j.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return co.credentialFromResult(w);const m=f.providerId;if(!m||"password"===m)return null;let I;switch(m){case"google.com":I=Am;break;case"facebook.com":I=Od;break;case"github.com":I=TE;break;case"twitter.com":I=Sm;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:G,pendingToken:le,nonce:Oe}=f;return M||G||S||le?le?m.startsWith("saml.")?$o._create(m,le):Wn._fromParams({providerId:m,signInMethod:m,pendingToken:le,idToken:S,accessToken:M}):new no(m).credential({idToken:S,accessToken:M,rawNonce:Oe}):null}return w instanceof j.ZR?I.credentialFromError(w):I.credentialFromResult(w)}function Nn(w,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.Z)(function*(w,f){let m;try{m=yield f}catch(M){throw M instanceof j.ZR&&zE(w,M),M}const{operationType:I,user:S}=m;return{operationType:I,credential:ly(m),additionalUserInfo:$d(m),user:ne.getOrCreate(S)}})).apply(this,arguments)}function Fr(w,f){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,_.Z)(function*(w,f){const m=yield f;return{verificationId:m.verificationId,confirm:I=>Nn(w,m.confirm(I))}})).apply(this,arguments)}class Op{constructor(f,m){this.resolver=m,this.auth=function(w){return w.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Nn(Rp(this.auth),this.resolver.resolveSignIn(f))}}class ne{constructor(f){this._delegate=f,this.multiFactor=function(w){const f=(0,j.m9)(w);return qd.has(f)||qd.set(f,Kt._fromUser(f)),qd.get(f)}(f)}static getOrCreate(f){return ne.USER_MAP.has(f)||ne.USER_MAP.set(f,new ne(f)),ne.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,_.Z)(function*(){return Nn(m.auth,Ac(m._delegate,f))})()}linkWithPhoneNumber(f,m){var I=this;return(0,_.Z)(function*(){return Fr(I.auth,function(w,f,m){return Wc.apply(this,arguments)}(I._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,_.Z)(function*(){return Nn(m.auth,function(w,f,m){return Yc.apply(this,arguments)}(m._delegate,f,Ns))})()}linkWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield Ki(Cn(m.auth)),function(w,f,m){return function(w,f,m){return el.apply(this,arguments)}(w,f,m)}(m._delegate,f,Ns)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,_.Z)(function*(){return Nn(m.auth,nn(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Fr(this.auth,function(w,f,m){return zc.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Nn(this.auth,function(w,f,m){return ws.apply(this,arguments)}(this._delegate,f,Ns))}reauthenticateWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield Ki(Cn(m.auth)),function(w,f,m){return function(w,f,m){return Xc.apply(this,arguments)}(w,f,m)}(m._delegate,f,Ns)})()}sendEmailVerification(f){return function(w,f){return Fi.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,_.Z)(function*(){return yield function(w,f){return kd.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function(w,f){return Kr((0,j.m9)(w),f,null)}(this._delegate,f)}updatePassword(f){return function(w,f){return Kr((0,j.m9)(w),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(w,f){return sa.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(w,f){return Yo.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function(w,f,m){return Xa.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ne.USER_MAP=new WeakMap;const ai=me;let gu=(()=>{class w{constructor(m,I){if(this.app=m,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=m.options;ai(S,"invalid-api-key",{appName:m.name});let M=[It];if("undefined"!=typeof window){M=function(w,f){const m=wh();if(!(null==m?void 0:m.sessionStorage))return[];const I=on(Mp,w,f);switch(m.sessionStorage.getItem(I)){case Tr.NONE:return[It];case Tr.LOCAL:return[Bi,_s];case Tr.SESSION:return[_s];default:return[]}}(S,m.name);for(const le of[Bi,ro,_s])M.includes(le)||M.push(le)}ai(S,"invalid-api-key",{appName:m.name});const G="undefined"!=typeof window?Ns:void 0;this._delegate=I.initialize({options:{persistence:M,popupRedirectResolver:G}}),this._delegate._updateErrorMap(ce),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ne.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,I){!function(w,f,m){const I=Cn(w);me(I._canInitEmulator,I,"emulator-config-failed"),me(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const S=!!(null==m?void 0:m.disableWarnings),M=Ri(f),{host:G,port:le}=function(w){const f=Ri(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(f.length));if(!m)return{host:"",port:null};const I=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const M=S[1];return{host:M,port:Or(I.substr(M.length+1))}}{const[M,G]=I.split(":");return{host:M,port:Or(G)}}}(f);I.config.emulator={url:`${M}//${G}${null===le?"":`:${le}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:G,port:le,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),function(w){function f(){const m=document.createElement("p"),I=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!w&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}(S)}(this._delegate,m,I)}applyActionCode(m){return function(w,f){return Pi.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Ja(this._delegate,m)}confirmPasswordReset(m,I){return function(w,f,m){return Ir.apply(this,arguments)}(this._delegate,m,I)}createUserWithEmailAndPassword(m,I){var S=this;return(0,_.Z)(function*(){return Nn(S._delegate,function(w,f,m){return Sc.apply(this,arguments)}(S._delegate,m,I))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(w,f){return _n.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(w,f){const m=Ic.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,_.Z)(function*(){ai(vh(),m._delegate,"operation-not-supported-in-this-environment");const I=yield function(w,f){return _p.apply(this,arguments)}(m._delegate,Ns);return I?Nn(m._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(w,f){Cn(w)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,I,S){const{next:M,error:G,complete:le}=xs(m,I,S);return this._delegate.onAuthStateChanged(M,G,le)}onIdTokenChanged(m,I,S){const{next:M,error:G,complete:le}=xs(m,I,S);return this._delegate.onIdTokenChanged(M,G,le)}sendSignInLinkToEmail(m,I){return function(w,f,m){return Nc.apply(this,arguments)}(this._delegate,m,I)}sendPasswordResetEmail(m,I){return function(w,f,m){return Qa.apply(this,arguments)}(this._delegate,m,I||void 0)}setPersistence(m){var I=this;return(0,_.Z)(function*(){let S;switch(function(w,f){Ss(Object.values(Tr).includes(f),w,"invalid-persistence-type"),(0,j.b$)()?Ss(f!==Tr.SESSION,w,"unsupported-persistence-type"):(0,j.UG)()?Ss(f===Tr.NONE,w,"unsupported-persistence-type"):xp()?Ss(f===Tr.NONE||f===Tr.LOCAL&&(0,j.hl)(),w,"unsupported-persistence-type"):Ss(f===Tr.NONE||uy(),w,"unsupported-persistence-type")}(I._delegate,m),m){case Tr.SESSION:S=_s;break;case Tr.LOCAL:S=(yield q(Bi)._isAvailable())?Bi:ro;break;case Tr.NONE:S=It;break;default:return Le("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Nn(this._delegate,function(w){return gs.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Nn(this._delegate,Wo(this._delegate,m))}signInWithCustomToken(m){return Nn(this._delegate,function(w,f){return Fd.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,I){return Nn(this._delegate,function(w,f,m){return Wo((0,j.m9)(w),ep.credential(f,m))}(this._delegate,m,I))}signInWithEmailLink(m,I){return Nn(this._delegate,function(w,f,m){return Bd.apply(this,arguments)}(this._delegate,m,I))}signInWithPhoneNumber(m,I){return Fr(this._delegate,function(w,f,m){return Ei.apply(this,arguments)}(this._delegate,m,I))}signInWithPopup(m){var I=this;return(0,_.Z)(function*(){return ai(vh(),I._delegate,"operation-not-supported-in-this-environment"),Nn(I._delegate,function(w,f,m){return Zc.apply(this,arguments)}(I._delegate,m,Ns))})()}signInWithRedirect(m){var I=this;return(0,_.Z)(function*(){return ai(vh(),I._delegate,"operation-not-supported-in-this-environment"),yield Ki(I._delegate),function(w,f,m){return function(w,f,m){return po.apply(this,arguments)}(w,f,m)}(I._delegate,m,Ns)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(w,f){return ki.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=Tr,w})();function xs(w,f,m){let I=w;"function"!=typeof w&&({next:I,error:f,complete:m}=w);const S=I;return{next:G=>S(G&&ne.getOrCreate(G)),error:f,complete:m}}class Ct{constructor(){this.providerId="phone",this._delegate=new co(Rp(J.Z.auth()))}static credential(f,m){return co.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}Ct.PHONE_SIGN_IN_METHOD=co.PHONE_SIGN_IN_METHOD,Ct.PROVIDER_ID=co.PROVIDER_ID;const Pp=me;class Yi{constructor(f,m,I=J.Z.app()){var S;Pp(null===(S=I.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new ao(f,m,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(w){w.INTERNAL.registerComponent(new Ae.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),I=f.getProvider("auth");return new gu(m,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ep,FacebookAuthProvider:Od,GithubAuthProvider:TE,GoogleAuthProvider:Am,OAuthProvider:no,PhoneAuthProvider:Ct,PhoneMultiFactorGenerator:fa,RecaptchaVerifier:Yi,TwitterAuthProvider:Sm,Auth:gu,AuthCredential:mn,Error:j.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.1.3")}(J.Z)},7574:(Je,Te,k)=>{"use strict";k.d(Te,{y:()=>B});var _=k(7393),j=k(9181),ge=k(6490),de=k(6554),Ae=k(4487);var P=k(2494);let B=(()=>{class X{constructor(ce){this._isScalar=!1,ce&&(this._subscribe=ce)}lift(ce){const ee=new X;return ee.source=this,ee.operator=ce,ee}subscribe(ce,ee,_e){const{operator:we}=this,xe=function(X,Z,ce){if(X){if(X instanceof _.L)return X;if(X[j.b])return X[j.b]()}return X||Z||ce?new _.L(X,Z,ce):new _.L(ge.c)}(ce,ee,_e);if(xe.add(we?we.call(xe,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!xe.syncErrorThrowable?this._subscribe(xe):this._trySubscribe(xe)),P.v.useDeprecatedSynchronousErrorHandling&&xe.syncErrorThrowable&&(xe.syncErrorThrowable=!1,xe.syncErrorThrown))throw xe.syncErrorValue;return xe}_trySubscribe(ce){try{return this._subscribe(ce)}catch(ee){P.v.useDeprecatedSynchronousErrorHandling&&(ce.syncErrorThrown=!0,ce.syncErrorValue=ee),function(X){for(;X;){const{closed:Z,destination:ce,isStopped:ee}=X;if(Z||ee)return!1;X=ce&&ce instanceof _.L?ce:null}return!0}(ce)?ce.error(ee):console.warn(ee)}}forEach(ce,ee){return new(ee=K(ee))((_e,we)=>{let xe;xe=this.subscribe(he=>{try{ce(he)}catch(Le){we(Le),xe&&xe.unsubscribe()}},we,_e)})}_subscribe(ce){const{source:ee}=this;return ee&&ee.subscribe(ce)}[de.L](){return this}pipe(...ce){return 0===ce.length?this:function(X){return 0===X.length?Ae.y:1===X.length?X[0]:function(ce){return X.reduce((ee,_e)=>_e(ee),ce)}}(ce)(this)}toPromise(ce){return new(ce=K(ce))((ee,_e)=>{let we;this.subscribe(xe=>we=xe,xe=>_e(xe),()=>ee(we))})}}return X.create=Z=>new X(Z),X})();function K(X){if(X||(X=P.v.Promise||Promise),!X)throw new Error("no Promise impl found");return X}},6490:(Je,Te,k)=>{"use strict";k.d(Te,{c:()=>j});var _=k(2494),J=k(4449);const j={closed:!0,next(ge){},error(ge){if(_.v.useDeprecatedSynchronousErrorHandling)throw ge;(0,J.z)(ge)},complete(){}}},9765:(Je,Te,k)=>{"use strict";k.d(Te,{Yc:()=>Ae,xQ:()=>Ee});var _=k(7574),J=k(7393),j=k(5319),ge=k(7971),fe=k(8858),de=k(9181);class Ae extends J.L{constructor(B){super(B),this.destination=B}}let Ee=(()=>{class P extends _.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[de.b](){return new Ae(this)}lift(K){const X=new se(this,this);return X.operator=K,X}next(K){if(this.closed)throw new ge.N;if(!this.isStopped){const{observers:X}=this,Z=X.length,ce=X.slice();for(let ee=0;ee<Z;ee++)ce[ee].next(K)}}error(K){if(this.closed)throw new ge.N;this.hasError=!0,this.thrownError=K,this.isStopped=!0;const{observers:X}=this,Z=X.length,ce=X.slice();for(let ee=0;ee<Z;ee++)ce[ee].error(K);this.observers.length=0}complete(){if(this.closed)throw new ge.N;this.isStopped=!0;const{observers:K}=this,X=K.length,Z=K.slice();for(let ce=0;ce<X;ce++)Z[ce].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(K){if(this.closed)throw new ge.N;return super._trySubscribe(K)}_subscribe(K){if(this.closed)throw new ge.N;return this.hasError?(K.error(this.thrownError),j.w.EMPTY):this.isStopped?(K.complete(),j.w.EMPTY):(this.observers.push(K),new fe.W(this,K))}asObservable(){const K=new _.y;return K.source=this,K}}return P.create=(B,K)=>new se(B,K),P})();class se extends Ee{constructor(B,K){super(),this.destination=B,this.source=K}next(B){const{destination:K}=this;K&&K.next&&K.next(B)}error(B){const{destination:K}=this;K&&K.error&&this.destination.error(B)}complete(){const{destination:B}=this;B&&B.complete&&this.destination.complete()}_subscribe(B){const{source:K}=this;return K?this.source.subscribe(B):j.w.EMPTY}}},8858:(Je,Te,k)=>{"use strict";k.d(Te,{W:()=>J});var _=k(5319);class J extends _.w{constructor(ge,fe){super(),this.subject=ge,this.subscriber=fe,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ge=this.subject,fe=ge.observers;if(this.subject=null,!fe||0===fe.length||ge.isStopped||ge.closed)return;const de=fe.indexOf(this.subscriber);-1!==de&&fe.splice(de,1)}}},7393:(Je,Te,k)=>{"use strict";k.d(Te,{L:()=>Ae});var _=k(9105),J=k(6490),j=k(5319),ge=k(9181),fe=k(2494),de=k(4449);class Ae extends j.w{constructor(P,B,K){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=J.c;break;case 1:if(!P){this.destination=J.c;break}if("object"==typeof P){P instanceof Ae?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new Ee(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new Ee(this,P,B,K)}}[ge.b](){return this}static create(P,B,K){const X=new Ae(P,B,K);return X.syncErrorThrowable=!1,X}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class Ee extends Ae{constructor(P,B,K,X){super(),this._parentSubscriber=P;let Z,ce=this;(0,_.m)(B)?Z=B:B&&(Z=B.next,K=B.error,X=B.complete,B!==J.c&&(ce=Object.create(B),(0,_.m)(ce.unsubscribe)&&this.add(ce.unsubscribe.bind(ce)),ce.unsubscribe=this.unsubscribe.bind(this))),this._context=ce,this._next=Z,this._error=K,this._complete=X}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:B}=this;fe.v.useDeprecatedSynchronousErrorHandling&&B.syncErrorThrowable?this.__tryOrSetError(B,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:B}=this,{useDeprecatedSynchronousErrorHandling:K}=fe.v;if(this._error)K&&B.syncErrorThrowable?(this.__tryOrSetError(B,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(B.syncErrorThrowable)K?(B.syncErrorValue=P,B.syncErrorThrown=!0):(0,de.z)(P),this.unsubscribe();else{if(this.unsubscribe(),K)throw P;(0,de.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const B=()=>this._complete.call(this._context);fe.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,B),this.unsubscribe()):(this.__tryOrUnsub(B),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,B){try{P.call(this._context,B)}catch(K){if(this.unsubscribe(),fe.v.useDeprecatedSynchronousErrorHandling)throw K;(0,de.z)(K)}}__tryOrSetError(P,B,K){if(!fe.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{B.call(this._context,K)}catch(X){return fe.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=X,P.syncErrorThrown=!0,!0):((0,de.z)(X),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(Je,Te,k)=>{"use strict";k.d(Te,{w:()=>de});var _=k(9796),J=k(1555),j=k(9105);const fe=(()=>{function Ee(se){return Error.call(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((P,B)=>`${B+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se,this}return Ee.prototype=Object.create(Error.prototype),Ee})();class de{constructor(se){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,se&&(this._ctorUnsubscribe=!0,this._unsubscribe=se)}unsubscribe(){let se;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:B,_unsubscribe:K,_subscriptions:X}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof de)P.remove(this);else if(null!==P)for(let Z=0;Z<P.length;++Z)P[Z].remove(this);if((0,j.m)(K)){B&&(this._unsubscribe=void 0);try{K.call(this)}catch(Z){se=Z instanceof fe?Ae(Z.errors):[Z]}}if((0,_.k)(X)){let Z=-1,ce=X.length;for(;++Z<ce;){const ee=X[Z];if((0,J.K)(ee))try{ee.unsubscribe()}catch(_e){se=se||[],_e instanceof fe?se=se.concat(Ae(_e.errors)):se.push(_e)}}}if(se)throw new fe(se)}add(se){let P=se;if(!se)return de.EMPTY;switch(typeof se){case"function":P=new de(se);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof de)){const X=P;P=new de,P._subscriptions=[X]}break;default:throw new Error("unrecognized teardown "+se+" added to Subscription.")}let{_parentOrParents:B}=P;if(null===B)P._parentOrParents=this;else if(B instanceof de){if(B===this)return P;P._parentOrParents=[B,this]}else{if(-1!==B.indexOf(this))return P;B.push(this)}const K=this._subscriptions;return null===K?this._subscriptions=[P]:K.push(P),P}remove(se){const P=this._subscriptions;if(P){const B=P.indexOf(se);-1!==B&&P.splice(B,1)}}}var Ee;function Ae(Ee){return Ee.reduce((se,P)=>se.concat(P instanceof fe?P.errors:P),[])}de.EMPTY=((Ee=new de).closed=!0,Ee)},2494:(Je,Te,k)=>{"use strict";k.d(Te,{v:()=>J});let _=!1;const J={Promise:void 0,set useDeprecatedSynchronousErrorHandling(j){if(j){const ge=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ge.stack)}else _&&console.log("RxJS: Back to a better error behavior. Thank you. <3");_=j},get useDeprecatedSynchronousErrorHandling(){return _}}},5345:(Je,Te,k)=>{"use strict";k.d(Te,{IY:()=>ge,Ds:()=>de,ft:()=>Ee});var _=k(7393),J=k(7574),j=k(7444);class ge extends _.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class de extends _.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function Ee(se,P){if(P.closed)return;if(se instanceof J.y)return se.subscribe(P);let B;try{B=(0,j.s)(se)(P)}catch(K){P.error(K)}return B}},9193:(Je,Te,k)=>{"use strict";k.d(Te,{c:()=>j});var _=k(7574);const J=new _.y(fe=>fe.complete());function j(fe){return fe?function(fe){return new _.y(de=>fe.schedule(()=>de.complete()))}(fe):J}},4402:(Je,Te,k)=>{"use strict";k.d(Te,{D:()=>ce});var _=k(7574),J=k(7444),j=k(5319),ge=k(6554),Ae=k(4087),Ee=k(377),B=k(4072),K=k(9489);function ce(ee,_e){return _e?function(ee,_e){if(null!=ee){if(function(ee){return ee&&"function"==typeof ee[ge.L]}(ee))return function(ee,_e){return new _.y(we=>{const xe=new j.w;return xe.add(_e.schedule(()=>{const he=ee[ge.L]();xe.add(he.subscribe({next(Le){xe.add(_e.schedule(()=>we.next(Le)))},error(Le){xe.add(_e.schedule(()=>we.error(Le)))},complete(){xe.add(_e.schedule(()=>we.complete()))}}))})),xe})}(ee,_e);if((0,B.t)(ee))return function(ee,_e){return new _.y(we=>{const xe=new j.w;return xe.add(_e.schedule(()=>ee.then(he=>{xe.add(_e.schedule(()=>{we.next(he),xe.add(_e.schedule(()=>we.complete()))}))},he=>{xe.add(_e.schedule(()=>we.error(he)))}))),xe})}(ee,_e);if((0,K.z)(ee))return(0,Ae.r)(ee,_e);if(function(ee){return ee&&"function"==typeof ee[Ee.hZ]}(ee)||"string"==typeof ee)return function(ee,_e){if(!ee)throw new Error("Iterable cannot be null");return new _.y(we=>{const xe=new j.w;let he;return xe.add(()=>{he&&"function"==typeof he.return&&he.return()}),xe.add(_e.schedule(()=>{he=ee[Ee.hZ](),xe.add(_e.schedule(function(){if(we.closed)return;let Le,$e;try{const _t=he.next();Le=_t.value,$e=_t.done}catch(_t){return void we.error(_t)}$e?we.complete():(we.next(Le),this.schedule())}))})),xe})}(ee,_e)}throw new TypeError((null!==ee&&typeof ee||ee)+" is not observable")}(ee,_e):ee instanceof _.y?ee:new _.y((0,J.s)(ee))}},6693:(Je,Te,k)=>{"use strict";k.d(Te,{n:()=>ge});var _=k(7574),J=k(5015),j=k(4087);function ge(fe,de){return de?(0,j.r)(fe,de):new _.y((0,J.V)(fe))}},6682:(Je,Te,k)=>{"use strict";k.d(Te,{T:()=>fe});var _=k(7574),J=k(4869),j=k(840),ge=k(6693);function fe(...de){let Ae=Number.POSITIVE_INFINITY,Ee=null,se=de[de.length-1];return(0,J.K)(se)?(Ee=de.pop(),de.length>1&&"number"==typeof de[de.length-1]&&(Ae=de.pop())):"number"==typeof se&&(Ae=de.pop()),null===Ee&&1===de.length&&de[0]instanceof _.y?de[0]:(0,j.J)(Ae)((0,ge.n)(de,Ee))}},5917:(Je,Te,k)=>{"use strict";k.d(Te,{of:()=>ge});var _=k(4869),J=k(6693),j=k(4087);function ge(...fe){let de=fe[fe.length-1];return(0,_.K)(de)?(fe.pop(),(0,j.r)(fe,de)):(0,J.n)(fe)}},8002:(Je,Te,k)=>{"use strict";k.d(Te,{U:()=>J});var _=k(7393);function J(fe,de){return function(Ee){if("function"!=typeof fe)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return Ee.lift(new j(fe,de))}}class j{constructor(de,Ae){this.project=de,this.thisArg=Ae}call(de,Ae){return Ae.subscribe(new ge(de,this.project,this.thisArg))}}class ge extends _.L{constructor(de,Ae,Ee){super(de),this.project=Ae,this.count=0,this.thisArg=Ee||this}_next(de){let Ae;try{Ae=this.project.call(this.thisArg,de,this.count++)}catch(Ee){return void this.destination.error(Ee)}this.destination.next(Ae)}}},840:(Je,Te,k)=>{"use strict";k.d(Te,{J:()=>se});var _=k(8002),J=k(4402),j=k(5345);function ge(P,B,K=Number.POSITIVE_INFINITY){return"function"==typeof B?X=>X.pipe(ge((Z,ce)=>(0,J.D)(P(Z,ce)).pipe((0,_.U)((ee,_e)=>B(Z,ee,ce,_e))),K)):("number"==typeof B&&(K=B),X=>X.lift(new fe(P,K)))}class fe{constructor(B,K=Number.POSITIVE_INFINITY){this.project=B,this.concurrent=K}call(B,K){return K.subscribe(new de(B,this.project,this.concurrent))}}class de extends j.Ds{constructor(B,K,X=Number.POSITIVE_INFINITY){super(B),this.project=K,this.concurrent=X,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(B){this.active<this.concurrent?this._tryNext(B):this.buffer.push(B)}_tryNext(B){let K;const X=this.index++;try{K=this.project(B,X)}catch(Z){return void this.destination.error(Z)}this.active++,this._innerSub(K)}_innerSub(B){const K=new j.IY(this),X=this.destination;X.add(K);const Z=(0,j.ft)(B,K);Z!==K&&X.add(Z)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(B){this.destination.next(B)}notifyComplete(){const B=this.buffer;this.active--,B.length>0?this._next(B.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var Ee=k(4487);function se(P=Number.POSITIVE_INFINITY){return ge(Ee.y,P)}},309:(Je,Te,k)=>{"use strict";k.d(Te,{ht:()=>B,QV:()=>se});var _=k(7393),J=k(9193),j=k(5917),ge=k(7574);class Ee{constructor(Z,ce,ee){this.kind=Z,this.value=ce,this.error=ee,this.hasValue="N"===Z}observe(Z){switch(this.kind){case"N":return Z.next&&Z.next(this.value);case"E":return Z.error&&Z.error(this.error);case"C":return Z.complete&&Z.complete()}}do(Z,ce,ee){switch(this.kind){case"N":return Z&&Z(this.value);case"E":return ce&&ce(this.error);case"C":return ee&&ee()}}accept(Z,ce,ee){return Z&&"function"==typeof Z.next?this.observe(Z):this.do(Z,ce,ee)}toObservable(){switch(this.kind){case"N":return(0,j.of)(this.value);case"E":return X=this.error,new ge.y(ce=>ce.error(X));case"C":return(0,J.c)()}var X;throw new Error("unexpected notification kind value")}static createNext(Z){return void 0!==Z?new Ee("N",Z):Ee.undefinedValueNotification}static createError(Z){return new Ee("E",void 0,Z)}static createComplete(){return Ee.completeNotification}}function se(X,Z=0){return function(ee){return ee.lift(new P(X,Z))}}Ee.completeNotification=new Ee("C"),Ee.undefinedValueNotification=new Ee("N",void 0);class P{constructor(Z,ce=0){this.scheduler=Z,this.delay=ce}call(Z,ce){return ce.subscribe(new B(Z,this.scheduler,this.delay))}}class B extends _.L{constructor(Z,ce,ee=0){super(Z),this.scheduler=ce,this.delay=ee}static dispatch(Z){const{notification:ce,destination:ee}=Z;ce.observe(ee),this.unsubscribe()}scheduleMessage(Z){this.destination.add(this.scheduler.schedule(B.dispatch,this.delay,new K(Z,this.destination)))}_next(Z){this.scheduleMessage(Ee.createNext(Z))}_error(Z){this.scheduleMessage(Ee.createError(Z)),this.unsubscribe()}_complete(){this.scheduleMessage(Ee.createComplete()),this.unsubscribe()}}class K{constructor(Z,ce){this.notification=Z,this.destination=ce}}},3101:(Je,Te,k)=>{"use strict";k.d(Te,{R:()=>_e});var _=k(7574);let J=1;const j=Promise.resolve(),ge={};function fe(xe){return xe in ge&&(delete ge[xe],!0)}const de={setImmediate(xe){const he=J++;return ge[he]=!0,j.then(()=>fe(he)&&xe()),he},clearImmediate(xe){fe(xe)}};var Ee=k(6465),P=k(6102);const X=new class extends P.v{flush(he){this.active=!0,this.scheduled=void 0;const{actions:Le}=this;let $e,_t=-1,ke=Le.length;he=he||Le.shift();do{if($e=he.execute(he.state,he.delay))break}while(++_t<ke&&(he=Le.shift()));if(this.active=!1,$e){for(;++_t<ke&&(he=Le.shift());)he.unsubscribe();throw $e}}}(class extends Ee.o{constructor(he,Le){super(he,Le),this.scheduler=he,this.work=Le}requestAsyncId(he,Le,$e=0){return null!==$e&&$e>0?super.requestAsyncId(he,Le,$e):(he.actions.push(this),he.scheduled||(he.scheduled=de.setImmediate(he.flush.bind(he,null))))}recycleAsyncId(he,Le,$e=0){if(null!==$e&&$e>0||null===$e&&this.delay>0)return super.recycleAsyncId(he,Le,$e);0===he.actions.length&&(de.clearImmediate(Le),he.scheduled=void 0)}});var Z=k(9796);class ee extends _.y{constructor(he,Le=0,$e=X){var xe;super(),this.source=he,this.delayTime=Le,this.scheduler=$e,(!(!(0,Z.k)(xe=Le)&&xe-parseFloat(xe)+1>=0)||Le<0)&&(this.delayTime=0),(!$e||"function"!=typeof $e.schedule)&&(this.scheduler=X)}static create(he,Le=0,$e=X){return new ee(he,Le,$e)}static dispatch(he){const{source:Le,subscriber:$e}=he;return this.add(Le.subscribe($e))}_subscribe(he){return this.scheduler.schedule(ee.dispatch,this.delayTime,{source:this.source,subscriber:he})}}function _e(xe,he=0){return function($e){return $e.lift(new we(xe,he))}}class we{constructor(he,Le){this.scheduler=he,this.delay=Le}call(he,Le){return new ee(Le,this.delay,this.scheduler).subscribe(he)}}},4087:(Je,Te,k)=>{"use strict";k.d(Te,{r:()=>j});var _=k(7574),J=k(5319);function j(ge,fe){return new _.y(de=>{const Ae=new J.w;let Ee=0;return Ae.add(fe.schedule(function(){Ee!==ge.length?(de.next(ge[Ee++]),de.closed||Ae.add(this.schedule())):de.complete()})),Ae})}},6465:(Je,Te,k)=>{"use strict";k.d(Te,{o:()=>j});var _=k(5319);class J extends _.w{constructor(fe,de){super()}schedule(fe,de=0){return this}}class j extends J{constructor(fe,de){super(fe,de),this.scheduler=fe,this.work=de,this.pending=!1}schedule(fe,de=0){if(this.closed)return this;this.state=fe;const Ae=this.id,Ee=this.scheduler;return null!=Ae&&(this.id=this.recycleAsyncId(Ee,Ae,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(Ee,this.id,de),this}requestAsyncId(fe,de,Ae=0){return setInterval(fe.flush.bind(fe,this),Ae)}recycleAsyncId(fe,de,Ae=0){if(null!==Ae&&this.delay===Ae&&!1===this.pending)return de;clearInterval(de)}execute(fe,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(fe,de);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,de){let Ee,Ae=!1;try{this.work(fe)}catch(se){Ae=!0,Ee=!!se&&se||new Error(se)}if(Ae)return this.unsubscribe(),Ee}_unsubscribe(){const fe=this.id,de=this.scheduler,Ae=de.actions,Ee=Ae.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==Ee&&Ae.splice(Ee,1),null!=fe&&(this.id=this.recycleAsyncId(de,fe,null)),this.delay=null}}},6102:(Je,Te,k)=>{"use strict";k.d(Te,{v:()=>J});let _=(()=>{class j{constructor(fe,de=j.now){this.SchedulerAction=fe,this.now=de}schedule(fe,de=0,Ae){return new this.SchedulerAction(this,fe).schedule(Ae,de)}}return j.now=()=>Date.now(),j})();class J extends _{constructor(ge,fe=_.now){super(ge,()=>J.delegate&&J.delegate!==this?J.delegate.now():fe()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ge,fe=0,de){return J.delegate&&J.delegate!==this?J.delegate.schedule(ge,fe,de):super.schedule(ge,fe,de)}flush(ge){const{actions:fe}=this;if(this.active)return void fe.push(ge);let de;this.active=!0;do{if(de=ge.execute(ge.state,ge.delay))break}while(ge=fe.shift());if(this.active=!1,de){for(;ge=fe.shift();)ge.unsubscribe();throw de}}}},3637:(Je,Te,k)=>{"use strict";k.d(Te,{z:()=>j});var _=k(6465);const j=new(k(6102).v)(_.o)},7771:(Je,Te,k)=>{"use strict";k.d(Te,{c:()=>de,N:()=>fe});var _=k(6465),j=k(6102);const fe=new class extends j.v{}(class extends _.o{constructor(Ee,se){super(Ee,se),this.scheduler=Ee,this.work=se}schedule(Ee,se=0){return se>0?super.schedule(Ee,se):(this.delay=se,this.state=Ee,this.scheduler.flush(this),this)}execute(Ee,se){return se>0||this.closed?super.execute(Ee,se):this._execute(Ee,se)}requestAsyncId(Ee,se,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(Ee,se,P):Ee.flush(this)}}),de=fe},377:(Je,Te,k)=>{"use strict";k.d(Te,{hZ:()=>J});const J="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Je,Te,k)=>{"use strict";k.d(Te,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Je,Te,k)=>{"use strict";k.d(Te,{b:()=>_});const _="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Je,Te,k)=>{"use strict";k.d(Te,{N:()=>J});const J=(()=>{function j(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return j.prototype=Object.create(Error.prototype),j})()},4449:(Je,Te,k)=>{"use strict";function _(J){setTimeout(()=>{throw J},0)}k.d(Te,{z:()=>_})},4487:(Je,Te,k)=>{"use strict";function _(J){return J}k.d(Te,{y:()=>_})},9796:(Je,Te,k)=>{"use strict";k.d(Te,{k:()=>_});const _=Array.isArray||(J=>J&&"number"==typeof J.length)},9489:(Je,Te,k)=>{"use strict";k.d(Te,{z:()=>_});const _=J=>J&&"number"==typeof J.length&&"function"!=typeof J},9105:(Je,Te,k)=>{"use strict";function _(J){return"function"==typeof J}k.d(Te,{m:()=>_})},1555:(Je,Te,k)=>{"use strict";function _(J){return null!==J&&"object"==typeof J}k.d(Te,{K:()=>_})},4072:(Je,Te,k)=>{"use strict";function _(J){return!!J&&"function"!=typeof J.subscribe&&"function"==typeof J.then}k.d(Te,{t:()=>_})},4869:(Je,Te,k)=>{"use strict";function _(J){return J&&"function"==typeof J.schedule}k.d(Te,{K:()=>_})},7444:(Je,Te,k)=>{"use strict";k.d(Te,{s:()=>B});var _=k(5015),J=k(4449),ge=k(377),de=k(6554),Ee=k(9489),se=k(4072),P=k(1555);const B=K=>{if(K&&"function"==typeof K[de.L])return(K=>X=>{const Z=K[de.L]();if("function"!=typeof Z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Z.subscribe(X)})(K);if((0,Ee.z)(K))return(0,_.V)(K);if((0,se.t)(K))return(K=>X=>(K.then(Z=>{X.closed||(X.next(Z),X.complete())},Z=>X.error(Z)).then(null,J.z),X))(K);if(K&&"function"==typeof K[ge.hZ])return(K=>X=>{const Z=K[ge.hZ]();for(;;){let ce;try{ce=Z.next()}catch(ee){return X.error(ee),X}if(ce.done){X.complete();break}if(X.next(ce.value),X.closed)break}return"function"==typeof Z.return&&X.add(()=>{Z.return&&Z.return()}),X})(K);{const Z=`You provided ${(0,P.K)(K)?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Z)}}},5015:(Je,Te,k)=>{"use strict";k.d(Te,{V:()=>_});const _=J=>j=>{for(let ge=0,fe=J.length;ge<fe&&!j.closed;ge++)j.next(J[ge]);j.complete()}},3702:(Je,Te,k)=>{"use strict";var _=k(4693);let J=null;function j(){return J}const Ae=new _.OlP("DocumentToken");var ae=(()=>((ae=ae||{})[ae.Zero=0]="Zero",ae[ae.One=1]="One",ae[ae.Two=2]="Two",ae[ae.Few=3]="Few",ae[ae.Many=4]="Many",ae[ae.Other=5]="Other",ae))();const xt=_.kL8;class mn{}let yt=(()=>{class o extends mn{constructor(r){super(),this.locale=r}getPluralCategory(r,u){switch(xt(u||this.locale)(r)){case ae.Zero:return"zero";case ae.One:return"one";case ae.Two:return"two";case ae.Few:return"few";case ae.Many:return"many";default:return"other"}}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(_.soG))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();class Ks{constructor(n,r,u,l){this.$implicit=n,this.ngForOf=r,this.index=u,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zt=(()=>{class o{constructor(r,u,l){this._viewContainer=r,this._template=u,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(u){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(o){return o.name||typeof o}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const u=[];r.forEachOperation((l,g,E)=>{if(null==l.previousIndex){const C=this._viewContainer.createEmbeddedView(this._template,new Ks(null,this._ngForOf,-1,-1),null===E?void 0:E),A=new Oi(l,C);u.push(A)}else if(null==E)this._viewContainer.remove(null===g?void 0:g);else if(null!==g){const C=this._viewContainer.get(g);this._viewContainer.move(C,E);const A=new Oi(l,C);u.push(A)}});for(let l=0;l<u.length;l++)this._perViewChange(u[l].view,u[l].record);for(let l=0,g=this._viewContainer.length;l<g;l++){const E=this._viewContainer.get(l);E.context.index=l,E.context.count=g,E.context.ngForOf=this._ngForOf}r.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(r,u){r.context.$implicit=u.item}static ngTemplateContextGuard(r,u){return!0}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},o.\u0275dir=_.lG2({type:o,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),o})();class Oi{constructor(n,r){this.record=n,this.view=r}}let gt=(()=>{class o{constructor(r,u){this._viewContainer=r,this._context=new Bo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=u}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Ys("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Ys("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,u){return!0}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(_.s_b),_.Y36(_.Rgc))},o.\u0275dir=_.lG2({type:o,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),o})();class Bo{constructor(){this.$implicit=null,this.ngIf=null}}function Ys(o,n){if(n&&!n.createEmbeddedView)throw new Error(`${o} must be a TemplateRef, but received '${(0,_.AaK)(n)}'.`)}let AE=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({providers:[{provide:mn,useClass:yt}]}),o})();function Go(o){return"server"===o}class qo extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var o;o=new qo,J||(J=o)}onAndCancel(n,r,u){return n.addEventListener(r,u,!1),()=>{n.removeEventListener(r,u,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(ms=ms||document.querySelector("base"),ms?ms.getAttribute("href"):null);return null==r?null:function(o){Ka=Ka||document.createElement("a"),Ka.setAttribute("href",o);const n=Ka.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(o,n){n=encodeURIComponent(n);for(const r of o.split(";")){const u=r.indexOf("="),[l,g]=-1==u?[r,""]:[r.slice(0,u),r.slice(u+1)];if(l.trim()===n)return decodeURIComponent(g)}return null}(document.cookie,n)}}let Ka,ms=null;const bc=new _.OlP("TRANSITION_ID"),Wo=[{provide:_.ip1,useFactory:function(o,n,r){return()=>{r.get(_.CZH).donePromise.then(()=>{const u=j(),l=n.querySelectorAll(`style[ng-transition="${o}"]`);for(let g=0;g<l.length;g++)u.remove(l[g])})}},deps:[bc,Ae,_.zs3],multi:!0}];class Ya{static init(){(0,_.VLi)(new Ya)}addToWindow(n){_.dqk.getAngularTestability=(u,l=!0)=>{const g=n.findTestabilityInTree(u,l);if(null==g)throw new Error("Could not find testability for element.");return g},_.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(u=>{const l=_.dqk.getAllAngularTestabilities();let g=l.length,E=!1;const C=function(A){E=E||A,g--,0==g&&u(E)};l.forEach(function(A){A.whenStable(C)})})}findTestabilityInTree(n,r,u){if(null==r)return null;const l=n.getTestability(r);return null!=l?l:u?j().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Ac=(()=>{class o{build(){return new XMLHttpRequest}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();const Pi=new _.OlP("EventManagerPlugins");let Ja=(()=>{class o{constructor(r,u){this._zone=u,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,u,l){return this._findPluginFor(u).addEventListener(r,u,l)}addGlobalEventListener(r,u,l){return this._findPluginFor(u).addGlobalEventListener(r,u,l)}getZone(){return this._zone}_findPluginFor(r){const u=this._eventNameToPlugin.get(r);if(u)return u;const l=this._plugins;for(let g=0;g<l.length;g++){const E=l[g];if(E.supports(r))return this._eventNameToPlugin.set(r,E),E}throw new Error(`No event manager plugin found for event ${r}`)}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Pi),_.LFG(_.R0b))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();class Zr{constructor(n){this._doc=n}addGlobalEventListener(n,r,u){const l=j().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,u)}}let Vd=(()=>{class o{constructor(){this._stylesSet=new Set}addStyles(r){const u=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),u.add(l))}),this.onStylesAdded(u)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})(),ki=(()=>{class o extends Vd{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,u,l){r.forEach(g=>{const E=this._doc.createElement("style");E.textContent=g,l.push(u.appendChild(E))})}addHost(r){const u=[];this._addStylesToHost(this._stylesSet,r,u),this._hostNodes.set(r,u)}removeHost(r){const u=this._hostNodes.get(r);u&&u.forEach(at),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((u,l)=>{this._addStylesToHost(r,l,u)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(at))}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Ae))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();function at(o){j().remove(o)}const Sc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ud=/%COMP%/g;function Et(o,n,r){for(let u=0;u<n.length;u++){let l=n[u];Array.isArray(l)?Et(o,l,r):(l=l.replace(Ud,o),r.push(l))}return r}function jd(o){return n=>{if("__ngUnwrap__"===n)return o;!1===o(n)&&(n.preventDefault(),n.returnValue=!1)}}let xc=(()=>{class o{constructor(r,u,l){this.eventManager=r,this.sharedStylesHost=u,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new Fi(r)}createRenderer(r,u){if(!r||!u)return this.defaultRenderer;switch(u.encapsulation){case _.ifc.Emulated:{let l=this.rendererByCompId.get(u.id);return l||(l=new ap(this.eventManager,this.sharedStylesHost,u,this.appId),this.rendererByCompId.set(u.id,l)),l.applyToHost(r),l}case 1:case _.ifc.ShadowDom:return new Om(this.eventManager,this.sharedStylesHost,r,u);default:if(!this.rendererByCompId.has(u.id)){const l=Et(u.id,u.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(u.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Ja),_.LFG(ki),_.LFG(_.AFp))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();class Fi{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(Sc[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,u){n&&n.insertBefore(r,u)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let u="string"==typeof n?document.querySelector(n):n;if(!u)throw new Error(`The selector "${n}" did not match any elements`);return r||(u.textContent=""),u}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,u,l){if(l){r=l+":"+r;const g=Sc[l];g?n.setAttributeNS(g,r,u):n.setAttribute(r,u)}else n.setAttribute(r,u)}removeAttribute(n,r,u){if(u){const l=Sc[u];l?n.removeAttributeNS(l,r):n.removeAttribute(`${u}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,u,l){l&(_.JOm.DashCase|_.JOm.Important)?n.style.setProperty(r,u,l&_.JOm.Important?"important":""):n.style[r]=u}removeStyle(n,r,u){u&_.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,u){n[r]=u}setValue(n,r){n.nodeValue=r}listen(n,r,u){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,jd(u)):this.eventManager.addEventListener(n,r,jd(u))}}class ap extends Fi{constructor(n,r,u,l){super(n),this.component=u;const g=Et(l+"-"+u.id,u.styles,[]);r.addStyles(g),this.contentAttr="_ngcontent-%COMP%".replace(Ud,l+"-"+u.id),this.hostAttr=function(o){return"_nghost-%COMP%".replace(Ud,o)}(l+"-"+u.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const u=super.createElement(n,r);return super.setAttribute(u,this.contentAttr,""),u}}class Om extends Fi{constructor(n,r,u,l){super(n),this.sharedStylesHost=r,this.hostEl=u,this.shadowRoot=u.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const g=Et(l.id,l.styles,[]);for(let E=0;E<g.length;E++){const C=document.createElement("style");C.textContent=g[E],this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,u){return super.insertBefore(this.nodeOrShadowRoot(n),r,u)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let Yo=(()=>{class o extends Zr{constructor(r){super(r)}supports(r){return!0}addEventListener(r,u,l){return r.addEventListener(u,l,!1),()=>this.removeEventListener(r,u,l)}removeEventListener(r,u,l){return r.removeEventListener(u,l)}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Ae))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();const cp=["alt","control","meta","shift"],$d={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fm={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey};let Lm=(()=>{class o extends Zr{constructor(r){super(r)}supports(r){return null!=o.parseEventName(r)}addEventListener(r,u,l){const g=o.parseEventName(u),E=o.eventCallback(g.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(r,g.domEventName,E))}static parseEventName(r){const u=r.toLowerCase().split("."),l=u.shift();if(0===u.length||"keydown"!==l&&"keyup"!==l)return null;const g=o._normalizeKey(u.pop());let E="";if(cp.forEach(A=>{const N=u.indexOf(A);N>-1&&(u.splice(N,1),E+=A+".")}),E+=g,0!=u.length||0===g.length)return null;const C={};return C.domEventName=l,C.fullKey=E,C}static getEventFullKey(r){let u="",l=function(o){let n=o.key;if(null==n){if(n=o.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===o.location&&lp.hasOwnProperty(n)&&(n=lp[n]))}return $d[n]||n}(r);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),cp.forEach(g=>{g!=l&&Fm[g](r)&&(u+=g+".")}),u+=l,u}static eventCallback(r,u,l){return g=>{o.getEventFullKey(g)===r&&l.runGuarded(()=>u(g))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Ae))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac}),o})();const Um=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:"browser"},{provide:_.g9A,useValue:function(){qo.makeCurrent(),Ya.init()},multi:!0},{provide:Ae,useFactory:function(){return(0,_.RDi)(document),document},deps:[]}]),Bm=[[],{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function(){return new _.qLn},deps:[]},{provide:Pi,useClass:Yo,multi:!0,deps:[Ae,_.R0b,_.Lbi]},{provide:Pi,useClass:Lm,multi:!0,deps:[Ae]},[],{provide:xc,useClass:xc,deps:[Ja,ki,_.AFp]},{provide:_.FYo,useExisting:xc},{provide:Vd,useExisting:ki},{provide:ki,useClass:ki,deps:[Ae]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b]},{provide:Ja,useClass:Ja,deps:[Pi,_.R0b]},{provide:class{},useClass:Ac,deps:[]},[]];let kc=(()=>{class o{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:o,providers:[{provide:_.AFp,useValue:r.appId},{provide:bc,useExisting:_.AFp},Wo]}}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(o,12))},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({providers:Bm,imports:[AE,_.hGG]}),o})();"undefined"!=typeof window&&window;var Cr=k(4402),ta=k(7574),vs=k(9796),hn=k(8002),Uc=k(1555);function na(o,n){return new ta.y(r=>{const u=o.length;if(0===u)return void r.complete();const l=new Array(u);let g=0,E=0;for(let C=0;C<u;C++){const A=(0,Cr.D)(o[C]);let N=!1;r.add(A.subscribe({next:O=>{N||(N=!0,E++),l[C]=O},error:O=>r.error(O),complete:()=>{g++,(g===u||!N)&&(E===u&&r.next(n?n.reduce((O,F,Q)=>(O[F]=l[Q],O),{}):l),r.complete())}}))}})}let zd=(()=>{class o{constructor(r,u){this._renderer=r,this._elementRef=u,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(r,u){this._renderer.setProperty(this._elementRef.nativeElement,r,u)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(_.Qsj),_.Y36(_.SBq))},o.\u0275dir=_.lG2({type:o}),o})(),io=(()=>{class o extends zd{}return o.\u0275fac=function(){let n;return function(u){return(n||(n=_.n5z(o)))(u||o)}}(),o.\u0275dir=_.lG2({type:o,features:[_.qOj]}),o})();const Ui=new _.OlP("NgValueAccessor"),Zd={provide:Ui,useExisting:(0,_.Gpc)(()=>nu),multi:!0},ra=new _.OlP("CompositionEventMode");let nu=(()=>{class o extends zd{constructor(r,u,l){super(r,u),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const o=j()?j().getUserAgent():"";return/android (\d+)/.test(o.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(ra,8))},o.\u0275dir=_.lG2({type:o,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,u){1&r&&_.NdJ("input",function(g){return u._handleInput(g.target.value)})("blur",function(){return u.onTouched()})("compositionstart",function(){return u._compositionStart()})("compositionend",function(g){return u._compositionEnd(g.target.value)})},features:[_._Bn([Zd]),_.qOj]}),o})();const Fn=new _.OlP("NgValidators"),ji=new _.OlP("NgAsyncValidators");function oo(o){return null!=o}function ao(o){const n=(0,_.QGY)(o)?(0,Cr.D)(o):o;return(0,_.CqO)(n),n}function uo(o){let n={};return o.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function Es(o,n){return n.map(r=>r(o))}function Ei(o){return o.map(n=>function(o){return!o.validate}(n)?n:r=>n.validate(r))}function Wc(o){return null!=o?function(o){if(!o)return null;const n=o.filter(oo);return 0==n.length?null:function(r){return uo(Es(r,n))}}(Ei(o)):null}function zc(o){return null!=o?function(o){if(!o)return null;const n=o.filter(oo);return 0==n.length?null:function(r){return function(...o){if(1===o.length){const n=o[0];if((0,vs.k)(n))return na(n,null);if((0,Uc.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return na(r.map(u=>n[u]),r)}}if("function"==typeof o[o.length-1]){const n=o.pop();return na(o=1===o.length&&(0,vs.k)(o[0])?o[0]:o,null).pipe((0,hn.U)(r=>n(...r)))}return na(o,null)}(Es(r,n).map(ao)).pipe((0,hn.U)(uo))}}(Ei(o)):null}function iu(o,n){return null===o?[n]:Array.isArray(o)?[...o,n]:[o,n]}function sa(o){return o?Array.isArray(o)?o:[o]:[]}function co(o,n){return Array.isArray(o)?o.includes(n):o===n}function lo(o,n){const r=sa(n);return sa(o).forEach(l=>{co(r,l)||r.push(l)}),r}function Xd(o,n){return sa(n).filter(r=>!co(o,r))}let zm=(()=>{class o{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=Wc(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=zc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,u){return!!this.control&&this.control.hasError(r,u)}getError(r,u){return this.control?this.control.getError(r,u):null}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275dir=_.lG2({type:o}),o})(),br=(()=>{class o extends zm{get formDirective(){return null}get path(){return null}}return o.\u0275fac=function(){let n;return function(u){return(n||(n=_.n5z(o)))(u||o)}}(),o.\u0275dir=_.lG2({type:o,features:[_.qOj]}),o})();class ho extends zm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class eh{constructor(n){this._cd=n}is(n){var r,u,l;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(l=null===(u=this._cd)||void 0===u?void 0:u.control)||void 0===l?void 0:l[n])}}let fo=(()=>{class o extends eh{constructor(r){super(r)}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(ho,2))},o.\u0275dir=_.lG2({type:o,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,u){2&r&&_.ekj("ng-untouched",u.is("untouched"))("ng-touched",u.is("touched"))("ng-pristine",u.is("pristine"))("ng-dirty",u.is("dirty"))("ng-valid",u.is("valid"))("ng-invalid",u.is("invalid"))("ng-pending",u.is("pending"))},features:[_.qOj]}),o})(),Zc=(()=>{class o extends eh{constructor(r){super(r)}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(br,10))},o.\u0275dir=_.lG2({type:o,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,u){2&r&&_.ekj("ng-untouched",u.is("untouched"))("ng-touched",u.is("touched"))("ng-pristine",u.is("pristine"))("ng-dirty",u.is("dirty"))("ng-valid",u.is("valid"))("ng-invalid",u.is("invalid"))("ng-pending",u.is("pending"))("ng-submitted",u.is("submitted"))},features:[_.qOj]}),o})();function aa(o,n){po(o,n),n.valueAccessor.writeValue(o.value),function(o,n){n.valueAccessor.registerOnChange(r=>{o._pendingValue=r,o._pendingChange=!0,o._pendingDirty=!0,"change"===o.updateOn&&yp(o,n)})}(o,n),function(o,n){const r=(u,l)=>{n.valueAccessor.writeValue(u),l&&n.viewToModelUpdate(u)};o.registerOnChange(r),n._registerOnDestroy(()=>{o._unregisterOnChange(r)})}(o,n),function(o,n){n.valueAccessor.registerOnTouched(()=>{o._pendingTouched=!0,"blur"===o.updateOn&&o._pendingChange&&yp(o,n),"submit"!==o.updateOn&&o.markAsTouched()})}(o,n),function(o,n){if(n.valueAccessor.setDisabledState){const r=u=>{n.valueAccessor.setDisabledState(u)};o.registerOnDisabledChange(r),n._registerOnDestroy(()=>{o._unregisterOnDisabledChange(r)})}}(o,n)}function su(o,n){o.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function po(o,n){const r=function(o){return o._rawValidators}(o);null!==n.validator?o.setValidators(iu(r,n.validator)):"function"==typeof r&&o.setValidators([r]);const u=function(o){return o._rawAsyncValidators}(o);null!==n.asyncValidator?o.setAsyncValidators(iu(u,n.asyncValidator)):"function"==typeof u&&o.setAsyncValidators([u]);const l=()=>o.updateValueAndValidity();su(n._rawValidators,l),su(n._rawAsyncValidators,l)}function yp(o,n){o._pendingDirty&&o.markAsDirty(),o.setValue(o._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(o._pendingValue),o._pendingChange=!1}function yo(o,n){const r=o.indexOf(n);r>-1&&o.splice(r,1)}const ca="VALID",tl="INVALID",_o="PENDING",Gi="DISABLED";function au(o){return(an(o)?o.validators:o)||null}function la(o){return Array.isArray(o)?Wc(o):o||null}function wi(o,n){return(an(n)?n.asyncValidators:o)||null}function vp(o){return Array.isArray(o)?zc(o):o||null}function an(o){return null!=o&&!Array.isArray(o)&&"object"==typeof o}class uu{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=la(this._rawValidators),this._composedAsyncValidatorFn=vp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===ca}get invalid(){return this.status===tl}get pending(){return this.status==_o}get disabled(){return this.status===Gi}get enabled(){return this.status!==Gi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=la(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=vp(n)}addValidators(n){this.setValidators(lo(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(lo(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Xd(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Xd(n,this._rawAsyncValidators))}hasValidator(n){return co(this._rawValidators,n)}hasAsyncValidator(n){return co(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=_o,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=Gi,this.errors=null,this._forEachChild(u=>{u.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(u=>u(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=ca,this._forEachChild(u=>{u.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(u=>u(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ca||this.status===_o)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gi:ca}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=_o,this._hasOwnPendingAsyncValidator=!0;const r=ao(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(u=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(u,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(o,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let u=o;return n.forEach(l=>{u=u instanceof Yr?u.controls.hasOwnProperty(l)?u.controls[l]:null:u instanceof cu&&u.at(l)||null}),u}(this,n)}getError(n,r){const u=r?this.get(r):this;return u&&u.errors?u.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Gi:this.errors?tl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_o)?_o:this._anyControlsHaveStatus(tl)?tl:ca}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){an(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class oh extends uu{constructor(n=null,r,u){super(au(r),wi(u,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(u=>u(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){yo(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){yo(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Yr extends uu{constructor(n,r,u){super(au(r),wi(u,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,u={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:u.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,u={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:u.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(u=>{this._throwIfControlMissing(u),this.controls[u].setValue(n[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(u=>{this.controls[u]&&this.controls[u].patchValue(n[u],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((u,l)=>{u.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,u)=>(n[u]=r instanceof oh?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,u)=>!!u._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const u=this.controls[r];u&&n(u,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const u=this.controls[r];if(this.contains(r)&&n(u))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,u)=>((r.enabled||this.disabled)&&(n[u]=r.value),n))}_reduceChildren(n,r){let u=n;return this._forEachChild((l,g)=>{u=r(u,l,g)}),u}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,u)=>{if(void 0===n[u])throw new Error(`Must supply a value for form control with name: '${u}'.`)})}}class cu extends uu{constructor(n,r,u){super(au(r),wi(u,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,u={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:u.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,u={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:u.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((u,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(u,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((u,l)=>{this.at(l)&&this.at(l).patchValue(u,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((u,l)=>{u.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof oh?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,u)=>!!u._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,u)=>{n(r,u)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,u)=>{if(void 0===n[u])throw new Error(`Must supply a value for form control at index: ${u}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const Ym={provide:br,useExisting:(0,_.Gpc)(()=>nl)},da=(()=>Promise.resolve(null))();let nl=(()=>{class o extends br{constructor(r,u){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new _.vpe,this.form=new Yr({},Wc(r),zc(u))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){da.then(()=>{const u=this._findContainer(r.path);r.control=u.registerControl(r.name,r.control),aa(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){da.then(()=>{const u=this._findContainer(r.path);u&&u.removeControl(r.name),yo(this._directives,r)})}addFormGroup(r){da.then(()=>{const u=this._findContainer(r.path),l=new Yr({});(function(o,n){po(o,n)})(l,r),u.registerControl(r.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){da.then(()=>{const u=this._findContainer(r.path);u&&u.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,u){da.then(()=>{this.form.get(r.path).setValue(u)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function(o,n){o._syncPendingControls(),n.forEach(r=>{const u=r.control;"submit"===u.updateOn&&u._pendingChange&&(r.viewToModelUpdate(u._pendingValue),u._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(Fn,10),_.Y36(ji,10))},o.\u0275dir=_.lG2({type:o,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,u){1&r&&_.NdJ("submit",function(g){return u.onSubmit(g)})("reset",function(){return u.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([Ym]),_.qOj]}),o})();const il={provide:ho,useExisting:(0,_.Gpc)(()=>sl)},uh=(()=>Promise.resolve(null))();let sl=(()=>{class o extends ho{constructor(r,u,l,g){super(),this.control=new oh,this._registered=!1,this.update=new _.vpe,this._parent=r,this._setValidators(u),this._setAsyncValidators(l),this.valueAccessor=function(o,n){if(!n)return null;let r,u,l;return Array.isArray(n),n.forEach(g=>{g.constructor===nu?r=g:function(o){return Object.getPrototypeOf(o.constructor)===io}(g)?u=g:l=g}),l||u||r||null}(0,g)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(o,n){if(!o.hasOwnProperty("model"))return!1;const r=o.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(o,n){return[...n.path,o]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){aa(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){uh.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const u=r.isDisabled.currentValue,l=""===u||u&&"false"!==u;uh.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(br,9),_.Y36(Fn,10),_.Y36(ji,10),_.Y36(Ui,10))},o.\u0275dir=_.lG2({type:o,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([il]),_.qOj,_.TTD]}),o})(),bs=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275dir=_.lG2({type:o,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),o})();const lu={provide:Ui,useExisting:(0,_.Gpc)(()=>ol),multi:!0};let ol=(()=>{class o extends io{writeValue(r){this.setProperty("value",null==r?"":r)}registerOnChange(r){this.onChange=u=>{r(""==u?null:parseFloat(u))}}}return o.\u0275fac=function(){let n;return function(u){return(n||(n=_.n5z(o)))(u||o)}}(),o.\u0275dir=_.lG2({type:o,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,u){1&r&&_.NdJ("input",function(g){return u.onChange(g.target.value)})("blur",function(){return u.onTouched()})},features:[_._Bn([lu]),_.qOj]}),o})(),al=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({}),o})();const mh={provide:Fn,useExisting:(0,_.Gpc)(()=>fl),multi:!0};let fl=(()=>{class o{constructor(){this._required=!1}get required(){return this._required}set required(r){this._required=null!=r&&!1!==r&&"false"!=`${r}`,this._onChange&&this._onChange()}validate(r){return this.required?function(o){return function(o){return null==o||0===o.length}(o.value)?{required:!0}:null}(r):null}registerOnValidatorChange(r){this._onChange=r}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275dir=_.lG2({type:o,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,u){2&r&&_.uIk("required",u.required?"":null)},inputs:{required:"required"},features:[_._Bn([mh])]}),o})(),gl=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({imports:[[al]]}),o})(),WE=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({imports:[gl]}),o})();var vh=k(3637),As=k(5917),Sn=k(2993),pa=k(840);function Ss(...o){return(0,pa.J)(1)((0,As.of)(...o))}var Mp=k(4869);function Yt(...o){const n=o[o.length-1];return(0,Mp.K)(n)?(o.pop(),r=>Ss(o,r,n)):r=>Ss(o,r)}var Ki=k(7393);function pu(){return o=>o.lift(new Eh)}class Eh{call(n,r){return r.subscribe(new wh(n))}}class wh extends Ki.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}function Ih(o,n){let r=!1;return arguments.length>=2&&(r=!0),function(l){return l.lift(new Ns(o,n,r))}}class Ns{constructor(n,r,u=!1){this.accumulator=n,this.seed=r,this.hasSeed=u}call(n,r){return r.subscribe(new Rp(n,this.accumulator,this.seed,this.hasSeed))}}class Rp extends Ki.L{constructor(n,r,u,l){super(n),this.accumulator=r,this._seed=u,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let u;try{u=this.accumulator(this.seed,n,r)}catch(l){this.destination.error(l)}this.seed=u,this.destination.next(u)}}class ly{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new zE(n,this.compare,this.keySelector))}}class zE extends Ki.L{constructor(n,r,u){super(n),this.keySelector=u,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:l}=this;r=l?l(n):n}catch(l){return this.destination.error(l)}let u=!1;if(this.hasKey)try{const{compare:l}=this;u=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;u||(this.key=r,this.destination.next(n))}}function ml(o,n){return function(u){return u.lift(new Nn(o,n))}}class Nn{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Ln(n,this.predicate,this.thisArg))}}class Ln extends Ki.L{constructor(n,r,u){super(n),this.predicate=r,this.thisArg=u,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(u){return void this.destination.error(u)}r&&this.destination.next(n)}}var He,Fr=k(8939),Op=(k(670),k(4486)),ne=k(8239),ai=k(5452),gu=k(6034),xs=k(5601),Ct=k(3854),Pp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yi={},Ch=Ch||{},w=Pp||self;function f(){}function m(o){var n=typeof o;return"array"==(n="object"!=n?n:o?Array.isArray(o)?"array":n:"null")||"object"==n&&"number"==typeof o.length}function I(o){var n=typeof o;return"object"==n&&null!=o||"function"==n}var M="closure_uid_"+(1e9*Math.random()>>>0),G=0;function le(o,n,r){return o.call.apply(o.bind,arguments)}function Oe(o,n,r){if(!o)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,u),o.apply(n,l)}}return function(){return o.apply(n,arguments)}}function Pe(o,n,r){return(Pe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?le:Oe).apply(null,arguments)}function et(o,n){var r=Array.prototype.slice.call(arguments,1);return function(){var u=r.slice();return u.push.apply(u,arguments),o.apply(this,u)}}function je(o,n){function r(){}r.prototype=n.prototype,o.Z=n.prototype,o.prototype=new r,o.prototype.constructor=o,o.Vb=function(u,l,g){for(var E=Array(arguments.length-2),C=2;C<arguments.length;C++)E[C-2]=arguments[C];return n.prototype[l].apply(u,E)}}function Bt(){this.s=this.s,this.o=this.o}var yl={};Bt.prototype.s=!1,Bt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var o=function(o){return Object.prototype.hasOwnProperty.call(o,M)&&o[M]||(o[M]=++G)}(this);delete yl[o]}},Bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bh=Array.prototype.indexOf?function(o,n){return Array.prototype.indexOf.call(o,n,void 0)}:function(o,n){if("string"==typeof o)return"string"!=typeof n||1!=n.length?-1:o.indexOf(n,0);for(let r=0;r<o.length;r++)if(r in o&&o[r]===n)return r;return-1},_l=Array.prototype.forEach?function(o,n,r){Array.prototype.forEach.call(o,n,r)}:function(o,n,r){const u=o.length,l="string"==typeof o?o.split(""):o;for(let g=0;g<u;g++)g in l&&n.call(r,l[g],g,o)};function Th(o){return Array.prototype.concat.apply([],arguments)}function Ms(o){const n=o.length;if(0<n){const r=Array(n);for(let u=0;u<n;u++)r[u]=o[u];return r}return[]}function Yn(o){return/^[\s\xa0]*$/.test(o)}var Qn,vl=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function Vn(o,n){return-1!=o.indexOf(n)}function El(o,n){return o<n?-1:o>n?1:0}e:{var Ah=w.navigator;if(Ah){var Sh=Ah.userAgent;if(Sh){Qn=Sh;break e}}Qn=""}function dy(o,n,r){for(const u in o)n.call(r,o[u],u,o)}function ZE(o){const n={};for(const r in o)n[r]=o[r];return n}var KE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mu(o,n){let r,u;for(let l=1;l<arguments.length;l++){for(r in u=arguments[l],u)o[r]=u[r];for(let g=0;g<KE.length;g++)r=KE[g],Object.prototype.hasOwnProperty.call(u,r)&&(o[r]=u[r])}}function Ii(o){return Ii[" "](o),o}Ii[" "]=f;var Nh,o,UT=Vn(Qn,"Opera"),yu=Vn(Qn,"Trident")||Vn(Qn,"MSIE"),AD=Vn(Qn,"Edge"),Di=AD||yu,Fp=Vn(Qn,"Gecko")&&!(Vn(Qn.toLowerCase(),"webkit")&&!Vn(Qn,"Edge"))&&!(Vn(Qn,"Trident")||Vn(Qn,"MSIE"))&&!Vn(Qn,"Edge"),hy=Vn(Qn.toLowerCase(),"webkit")&&!Vn(Qn,"Edge");function YE(){var o=w.document;return o?o.documentMode:void 0}e:{var _u="",Lp=(o=Qn,Fp?/rv:([^\);]+)(\)|;)/.exec(o):AD?/Edge\/([\d\.]+)/.exec(o):yu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o):hy?/WebKit\/(\S+)/.exec(o):UT?/(?:Version)[ \/]?(\S+)/.exec(o):void 0);if(Lp&&(_u=Lp?Lp[1]:""),yu){var Vp=YE();if(null!=Vp&&Vp>parseFloat(_u)){Nh=String(Vp);break e}}Nh=_u}var fy={};function py(){return n=fy,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let o=0;const n=vl(String(Nh)).split("."),r=vl("9").split("."),u=Math.max(n.length,r.length);for(let E=0;0==o&&E<u;E++){var l=n[E]||"",g=r[E]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==l[0].length&&0==g[0].length)break;o=El(0==l[1].length?0:parseInt(l[1],10),0==g[1].length?0:parseInt(g[1],10))||El(0==l[2].length,0==g[2].length)||El(l[2],g[2]),l=l[3],g=g[3]}while(0==o)}return 0<=o}();var n}var wl=w.document&&yu&&(YE()||parseInt(Nh,10))||void 0,gy=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var o=!1,n=Object.defineProperty({},"passive",{get:function(){o=!0}});try{w.addEventListener("test",f,n),w.removeEventListener("test",f,n)}catch(r){}return o}();function dr(o,n){this.type=o,this.g=this.target=n,this.defaultPrevented=!1}function xh(o,n){if(dr.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var r=this.type=o.type,u=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=n,n=o.relatedTarget){if(Fp){e:{try{Ii(n.nodeName);var l=!0;break e}catch(g){}l=!1}l||(n=null)}}else"mouseover"==r?n=o.fromElement:"mouseout"==r&&(n=o.toElement);this.relatedTarget=n,u?(this.clientX=void 0!==u.clientX?u.clientX:u.pageX,this.clientY=void 0!==u.clientY?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType="string"==typeof o.pointerType?o.pointerType:my[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&xh.Z.h.call(this)}}dr.prototype.h=function(){this.defaultPrevented=!0},je(xh,dr);var my={2:"touch",3:"pen",4:"mouse"};xh.prototype.h=function(){xh.Z.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Mh="closure_listenable_"+(1e6*Math.random()|0),ND=0;function xD(o,n,r,u,l){this.listener=o,this.proxy=null,this.src=n,this.type=r,this.capture=!!u,this.ia=l,this.key=++ND,this.ca=this.fa=!1}function Bp(o){o.ca=!0,o.listener=null,o.proxy=null,o.src=null,o.ia=null}function jp(o){this.src=o,this.g={},this.h=0}function yy(o,n){var r=n.type;if(r in o.g){var g,u=o.g[r],l=bh(u,n);(g=0<=l)&&Array.prototype.splice.call(u,l,1),g&&(Bp(n),0==o.g[r].length&&(delete o.g[r],o.h--))}}function Hp(o,n,r,u){for(var l=0;l<o.length;++l){var g=o[l];if(!g.ca&&g.listener==n&&g.capture==!!r&&g.ia==u)return l}return-1}jp.prototype.add=function(o,n,r,u,l){var g=o.toString();(o=this.g[g])||(o=this.g[g]=[],this.h++);var E=Hp(o,n,u,l);return-1<E?(n=o[E],r||(n.fa=!1)):((n=new xD(n,this.src,g,!!u,l)).fa=r,o.push(n)),n};var Rh="closure_lm_"+(1e6*Math.random()|0),$p={};function Gp(o,n,r,u,l){if(u&&u.once)return _y(o,n,r,u,l);if(Array.isArray(n)){for(var g=0;g<n.length;g++)Gp(o,n[g],r,u,l);return null}return r=Iy(r),o&&o[Mh]?o.N(n,r,I(u)?!!u.capture:!!u,l):QE(o,n,r,!1,u,l)}function QE(o,n,r,u,l,g){if(!n)throw Error("Invalid event type");var E=I(l)?!!l.capture:!!l,C=wy(o);if(C||(o[Rh]=C=new jp(o)),(r=C.add(n,r,u,E,g)).proxy)return r;if(u=function(){var n=JE;return function o(r){return n.call(o.src,o.listener,r)}}(),r.proxy=u,u.src=o,u.listener=r,o.addEventListener)gy||(l=E),void 0===l&&(l=!1),o.addEventListener(n.toString(),u,l);else if(o.attachEvent)o.attachEvent(Ey(n.toString()),u);else{if(!o.addListener||!o.removeListener)throw Error("addEventListener and attachEvent are unavailable.");o.addListener(u)}return r}function _y(o,n,r,u,l){if(Array.isArray(n)){for(var g=0;g<n.length;g++)_y(o,n[g],r,u,l);return null}return r=Iy(r),o&&o[Mh]?o.O(n,r,I(u)?!!u.capture:!!u,l):QE(o,n,r,!0,u,l)}function vy(o,n,r,u,l){if(Array.isArray(n))for(var g=0;g<n.length;g++)vy(o,n[g],r,u,l);else u=I(u)?!!u.capture:!!u,r=Iy(r),o&&o[Mh]?(o=o.i,(n=String(n).toString())in o.g&&-1<(r=Hp(g=o.g[n],r,u,l))&&(Bp(g[r]),Array.prototype.splice.call(g,r,1),0==g.length&&(delete o.g[n],o.h--))):o&&(o=wy(o))&&(n=o.g[n.toString()],o=-1,n&&(o=Hp(n,r,u,l)),(r=-1<o?n[o]:null)&&Eo(r))}function Eo(o){if("number"!=typeof o&&o&&!o.ca){var n=o.src;if(n&&n[Mh])yy(n.i,o);else{var r=o.type,u=o.proxy;n.removeEventListener?n.removeEventListener(r,u,o.capture):n.detachEvent?n.detachEvent(Ey(r),u):n.addListener&&n.removeListener&&n.removeListener(u),(r=wy(n))?(yy(r,o),0==r.h&&(r.src=null,n[Rh]=null)):Bp(o)}}}function Ey(o){return o in $p?$p[o]:$p[o]="on"+o}function JE(o,n){if(o.ca)o=!0;else{n=new xh(n,this);var r=o.listener,u=o.ia||o.src;o.fa&&Eo(o),o=r.call(u,n)}return o}function wy(o){return(o=o[Rh])instanceof jp?o:null}var Il="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iy(o){return"function"==typeof o?o:(o[Il]||(o[Il]=function(n){return o.handleEvent(n)}),o[Il])}function Un(){Bt.call(this),this.i=new jp(this),this.P=this,this.I=null}function Jn(o,n){var r,u=o.I;if(u)for(r=[];u;u=u.I)r.push(u);if(o=o.P,u=n.type||n,"string"==typeof n)n=new dr(n,o);else if(n instanceof dr)n.target=n.target||o;else{var l=n;mu(n=new dr(u,o),l)}if(l=!0,r)for(var g=r.length-1;0<=g;g--){var E=n.g=r[g];l=Oh(E,u,!0,n)&&l}if(l=Oh(E=n.g=o,u,!0,n)&&l,l=Oh(E,u,!1,n)&&l,r)for(g=0;g<r.length;g++)l=Oh(E=n.g=r[g],u,!1,n)&&l}function Oh(o,n,r,u){if(!(n=o.i.g[String(n)]))return!0;n=n.concat();for(var l=!0,g=0;g<n.length;++g){var E=n[g];if(E&&!E.ca&&E.capture==r){var C=E.listener,A=E.ia||E.src;E.fa&&yy(o.i,E),l=!1!==C.call(A,u)&&l}}return l&&!u.defaultPrevented}je(Un,Bt),Un.prototype[Mh]=!0,Un.prototype.removeEventListener=function(o,n,r,u){vy(this,o,n,r,u)},Un.prototype.M=function(){if(Un.Z.M.call(this),this.i){var n,o=this.i;for(n in o.g){for(var r=o.g[n],u=0;u<r.length;u++)Bp(r[u]);delete o.g[n],o.h--}}this.I=null},Un.prototype.N=function(o,n,r,u){return this.i.add(String(o),n,!1,r,u)},Un.prototype.O=function(o,n,r,u){return this.i.add(String(o),n,!0,r,u)};var Ph=w.JSON.stringify;function XE(){var o=by;let n=null;return o.g&&(n=o.g,o.g=o.g.next,o.g||(o.h=null),n.next=null),n}var Fh,kh=new class{constructor(o,n){this.i=o,this.j=n,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new e0,o=>o.reset());class e0{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function Dy(o){w.setTimeout(()=>{throw o},0)}function Wp(o,n){Fh||function(){var o=w.Promise.resolve(void 0);Fh=function(){o.then(RD)}}(),Cy||(Fh(),Cy=!0),by.add(o,n)}var Cy=!1,by=new class{constructor(){this.h=this.g=null}add(n,r){const u=kh.get();u.set(n,r),this.h?this.h.next=u:this.g=u,this.h=u}};function RD(){for(var o;o=XE();){try{o.h.call(o.g)}catch(r){Dy(r)}var n=kh;n.j(o),100>n.h&&(n.h++,o.next=n.g,n.g=o)}Cy=!1}function zp(o,n){Un.call(this),this.h=o||1,this.g=n||w,this.j=Pe(this.kb,this),this.l=Date.now()}function Zp(o){o.da=!1,o.S&&(o.g.clearTimeout(o.S),o.S=null)}function Vh(o,n,r){if("function"==typeof o)r&&(o=Pe(o,r));else{if(!o||"function"!=typeof o.handleEvent)throw Error("Invalid listener argument");o=Pe(o.handleEvent,o)}return 2147483647<Number(n)?-1:w.setTimeout(o,n||0)}function Ty(o){o.g=Vh(()=>{o.g=null,o.i&&(o.i=!1,Ty(o))},o.j);const n=o.h;o.h=null,o.m.apply(null,n)}je(zp,Un),(He=zp.prototype).da=!1,He.S=null,He.kb=function(){if(this.da){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-o):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Jn(this,"tick"),this.da&&(Zp(this),this.start()))}},He.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},He.M=function(){zp.Z.M.call(this),Zp(this),delete this.g};class BT extends Bt{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Ty(this)}M(){super.M(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dl(o){Bt.call(this),this.h=o,this.g={}}je(Dl,Bt);var t0=[];function Ay(o,n,r,u){Array.isArray(r)||(r&&(t0[0]=r.toString()),r=t0);for(var l=0;l<r.length;l++){var g=Gp(n,r[l],u||o.handleEvent,!1,o.h||o);if(!g)break;o.g[g.key]=g}}function n0(o){dy(o.g,function(n,r){this.g.hasOwnProperty(r)&&Eo(n)},o),o.g={}}function Kp(){this.g=!0}function vu(o,n,r,u){o.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(o,n){if(!o.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(o=0;o<r.length;o++)if(Array.isArray(r[o])){var u=r[o];if(!(2>u.length)){var l=u[1];if(Array.isArray(l)&&!(1>l.length)){var g=l[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var E=1;E<l.length;E++)l[E]=""}}}return Ph(r)}catch(C){return n}}(o,r)+(u?" "+u:"")})}Dl.prototype.M=function(){Dl.Z.M.call(this),n0(this)},Dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kp.prototype.Aa=function(){this.g=!1},Kp.prototype.info=function(){};var Eu={},r0=null;function Uh(){return r0=r0||new Un}function s0(o){dr.call(this,Eu.Ma,o)}function Bh(o){const n=Uh();Jn(n,new s0(n,o))}function o0(o,n){dr.call(this,Eu.STAT_EVENT,o),this.stat=n}function Ye(o){const n=Uh();Jn(n,new o0(n,o))}function Sy(o,n){dr.call(this,Eu.Na,o),this.size=n}function Cl(o,n){if("function"!=typeof o)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){o()},n)}Eu.Ma="serverreachability",je(s0,dr),Eu.STAT_EVENT="statevent",je(o0,dr),Eu.Na="timingevent",je(Sy,dr);var wu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ci={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Yp(){}function Qp(){}Yp.prototype.h=null;var Hh,ui={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function jh(){dr.call(this,"d")}function Jp(){dr.call(this,"c")}function Ny(){}function bl(o,n,r,u){this.l=o,this.j=n,this.m=r,this.X=u||1,this.V=new Dl(this),this.P=wo,this.W=new zp(o=Di?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new FD}function FD(){this.i=null,this.g="",this.h=!1}je(jh,dr),je(Jp,dr),je(Ny,Yp),Ny.prototype.g=function(){return new XMLHttpRequest},Ny.prototype.i=function(){return{}},Hh=new Ny;var wo=45e3,Tl={},Iu={};function $h(o,n,r){o.K=1,o.v=Zh(ga(n)),o.s=r,o.U=!0,LD(o,null)}function LD(o,n){o.F=Date.now(),Gh(o),o.A=ga(o.v);var r=o.A,u=o.X;Array.isArray(u)||(u=[String(u)]),bu(r.h,"t",u),o.C=0,r=o.l.H,o.h=new FD,o.g=D0(o.l,r?n:null,!o.s),0<o.O&&(o.L=new BT(Pe(o.Ia,o,o.g),o.O)),Ay(o.V,o.g,"readystatechange",o.gb),n=o.H?ZE(o.H):{},o.s?(o.u||(o.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.s,n)):(o.u="GET",o.g.ea(o.A,o.u,null,n)),Bh(1),function(o,n,r,u,l,g){o.info(function(){if(o.g)if(g)for(var E="",C=g.split("&"),A=0;A<C.length;A++){var N=C[A].split("=");if(1<N.length){var O=N[0];N=N[1];var F=O.split("_");E=2<=F.length&&"type"==F[1]?E+(O+"=")+N+"&":E+(O+"=redacted&")}}else E=null;else E=g;return"XMLHTTP REQ ("+u+") [attempt "+l+"]: "+n+"\n"+r+"\n"+E})}(o.j,o.u,o.A,o.m,o.X,o.s)}function u0(o){return!!o.g&&"GET"==o.u&&2!=o.K&&o.l.Ba}function xy(o,n,r){let l,u=!0;for(;!o.I&&o.C<r.length;){if(l=jT(o,r),l==Iu){4==n&&(o.o=4,Ye(14),u=!1),vu(o.j,o.m,null,"[Incomplete Response]");break}if(l==Tl){o.o=4,Ye(15),vu(o.j,o.m,r,"[Invalid Chunk]"),u=!1;break}vu(o.j,o.m,l,null),Wh(o,l)}u0(o)&&l!=Iu&&l!=Tl&&(o.h.g="",o.C=0),4!=n||0!=r.length||o.h.h||(o.o=1,Ye(16),u=!1),o.i=o.i&&u,u?0<r.length&&!o.aa&&(o.aa=!0,(n=o.l).g==o&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Yy(n),n.L=!0,Ye(11))):(vu(o.j,o.m,r,"[Invalid Chunked Response]"),Du(o),Al(o))}function jT(o,n){var r=o.C,u=n.indexOf("\n",r);return-1==u?Iu:(r=Number(n.substring(r,u)),isNaN(r)?Tl:(u+=1)+r>n.length?Iu:(n=n.substr(u,r),o.C=u+r,n))}function Gh(o){o.Y=Date.now()+o.P,VD(o,o.P)}function VD(o,n){if(null!=o.B)throw Error("WatchDog timer not null");o.B=Cl(Pe(o.eb,o),n)}function qh(o){o.B&&(w.clearTimeout(o.B),o.B=null)}function Al(o){0==o.l.G||o.I||rg(o.l,o)}function Du(o){qh(o);var n=o.L;n&&"function"==typeof n.na&&n.na(),o.L=null,Zp(o.W),n0(o.V),o.g&&(n=o.g,o.g=null,n.abort(),n.na())}function Wh(o,n){try{var r=o.l;if(0!=r.G&&(r.g==o||Qh(r.i,o)))if(r.I=o.N,!o.J&&Qh(r.i,o)&&3==r.G){try{var u=r.Ca.g.parse(n)}catch(N){u=null}if(Array.isArray(u)&&3==u.length){var l=u;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=Cl(Pe(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<o.F))break e;Au(r),ci(r)}of(r),Ye(18)}if(1>=Ly(r.i)&&r.ka){try{r.ka()}catch(N){}r.ka=void 0}}else Do(r,11)}else if((o.J||r.g==o)&&Au(r),!Yn(n))for(l=r.Ca.g.parse(n),n=0;n<l.length;n++){let N=l[n];if(r.U=N[0],N=N[1],2==r.G)if("c"==N[0]){r.J=N[1],r.la=N[2];const O=N[3];null!=O&&(r.ma=O,r.h.info("VER="+r.ma));const F=N[4];null!=F&&(r.za=F,r.h.info("SVER="+r.za));const Q=N[5];null!=Q&&"number"==typeof Q&&0<Q&&(r.K=u=1.5*Q,r.h.info("backChannelRequestTimeoutMs_="+u)),u=r;const ie=o.g;if(ie){const Ie=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ie){var g=u.i;!g.g&&(Vn(Ie,"spdy")||Vn(Ie,"quic")||Vn(Ie,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Jh(g,g.h),g.h=null))}if(u.D){const Be=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(u.sa=Be,un(u.F,u.D,Be))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-o.F,r.h.info("Handshake RTT: "+r.O+"ms"));var E=o;if((u=r).oa=Qy(u,u.H?u.la:null,u.W),E.J){Vy(u.i,E);var C=E,A=u.K;A&&C.setTimeout(A),C.B&&(qh(C),Gh(C)),u.g=E}else E0(u);0<r.l.length&&ng(r)}else"stop"!=N[0]&&"close"!=N[0]||Do(r,7);else 3==r.G&&("stop"==N[0]||"close"==N[0]?"stop"==N[0]?Do(r,7):zy(r):"noop"!=N[0]&&r.j&&r.j.wa(N),r.A=0)}Bh(4)}catch(N){}}function c0(o,n){if(o.forEach&&"function"==typeof o.forEach)o.forEach(n,void 0);else if(m(o)||"string"==typeof o)_l(o,n,void 0);else{if(o.T&&"function"==typeof o.T)var r=o.T();else if(o.R&&"function"==typeof o.R)r=void 0;else if(m(o)||"string"==typeof o){r=[];for(var u=o.length,l=0;l<u;l++)r.push(l)}else for(l in r=[],u=0,o)r[u++]=l;l=(u=function(o){if(o.R&&"function"==typeof o.R)return o.R();if("string"==typeof o)return o.split("");if(m(o)){for(var n=[],r=o.length,u=0;u<r;u++)n.push(o[u]);return n}for(u in n=[],r=0,o)n[r++]=o[u];return n}(o)).length;for(var g=0;g<l;g++)n.call(void 0,u[g],r&&r[g],o)}}function zh(o,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var u=0;u<r;u+=2)this.set(arguments[u],arguments[u+1])}else if(o)if(o instanceof zh)for(r=o.T(),u=0;u<r.length;u++)this.set(r[u],o.get(r[u]));else for(u in o)this.set(u,o[u])}function l0(o){if(o.i!=o.g.length){for(var n=0,r=0;n<o.g.length;){var u=o.g[n];Sl(o.h,u)&&(o.g[r++]=u),n++}o.g.length=r}if(o.i!=o.g.length){var l={};for(r=n=0;n<o.g.length;)Sl(l,u=o.g[n])||(o.g[r++]=u,l[u]=1),n++;o.g.length=r}}function Sl(o,n){return Object.prototype.hasOwnProperty.call(o,n)}(He=bl.prototype).setTimeout=function(o){this.P=o},He.gb=function(o){o=o.target;const n=this.L;n&&3==Io(o)?n.l():this.Ia(o)},He.Ia=function(o){try{if(o==this.g)e:{const O=Io(this.g);var n=this.g.Da();const F=this.g.ba();if(!(3>O)&&(3!=O||Di||this.g&&(this.h.h||this.g.ga()||Gy(this.g)))){this.I||4!=O||7==n||Bh(8==n||0>=F?3:2),qh(this);var r=this.g.ba();this.N=r;t:if(u0(this)){var u=Gy(this.g);o="";var l=u.length,g=4==Io(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Du(this),Al(this);var E="";break t}this.h.i=new w.TextDecoder}for(n=0;n<l;n++)this.h.h=!0,o+=this.h.i.decode(u[n],{stream:g&&n==l-1});u.splice(0,l),this.h.g+=o,this.C=0,E=this.h.g}else E=this.g.ga();if(this.i=200==r,function(o,n,r,u,l,g,E){o.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+l+"]: "+n+"\n"+r+"\n"+g+" "+E})}(this.j,this.u,this.A,this.m,this.X,O,r),this.i){if(this.$&&!this.J){t:{if(this.g){var C,A=this.g;if((C=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yn(C)){var N=C;break t}}N=null}if(!(r=N)){this.i=!1,this.o=3,Ye(12),Du(this),Al(this);break e}vu(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Wh(this,r)}this.U?(xy(this,O,E),Di&&this.i&&3==O&&(Ay(this.V,this.W,"tick",this.fb),this.W.start())):(vu(this.j,this.m,E,null),Wh(this,E)),4==O&&Du(this),this.i&&!this.I&&(4==O?rg(this.l,this):(this.i=!1,Gh(this)))}else 400==r&&0<E.indexOf("Unknown SID")?(this.o=3,Ye(12)):(this.o=0,Ye(13)),Du(this),Al(this)}}}catch(O){}},He.fb=function(){if(this.g){var o=Io(this.g),n=this.g.ga();this.C<n.length&&(qh(this),xy(this,o,n),this.i&&4!=o&&Gh(this))}},He.cancel=function(){this.I=!0,Du(this)},He.eb=function(){this.B=null;const o=Date.now();0<=o-this.Y?(function(o,n){o.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(Bh(3),Ye(17)),Du(this),this.o=2,Al(this)):VD(this,this.Y-o)},(He=zh.prototype).R=function(){l0(this);for(var o=[],n=0;n<this.g.length;n++)o.push(this.h[this.g[n]]);return o},He.T=function(){return l0(this),this.g.concat()},He.get=function(o,n){return Sl(this.h,o)?this.h[o]:n},He.set=function(o,n){Sl(this.h,o)||(this.i++,this.g.push(o)),this.h[o]=n},He.forEach=function(o,n){for(var r=this.T(),u=0;u<r.length;u++){var l=r[u],g=this.get(l);o.call(n,g,l,this)}};var UD=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nl(o,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,o instanceof Nl){this.g=void 0!==n?n:o.g,My(this,o.j),this.s=o.s,Ry(this,o.i),Ji(this,o.m),this.l=o.l,n=o.h;var r=new xl;r.i=n.i,n.g&&(r.g=new zh(n.g),r.h=n.h),Xp(this,r),this.o=o.o}else o&&(r=String(o).match(UD))?(this.g=!!n,My(this,r[1]||"",!0),this.s=Cu(r[2]||""),Ry(this,r[3]||"",!0),Ji(this,r[4]),this.l=Cu(r[5]||"",!0),Xp(this,r[6]||"",!0),this.o=Cu(r[7]||"")):(this.g=!!n,this.h=new xl(null,this.g))}function ga(o){return new Nl(o)}function My(o,n,r){o.j=r?Cu(n,!0):n,o.j&&(o.j=o.j.replace(/:$/,""))}function Ry(o,n,r){o.i=r?Cu(n,!0):n}function Ji(o,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);o.m=n}else o.m=null}function Xp(o,n,r){n instanceof xl?(o.h=n,function(o,n){n&&!o.j&&(ya(o),o.i=null,o.g.forEach(function(r,u){var l=u.toLowerCase();u!=l&&(h0(this,u),bu(this,l,r))},o)),o.j=n}(o.h,o.g)):(r||(n=Kh(n,ky)),o.h=new xl(n,o.g))}function un(o,n,r){o.h.set(n,r)}function Zh(o){return un(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Cu(o,n){return o?n?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Kh(o,n,r){return"string"==typeof o?(o=encodeURI(o).replace(n,ma),r&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ma(o){return"%"+((o=o.charCodeAt(0))>>4&15).toString(16)+(15&o).toString(16)}Nl.prototype.toString=function(){var o=[],n=this.j;n&&o.push(Kh(n,Py,!0),":");var r=this.i;return(r||"file"==n)&&(o.push("//"),(n=this.s)&&o.push(Kh(n,Py,!0),"@"),o.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&o.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&o.push("/"),o.push(Kh(r,"/"==r.charAt(0)?GT:BD,!0))),(r=this.h.toString())&&o.push("?",r),(r=this.o)&&o.push("#",Kh(r,jD)),o.join("")};var Py=/[#\/\?@]/g,BD=/[#\?:]/g,GT=/[#\?]/g,ky=/[#\?@]/g,jD=/#/g;function xl(o,n){this.h=this.g=null,this.i=o||null,this.j=!!n}function ya(o){o.g||(o.g=new zh,o.h=0,o.i&&function(o,n){if(o){o=o.split("&");for(var r=0;r<o.length;r++){var u=o[r].indexOf("="),l=null;if(0<=u){var g=o[r].substring(0,u);l=o[r].substring(u+1)}else g=o[r];n(g,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(o.i,function(n,r){o.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function h0(o,n){ya(o),n=_a(o,n),Sl(o.g.h,n)&&(o.i=null,o.h-=o.g.get(n).length,Sl((o=o.g).h,n)&&(delete o.h[n],o.i--,o.g.length>2*o.i&&l0(o)))}function Ml(o,n){return ya(o),n=_a(o,n),Sl(o.g.h,n)}function bu(o,n,r){h0(o,n),0<r.length&&(o.i=null,o.g.set(_a(o,n),Ms(r)),o.h+=r.length)}function _a(o,n){return n=String(n),o.j&&(n=n.toLowerCase()),n}function Tu(o){this.l=o||HD,o=w.PerformanceNavigationTiming?0<(o=w.performance.getEntriesByType("navigation")).length&&("hq"==o[0].nextHopProtocol||"h2"==o[0].nextHopProtocol):!!(w.g&&w.g.Ea&&w.g.Ea()&&w.g.Ea().Zb),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(He=xl.prototype).add=function(o,n){ya(this),this.i=null,o=_a(this,o);var r=this.g.get(o);return r||this.g.set(o,r=[]),r.push(n),this.h+=1,this},He.forEach=function(o,n){ya(this),this.g.forEach(function(r,u){_l(r,function(l){o.call(n,l,u,this)},this)},this)},He.T=function(){ya(this);for(var o=this.g.R(),n=this.g.T(),r=[],u=0;u<n.length;u++)for(var l=o[u],g=0;g<l.length;g++)r.push(n[u]);return r},He.R=function(o){ya(this);var n=[];if("string"==typeof o)Ml(this,o)&&(n=Th(n,this.g.get(_a(this,o))));else{o=this.g.R();for(var r=0;r<o.length;r++)n=Th(n,o[r])}return n},He.set=function(o,n){return ya(this),this.i=null,Ml(this,o=_a(this,o))&&(this.h-=this.g.get(o).length),this.g.set(o,[n]),this.h+=1,this},He.get=function(o,n){return o&&0<(o=this.R(o)).length?String(o[0]):n},He.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var o=[],n=this.g.T(),r=0;r<n.length;r++){var u=n[r],l=encodeURIComponent(String(u));u=this.R(u);for(var g=0;g<u.length;g++){var E=l;""!==u[g]&&(E+="="+encodeURIComponent(String(u[g]))),o.push(E)}}return this.i=o.join("&")};var HD=10;function Fy(o){return!!o.h||!!o.g&&o.g.size>=o.j}function Ly(o){return o.h?1:o.g?o.g.size:0}function Qh(o,n){return o.h?o.h==n:!!o.g&&o.g.has(n)}function Jh(o,n){o.g?o.g.add(n):o.h=n}function Vy(o,n){o.h&&o.h==n?o.h=null:o.g&&o.g.has(n)&&o.g.delete(n)}function Xh(o){if(null!=o.h)return o.i.concat(o.h.D);if(null!=o.g&&0!==o.g.size){let n=o.i;for(const r of o.g.values())n=n.concat(r.D);return n}return Ms(o.i)}function Uy(){}function f0(){this.g=new Uy}function qT(o,n,r){const u=r||"";try{c0(o,function(l,g){let E=l;I(l)&&(E=Ph(l)),n.push(u+g+"="+encodeURIComponent(E))})}catch(l){throw n.push(u+"type="+encodeURIComponent("_badmap")),l}}function ef(o,n,r,u,l){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,l(u)}catch(g){}}function tf(o){this.l=o.$b||null,this.j=o.ib||!1}function nf(o,n){Un.call(this),this.D=o,this.u=n,this.m=void 0,this.readyState=By,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tu.prototype.cancel=function(){if(this.i=Xh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const o of this.g.values())o.cancel();this.g.clear()}},Uy.prototype.stringify=function(o){return w.JSON.stringify(o,void 0)},Uy.prototype.parse=function(o){return w.JSON.parse(o,void 0)},je(tf,Yp),tf.prototype.g=function(){return new nf(this.l,this.j)},tf.prototype.i=function(o){return function(){return o}}({}),je(nf,Un);var By=0;function g0(o){o.j.read().then(o.Sa.bind(o)).catch(o.ha.bind(o))}function hr(o){o.readyState=4,o.l=null,o.j=null,o.A=null,rf(o)}function rf(o){o.onreadystatechange&&o.onreadystatechange.call(o)}(He=nf.prototype).open=function(o,n){if(this.readyState!=By)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=n,this.readyState=1,rf(this)},He.send=function(o){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(n.body=o),(this.D||w).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},He.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hr(this)),this.readyState=By},He.Va=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,rf(this)),this.g&&(this.readyState=3,rf(this),this.g)))if("arraybuffer"===this.responseType)o.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==w.ReadableStream&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;g0(this)}else o.text().then(this.Ua.bind(this),this.ha.bind(this))},He.Sa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var n=o.value?o.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!o.done}))&&(this.response=this.responseText+=n)}o.done?hr(this):rf(this),3==this.readyState&&g0(this)}},He.Ua=function(o){this.g&&(this.response=this.responseText=o,hr(this))},He.Ta=function(o){this.g&&(this.response=o,hr(this))},He.ha=function(){this.g&&hr(this)},He.setRequestHeader=function(o,n){this.v.append(o,n)},He.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},He.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],n=this.h.entries();for(var r=n.next();!r.done;)o.push((r=r.value)[0]+": "+r[1]),r=n.next();return o.join("\r\n")},Object.defineProperty(nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(o){this.m=o?"include":"same-origin"}});var $D=w.JSON.parse;function Bn(o){Un.call(this),this.headers=new zh,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GD,this.K=this.L=!1}je(Bn,Un);var GD="",m0=/^https?$/i,WT=["POST","PUT"];function jy(o){return"content-type"==o.toLowerCase()}function Hy(o,n){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=n,o.m=5,y0(o),eg(o)}function y0(o){o.D||(o.D=!0,Jn(o,"complete"),Jn(o,"error"))}function _0(o){if(o.h&&void 0!==Ch&&(!o.C[1]||4!=Io(o)||2!=o.ba()))if(o.v&&4==Io(o))Vh(o.Fa,0,o);else if(Jn(o,"readystatechange"),4==Io(o)){o.h=!1;try{const C=o.ba();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var u;if(u=0===C){var l=String(o.H).match(UD)[1]||null;if(!l&&w.self&&w.self.location){var g=w.self.location.protocol;l=g.substr(0,g.length-1)}u=!m0.test(l?l.toLowerCase():"")}r=u}if(r)Jn(o,"complete"),Jn(o,"success");else{o.m=6;try{var E=2<Io(o)?o.g.statusText:""}catch(A){E=""}o.j=E+" ["+o.ba()+"]",y0(o)}}finally{eg(o)}}}function eg(o,n){if(o.g){$y(o);const r=o.g,u=o.C[0]?f:null;o.g=null,o.C=null,n||Jn(o,"ready");try{r.onreadystatechange=u}catch(l){}}}function $y(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(w.clearTimeout(o.A),o.A=null)}function Io(o){return o.g?o.g.readyState:0}function Gy(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case GD:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch(n){return null}}function qy(o,n,r){e:{for(u in r){var u=!1;break e}u=!0}u||(r=function(o){let n="";return dy(o,function(r,u){n+=u,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof o?null!=r&&encodeURIComponent(String(r)):un(o,n,r))}function Ol(o,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[o]||n}function Wy(o){this.za=0,this.l=[],this.h=new Kp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ol("failFast",!1,o),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ol("baseRetryDelayMs",5e3,o),this.$a=Ol("retryDelaySeedMs",1e4,o),this.Ya=Ol("forwardChannelMaxRetries",2,o),this.ra=Ol("forwardChannelRequestTimeoutMs",2e4,o),this.qa=o&&o.xmlHttpFactory||void 0,this.Ba=o&&o.Yb||!1,this.K=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.J="",this.i=new Tu(o&&o.concurrentRequestLimit),this.Ca=new f0,this.ja=o&&o.fastHandshake||!1,this.Ra=o&&o.Wb||!1,o&&o.Aa&&this.h.Aa(),o&&o.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&o&&o.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!o||!1!==o.Xb}function zy(o){if(tg(o),3==o.G){var n=o.V++,r=ga(o.F);un(r,"SID",o.J),un(r,"RID",n),un(r,"TYPE","terminate"),sf(o,r),(n=new bl(o,o.h,n,void 0)).K=2,n.v=Zh(ga(r)),r=!1,w.navigator&&w.navigator.sendBeacon&&(r=w.navigator.sendBeacon(n.v.toString(),"")),!r&&w.Image&&((new Image).src=n.v,r=!0),r||(n.g=D0(n.l,null),n.g.ea(n.v)),n.F=Date.now(),Gh(n)}ig(o)}function ci(o){o.g&&(Yy(o),o.g.cancel(),o.g=null)}function tg(o){ci(o),o.u&&(w.clearTimeout(o.u),o.u=null),Au(o),o.i.cancel(),o.m&&("number"==typeof o.m&&w.clearTimeout(o.m),o.m=null)}function Zy(o,n){o.l.push(new class{constructor(o,n){this.h=o,this.g=n}}(o.Za++,n)),3==o.G&&ng(o)}function ng(o){Fy(o.i)||o.m||(o.m=!0,Wp(o.Ha,o),o.C=0)}function Ky(o,n){var r;r=n?n.m:o.V++;const u=ga(o.F);un(u,"SID",o.J),un(u,"RID",r),un(u,"AID",o.U),sf(o,u),o.o&&o.s&&qy(u,o.o,o.s),r=new bl(o,o.h,r,o.C+1),null===o.o&&(r.H=o.s),n&&(o.l=n.D.concat(o.l)),n=v0(o,r,1e3),r.setTimeout(Math.round(.5*o.ra)+Math.round(.5*o.ra*Math.random())),Jh(o.i,r),$h(r,u,n)}function sf(o,n){o.j&&c0({},function(r,u){un(n,u,r)})}function v0(o,n,r){r=Math.min(o.l.length,r);var u=o.j?Pe(o.j.Oa,o.j,o):null;e:{var l=o.l;let g=-1;for(;;){const E=["count="+r];-1==g?0<r?(g=l[0].h,E.push("ofs="+g)):g=0:E.push("ofs="+g);let C=!0;for(let A=0;A<r;A++){let N=l[A].h;const O=l[A].g;if(N-=g,0>N)g=Math.max(0,l[A].h-100),C=!1;else try{qT(O,E,"req"+N+"_")}catch(F){u&&u(O)}}if(C){u=E.join("&");break e}}}return o=o.l.splice(0,r),n.D=o,u}function E0(o){o.g||o.u||(o.Y=1,Wp(o.Ga,o),o.A=0)}function of(o){return!(o.g||o.u||3<=o.A||(o.Y++,o.u=Cl(Pe(o.Ga,o),I0(o,o.A)),o.A++,0))}function Yy(o){null!=o.B&&(w.clearTimeout(o.B),o.B=null)}function w0(o){o.g=new bl(o,o.h,"rpc",o.Y),null===o.o&&(o.g.H=o.s),o.g.O=0;var n=ga(o.oa);un(n,"RID","rpc"),un(n,"SID",o.J),un(n,"CI",o.N?"0":"1"),un(n,"AID",o.U),sf(o,n),un(n,"TYPE","xmlhttp"),o.o&&o.s&&qy(n,o.o,o.s),o.K&&o.g.setTimeout(o.K);var r=o.g;o=o.la,r.K=1,r.v=Zh(ga(n)),r.s=null,r.U=!0,LD(r,o)}function Au(o){null!=o.v&&(w.clearTimeout(o.v),o.v=null)}function rg(o,n){var r=null;if(o.g==n){Au(o),Yy(o),o.g=null;var u=2}else{if(!Qh(o.i,n))return;r=n.D,Vy(o.i,n),u=1}if(o.I=n.N,0!=o.G)if(n.i)if(1==u){r=n.s?n.s.length:0,n=Date.now()-n.F;var l=o.C;Jn(u=Uh(),new Sy(u,r,n,l)),ng(o)}else E0(o);else if(3==(l=n.o)||0==l&&0<o.I||!(1==u&&function(o,n){return!(Ly(o.i)>=o.i.j-(o.m?1:0)||(o.m?(o.l=n.D.concat(o.l),0):1==o.G||2==o.G||o.C>=(o.Xa?0:o.Ya)||(o.m=Cl(Pe(o.Ha,o,n),I0(o,o.C)),o.C++,0)))}(o,n)||2==u&&of(o)))switch(r&&0<r.length&&(n=o.i,n.i=n.i.concat(r)),l){case 1:Do(o,5);break;case 4:Do(o,10);break;case 3:Do(o,6);break;default:Do(o,2)}}function I0(o,n){let r=o.Pa+Math.floor(Math.random()*o.$a);return o.j||(r*=2),r*n}function Do(o,n){if(o.h.info("Error code "+n),2==n){var r=null;o.j&&(r=null);var u=Pe(o.jb,o);r||(r=new Nl("//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||My(r,"https"),Zh(r)),function(o,n){const r=new Kp;if(w.Image){const u=new Image;u.onload=et(ef,r,u,"TestLoadImage: loaded",!0,n),u.onerror=et(ef,r,u,"TestLoadImage: error",!1,n),u.onabort=et(ef,r,u,"TestLoadImage: abort",!1,n),u.ontimeout=et(ef,r,u,"TestLoadImage: timeout",!1,n),w.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=o}else n(!1)}(r.toString(),u)}else Ye(2);o.G=0,o.j&&o.j.va(n),ig(o),tg(o)}function ig(o){o.G=0,o.I=-1,o.j&&((0!=Xh(o.i).length||0!=o.l.length)&&(o.i.i.length=0,Ms(o.l),o.l.length=0),o.j.ua())}function Qy(o,n,r){let u=function(o){return o instanceof Nl?ga(o):new Nl(o,void 0)}(r);if(""!=u.i)n&&Ry(u,n+"."+u.i),Ji(u,u.m);else{const l=w.location;u=function(o,n,r,u){var l=new Nl(null,void 0);return o&&My(l,o),n&&Ry(l,n),r&&Ji(l,r),u&&(l.l=u),l}(l.protocol,n?n+"."+l.hostname:l.hostname,+l.port,r)}return o.aa&&dy(o.aa,function(l,g){un(u,g,l)}),r=o.sa,(n=o.D)&&r&&un(u,n,r),un(u,"VER",o.ma),sf(o,u),u}function D0(o,n,r){if(n&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Bn(r&&o.Ba&&!o.qa?new tf({ib:!0}):o.qa)).L=o.H,n}function C0(){}function Pl(){if(yu&&!(10<=Number(wl)))throw Error("Environmental error: no available transport.")}function bi(o,n){Un.call(this),this.g=new Wy(n),this.l=o,this.h=n&&n.messageUrlParams||null,o=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(o?o["X-WebChannel-Content-Type"]=n.messageContentType:o={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(o?o["X-WebChannel-Client-Profile"]=n.ya:o={"X-WebChannel-Client-Profile":n.ya}),this.g.P=o,(o=n&&n.httpHeadersOverwriteParam)&&!Yn(o)&&(this.g.o=o),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!Yn(n)&&(this.g.D=n,null!==(o=this.h)&&n in o&&n in(o=this.h)&&delete o[n]),this.j=new Su(this)}function b0(o){jh.call(this);var n=o.__sm__;if(n){e:{for(const r in n){o=r;break e}o=void 0}(this.i=o)&&(o=this.i,n=null!==n&&o in n?n[o]:void 0),this.data=n}else this.data=o}function Jy(){Jp.call(this),this.status=1}function Su(o){this.g=o}(He=Bn.prototype).ea=function(o,n,r,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);n=n?n.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Hh.g(),this.C=function(o){return o.h||(o.h=o.i())}(this.u?this.u:Hh),this.g.onreadystatechange=Pe(this.Fa,this);try{this.F=!0,this.g.open(n,String(o),!0),this.F=!1}catch(g){return void Hy(this,g)}o=r||"";const l=new zh(this.headers);u&&c0(u,function(g,E){l.set(E,g)}),u=function(o){e:{var n=jy;const r=o.length,u="string"==typeof o?o.split(""):o;for(let l=0;l<r;l++)if(l in u&&n.call(void 0,u[l],l,o)){n=l;break e}n=-1}return 0>n?null:"string"==typeof o?o.charAt(n):o[n]}(l.T()),r=w.FormData&&o instanceof w.FormData,!(0<=bh(WT,n))||u||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(g,E){this.g.setRequestHeader(E,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$y(this),0<this.B&&((this.K=function(o){return yu&&py()&&"number"==typeof o.timeout&&void 0!==o.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pe(this.pa,this)):this.A=Vh(this.pa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(g){Hy(this,g)}},He.pa=function(){void 0!==Ch&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jn(this,"timeout"),this.abort(8))},He.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,Jn(this,"complete"),Jn(this,"abort"),eg(this))},He.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eg(this,!0)),Bn.Z.M.call(this)},He.Fa=function(){this.s||(this.F||this.v||this.l?_0(this):this.cb())},He.cb=function(){_0(this)},He.ba=function(){try{return 2<Io(this)?this.g.status:-1}catch(o){return-1}},He.ga=function(){try{return this.g?this.g.responseText:""}catch(o){return""}},He.Qa=function(o){if(this.g){var n=this.g.responseText;return o&&0==n.indexOf(o)&&(n=n.substring(o.length)),$D(n)}},He.Da=function(){return this.m},He.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(He=Wy.prototype).ma=8,He.G=1,He.hb=function(o){try{this.h.info("Origin Trials invoked: "+o)}catch(n){}},He.Ha=function(o){if(this.m)if(this.m=null,1==this.G){if(!o){this.V=Math.floor(1e5*Math.random()),o=this.V++;const l=new bl(this,this.h,o,void 0);let g=this.s;if(this.P&&(g?(g=ZE(g),mu(g,this.P)):g=this.P),null===this.o&&(l.H=g),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var u=this.l[r];if(void 0===(u="__data__"in u.g&&"string"==typeof(u=u.g.__data__)?u.length:void 0))break;if(4096<(n+=u)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=v0(this,l,n),un(r=ga(this.F),"RID",o),un(r,"CVER",22),this.D&&un(r,"X-HTTP-Session-Id",this.D),sf(this,r),this.o&&g&&qy(r,this.o,g),Jh(this.i,l),this.Ra&&un(r,"TYPE","init"),this.ja?(un(r,"$req",n),un(r,"SID","null"),l.$=!0,$h(l,r,null)):$h(l,r,n),this.G=2}}else 3==this.G&&(o?Ky(this,o):0==this.l.length||Fy(this.i)||Ky(this))},He.Ga=function(){if(this.u=null,w0(this),this.$&&!(this.L||null==this.g||0>=this.O)){var o=2*this.O;this.h.info("BP detection timer enabled: "+o),this.B=Cl(Pe(this.bb,this),o)}},He.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ye(10),ci(this),w0(this))},He.ab=function(){null!=this.v&&(this.v=null,ci(this),of(this),Ye(19))},He.jb=function(o){o?(this.h.info("Successfully pinged google.com"),Ye(2)):(this.h.info("Failed to ping google.com"),Ye(1))},(He=C0.prototype).xa=function(){},He.wa=function(){},He.va=function(){},He.ua=function(){},He.Oa=function(){},Pl.prototype.g=function(o,n){return new bi(o,n)},je(bi,Un),bi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var o=this.g,n=this.l,r=this.h||void 0;o.Wa&&(o.h.info("Origin Trials enabled."),Wp(Pe(o.hb,o,n))),Ye(0),o.W=n,o.aa=r||{},o.N=o.X,o.F=Qy(o,null,o.W),ng(o)},bi.prototype.close=function(){zy(this.g)},bi.prototype.u=function(o){if("string"==typeof o){var n={};n.__data__=o,Zy(this.g,n)}else this.v?((n={}).__data__=Ph(o),Zy(this.g,n)):Zy(this.g,o)},bi.prototype.M=function(){this.g.j=null,delete this.j,zy(this.g),delete this.g,bi.Z.M.call(this)},je(b0,jh),je(Jy,Jp),je(Su,C0),Su.prototype.xa=function(){Jn(this.g,"a")},Su.prototype.wa=function(o){Jn(this.g,new b0(o))},Su.prototype.va=function(o){Jn(this.g,new Jy(o))},Su.prototype.ua=function(){Jn(this.g,"b")},Pl.prototype.createWebChannel=Pl.prototype.g,bi.prototype.send=bi.prototype.u,bi.prototype.open=bi.prototype.m,bi.prototype.close=bi.prototype.close,wu.NO_ERROR=0,wu.TIMEOUT=8,wu.HTTP_ERROR=6,Ci.COMPLETE="complete",Qp.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",Un.prototype.listen=Un.prototype.N,Bn.prototype.listenOnce=Bn.prototype.O,Bn.prototype.getLastError=Bn.prototype.La,Bn.prototype.getLastErrorCode=Bn.prototype.Da,Bn.prototype.getStatus=Bn.prototype.ba,Bn.prototype.getResponseJson=Bn.prototype.Qa,Bn.prototype.getResponseText=Bn.prototype.ga,Bn.prototype.send=Bn.prototype.ea;var T0=Yi.createWebChannelTransport=function(){return new Pl},A0=Yi.getStatEventTarget=function(){return Uh()},sg=Yi.ErrorCode=wu,Co=Yi.EventType=Ci,og=Yi.Event=Eu,S0=Yi.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zD=Yi.FetchXmlHttpFactory=tf,Xy=Yi.WebChannel=Qp,kl=Yi.XhrIo=Bn;class Xn{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Xn.UNAUTHENTICATED=new Xn(null),Xn.GOOGLE_CREDENTIALS=new Xn("google-credentials-uid"),Xn.FIRST_PARTY=new Xn("first-party-uid"),Xn.MOCK_USER=new Xn("mock-user");let Rs="9.1.0";const Ti=new xs.Yd("@firebase/firestore");function e_(){return Ti.logLevel}function Me(o,...n){if(Ti.logLevel<=xs.in.DEBUG){const r=n.map(n_);Ti.debug(`Firestore (${Rs}): ${o}`,...r)}}function xn(o,...n){if(Ti.logLevel<=xs.in.ERROR){const r=n.map(n_);Ti.error(`Firestore (${Rs}): ${o}`,...r)}}function Fl(o,...n){if(Ti.logLevel<=xs.in.WARN){const r=n.map(n_);Ti.warn(`Firestore (${Rs}): ${o}`,...r)}}function n_(o){if("string"==typeof o)return o;try{return JSON.stringify(o)}catch(r){return o}}function ze(o="Unexpected state"){const n=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+o;throw xn(n),new Error(n)}function ct(o,n){o||ze()}function Fe(o,n){return o}const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class er{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class N0{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class Ll{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Xn.UNAUTHENTICATED))}shutdown(){}}class KD{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class YD{constructor(n){this.t=n,this.currentUser=Xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var u=this;let l=this.i;const g=N=>this.i!==l?(l=this.i,r(N)):Promise.resolve();let E=new er;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new er,n.enqueueRetryable(()=>g(this.currentUser))};const C=()=>{const N=E;n.enqueueRetryable((0,ne.Z)(function*(){yield N.promise,yield g(u.currentUser)}))},A=N=>{Me("FirebaseCredentialsProvider","Auth detected"),this.auth=N,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(N=>A(N)),setTimeout(()=>{if(!this.auth){const N=this.t.getImmediate({optional:!0});N?A(N):(Me("FirebaseCredentialsProvider","Auth not yet detected"),E.resolve(),E=new er)}},0),C()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(u=>this.i!==n?(Me("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):u?(ct("string"==typeof u.accessToken),new N0(u.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return ct(null===n||"string"==typeof n),new Xn(n)}}class QD{constructor(n,r,u){this.h=n,this.l=r,this.m=u,this.type="FirstParty",this.user=Xn.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class JD{constructor(n,r,u){this.h=n,this.l=r,this.m=u}getToken(){return Promise.resolve(new QD(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Xn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ai{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=u=>this.g(u),this.p=u=>r.writeSequenceNumber(u))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function XD(o){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(o);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let u=0;u<o;u++)r[u]=Math.floor(256*Math.random());return r}Ai.T=-1;class r_{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let u="";for(;u.length<20;){const l=XD(40);for(let g=0;g<l.length;++g)u.length<20&&l[g]<r&&(u+=n.charAt(l[g]%n.length))}return u}}function Qe(o,n){return o<n?-1:o>n?1:0}function va(o,n,r){return o.length===n.length&&o.every((u,l)=>r(u,n[l]))}function eC(o){return o+"\0"}class Qt{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Se(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Se(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Se(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Se(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Qt.fromMillis(Date.now())}static fromDate(n){return Qt.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),u=Math.floor(1e6*(n-1e3*r));return new Qt(r,u)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?Qe(this.nanoseconds,n.nanoseconds):Qe(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(n){this.timestamp=n}static fromTimestamp(n){return new mt(n)}static min(){return new mt(new Qt(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ag(o){let n=0;for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&n++;return n}function Vl(o,n){for(const r in o)Object.prototype.hasOwnProperty.call(o,r)&&n(r,o[r])}function x0(o){for(const n in o)if(Object.prototype.hasOwnProperty.call(o,n))return!1;return!0}class af{constructor(n,r,u){void 0===r?r=0:r>n.length&&ze(),void 0===u?u=n.length-r:u>n.length-r&&ze(),this.segments=n,this.offset=r,this.len=u}get length(){return this.len}isEqual(n){return 0===af.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof af?n.forEach(u=>{r.push(u)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,u=this.limit();r<u;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const u=Math.min(n.length,r.length);for(let l=0;l<u;l++){const g=n.get(l),E=r.get(l);if(g<E)return-1;if(g>E)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class Mt extends af{construct(n,r,u){return new Mt(n,r,u)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const u of n){if(u.indexOf("//")>=0)throw new Se(re.INVALID_ARGUMENT,`Invalid segment (${u}). Paths must not contain // in them.`);r.push(...u.split("/").filter(l=>l.length>0))}return new Mt(r)}static emptyPath(){return new Mt([])}}const M0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends af{construct(n,r,u){return new tr(n,r,u)}static isValidIdentifier(n){return M0.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new tr(["__name__"])}static fromServerFormat(n){const r=[];let u="",l=0;const g=()=>{if(0===u.length)throw new Se(re.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(u),u=""};let E=!1;for(;l<n.length;){const C=n[l];if("\\"===C){if(l+1===n.length)throw new Se(re.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const A=n[l+1];if("\\"!==A&&"."!==A&&"`"!==A)throw new Se(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);u+=A,l+=2}else"`"===C?(E=!E,l++):"."!==C||E?(u+=C,l++):(g(),l++)}if(g(),E)throw new Se(re.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new tr(r)}static emptyPath(){return new tr([])}}class Nu{constructor(n){this.fields=n,n.sort(tr.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return va(this.fields,n.fields,(r,u)=>r.isEqual(u))}}class nr{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new nr(r)}static fromUint8Array(n){const r=function(u){let l="";for(let g=0;g<u.length;++g)l+=String.fromCharCode(u[g]);return l}(n);return new nr(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let u=0;u<n.length;u++)r[u]=n.charCodeAt(u);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return Qe(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}nr.EMPTY_BYTE_STRING=new nr("");const uf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(o){if(ct(!!o),"string"==typeof o){let n=0;const r=uf.exec(o);if(ct(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),n=Number(l)}const u=new Date(o);return{seconds:Math.floor(u.getTime()/1e3),nanos:n}}return{seconds:Tn(o.seconds),nanos:Tn(o.nanos)}}function Tn(o){return"number"==typeof o?o:"string"==typeof o?Number(o):0}function xu(o){return"string"==typeof o?nr.fromBase64String(o):nr.fromUint8Array(o)}function ug(o){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==o?void 0:o.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function i_(o){const n=o.mapValue.fields.__previous_value__;return ug(n)?i_(n):n}function cf(o){const n=Os(o.mapValue.fields.__local_write_time__.timestampValue);return new Qt(n.seconds,n.nanos)}function Mu(o){return null==o}function cg(o){return 0===o&&1/o==-1/0}function R0(o){return"number"==typeof o&&Number.isInteger(o)&&!cg(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}class Ze{constructor(n){this.path=n}static fromPath(n){return new Ze(Mt.fromString(n))}static fromName(n){return new Ze(Mt.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===Mt.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return Mt.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Ze(new Mt(n.slice()))}}function Ul(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?ug(o)?4:10:ze()}function Xi(o,n){const r=Ul(o);if(r!==Ul(n))return!1;switch(r){case 0:return!0;case 1:return o.booleanValue===n.booleanValue;case 4:return cf(o).isEqual(cf(n));case 3:return function(u,l){if("string"==typeof u.timestampValue&&"string"==typeof l.timestampValue&&u.timestampValue.length===l.timestampValue.length)return u.timestampValue===l.timestampValue;const g=Os(u.timestampValue),E=Os(l.timestampValue);return g.seconds===E.seconds&&g.nanos===E.nanos}(o,n);case 5:return o.stringValue===n.stringValue;case 6:return l=n,xu(o.bytesValue).isEqual(xu(l.bytesValue));case 7:return o.referenceValue===n.referenceValue;case 8:return function(u,l){return Tn(u.geoPointValue.latitude)===Tn(l.geoPointValue.latitude)&&Tn(u.geoPointValue.longitude)===Tn(l.geoPointValue.longitude)}(o,n);case 2:return function(u,l){if("integerValue"in u&&"integerValue"in l)return Tn(u.integerValue)===Tn(l.integerValue);if("doubleValue"in u&&"doubleValue"in l){const g=Tn(u.doubleValue),E=Tn(l.doubleValue);return g===E?cg(g)===cg(E):isNaN(g)&&isNaN(E)}return!1}(o,n);case 9:return va(o.arrayValue.values||[],n.arrayValue.values||[],Xi);case 10:return function(u,l){const g=u.mapValue.fields||{},E=l.mapValue.fields||{};if(ag(g)!==ag(E))return!1;for(const C in g)if(g.hasOwnProperty(C)&&(void 0===E[C]||!Xi(g[C],E[C])))return!1;return!0}(o,n);default:return ze()}var l}function lf(o,n){return void 0!==(o.values||[]).find(r=>Xi(r,n))}function Bl(o,n){const r=Ul(o),u=Ul(n);if(r!==u)return Qe(r,u);switch(r){case 0:return 0;case 1:return Qe(o.booleanValue,n.booleanValue);case 2:return function(l,g){const E=Tn(l.integerValue||l.doubleValue),C=Tn(g.integerValue||g.doubleValue);return E<C?-1:E>C?1:E===C?0:isNaN(E)?isNaN(C)?0:-1:1}(o,n);case 3:return nC(o.timestampValue,n.timestampValue);case 4:return nC(cf(o),cf(n));case 5:return Qe(o.stringValue,n.stringValue);case 6:return function(l,g){const E=xu(l),C=xu(g);return E.compareTo(C)}(o.bytesValue,n.bytesValue);case 7:return function(l,g){const E=l.split("/"),C=g.split("/");for(let A=0;A<E.length&&A<C.length;A++){const N=Qe(E[A],C[A]);if(0!==N)return N}return Qe(E.length,C.length)}(o.referenceValue,n.referenceValue);case 8:return function(l,g){const E=Qe(Tn(l.latitude),Tn(g.latitude));return 0!==E?E:Qe(Tn(l.longitude),Tn(g.longitude))}(o.geoPointValue,n.geoPointValue);case 9:return function(l,g){const E=l.values||[],C=g.values||[];for(let A=0;A<E.length&&A<C.length;++A){const N=Bl(E[A],C[A]);if(N)return N}return Qe(E.length,C.length)}(o.arrayValue,n.arrayValue);case 10:return function(l,g){const E=l.fields||{},C=Object.keys(E),A=g.fields||{},N=Object.keys(A);C.sort(),N.sort();for(let O=0;O<C.length&&O<N.length;++O){const F=Qe(C[O],N[O]);if(0!==F)return F;const Q=Bl(E[C[O]],A[N[O]]);if(0!==Q)return Q}return Qe(C.length,N.length)}(o.mapValue,n.mapValue);default:throw ze()}}function nC(o,n){if("string"==typeof o&&"string"==typeof n&&o.length===n.length)return Qe(o,n);const r=Os(o),u=Os(n),l=Qe(r.seconds,u.seconds);return 0!==l?l:Qe(r.nanos,u.nanos)}function O0(o){return df(o)}function df(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(u){const l=Os(u);return`time(${l.seconds},${l.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?xu(o.bytesValue).toBase64():"referenceValue"in o?Ze.fromName(o.referenceValue).toString():"geoPointValue"in o?`geo(${(n=o.geoPointValue).latitude},${n.longitude})`:"arrayValue"in o?function(u){let l="[",g=!0;for(const E of u.values||[])g?g=!1:l+=",",l+=df(E);return l+"]"}(o.arrayValue):"mapValue"in o?function(u){const l=Object.keys(u.fields||{}).sort();let g="{",E=!0;for(const C of l)E?E=!1:g+=",",g+=`${C}:${df(u.fields[C])}`;return g+"}"}(o.mapValue):ze();var n}function lg(o,n){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${n.path.canonicalString()}`}}function dg(o){return!!o&&"integerValue"in o}function hg(o){return!!o&&"arrayValue"in o}function rC(o){return!!o&&"nullValue"in o}function Si(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function s_(o){return!!o&&"mapValue"in o}function fg(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&"object"==typeof o.timestampValue)return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const n={mapValue:{fields:{}}};return Vl(o.mapValue.fields,(r,u)=>n.mapValue.fields[r]=fg(u)),n}if(o.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(o.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=fg(o.arrayValue.values[r]);return n}return Object.assign({},o)}class Lr{constructor(n){this.value=n}static empty(){return new Lr({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let u=0;u<n.length-1;++u)if(r=(r.mapValue.fields||{})[n.get(u)],!s_(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=fg(r)}setAll(n){let r=tr.emptyPath(),u={},l=[];n.forEach((E,C)=>{if(!r.isImmediateParentOf(C)){const A=this.getFieldsMap(r);this.applyChanges(A,u,l),u={},l=[],r=C.popLast()}E?u[C.lastSegment()]=fg(E):l.push(C.lastSegment())});const g=this.getFieldsMap(r);this.applyChanges(g,u,l)}delete(n){const r=this.field(n.popLast());s_(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return Xi(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let u=0;u<n.length;++u){let l=r.mapValue.fields[n.get(u)];s_(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[n.get(u)]=l),r=l}return r.mapValue.fields}applyChanges(n,r,u){Vl(r,(l,g)=>n[l]=g);for(const l of u)delete n[l]}clone(){return new Lr(fg(this.value))}}function o_(o){const n=[];return Vl(o.fields,(r,u)=>{const l=new tr([r]);if(s_(u)){const g=o_(u.mapValue).fields;if(0===g.length)n.push(l);else for(const E of g)n.push(l.child(E))}else n.push(l)}),new Nu(n)}class rn{constructor(n,r,u,l,g){this.key=n,this.documentType=r,this.version=u,this.data=l,this.documentState=g}static newInvalidDocument(n){return new rn(n,0,mt.min(),Lr.empty(),0)}static newFoundDocument(n,r,u){return new rn(n,1,r,u,0)}static newNoDocument(n,r){return new rn(n,2,r,Lr.empty(),0)}static newUnknownDocument(n,r){return new rn(n,3,r,Lr.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Lr.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof rn&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new rn(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class P0{constructor(n,r=null,u=[],l=[],g=null,E=null,C=null){this.path=n,this.collectionGroup=r,this.orderBy=u,this.filters=l,this.limit=g,this.startAt=E,this.endAt=C,this.A=null}}function k0(o,n=null,r=[],u=[],l=null,g=null,E=null){return new P0(o,n,r,u,l,g,E)}function pg(o){const n=Fe(o);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(u=>function(o){return o.field.canonicalString()+o.op.toString()+O0(o.value)}(u)).join(","),r+="|ob:",r+=n.orderBy.map(u=>{return(l=u).field.canonicalString()+l.dir;var l}).join(","),Mu(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=Ea(n.startAt)),n.endAt&&(r+="|ub:",r+=Ea(n.endAt)),n.A=r}return n.A}function jl(o,n){if(o.limit!==n.limit||o.orderBy.length!==n.orderBy.length)return!1;for(let l=0;l<o.orderBy.length;l++)if(!cC(o.orderBy[l],n.orderBy[l]))return!1;if(o.filters.length!==n.filters.length)return!1;for(let l=0;l<o.filters.length;l++)if((r=o.filters[l]).op!==(u=n.filters[l]).op||!r.field.isEqual(u.field)||!Xi(r.value,u.value))return!1;var r,u;return o.collectionGroup===n.collectionGroup&&!!o.path.isEqual(n.path)&&!!es(o.startAt,n.startAt)&&es(o.endAt,n.endAt)}function gg(o){return Ze.isDocumentKey(o.path)&&null===o.collectionGroup&&0===o.filters.length}class fr extends class{}{constructor(n,r,u){super(),this.field=n,this.op=r,this.value=u}static create(n,r,u){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,u):new sC(n,r,u):"array-contains"===r?new uC(n,u):"in"===r?new mg(n,u):"not-in"===r?new Hl(n,u):"array-contains-any"===r?new V0(n,u):new fr(n,r,u)}static R(n,r,u){return"in"===r?new oC(n,u):new aC(n,u)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(Bl(r,this.value)):null!==r&&Ul(this.value)===Ul(r)&&this.P(Bl(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return ze()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class sC extends fr{constructor(n,r,u){super(n,r,u),this.key=Ze.fromName(u.referenceValue)}matches(n){const r=Ze.comparator(n.key,this.key);return this.P(r)}}class oC extends fr{constructor(n,r){super(n,"in",r),this.keys=L0(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class aC extends fr{constructor(n,r){super(n,"not-in",r),this.keys=L0(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function L0(o,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(u=>Ze.fromName(u.referenceValue))}class uC extends fr{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return hg(r)&&lf(r.arrayValue,this.value)}}class mg extends fr{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&lf(this.value.arrayValue,r)}}class Hl extends fr{constructor(n,r){super(n,"not-in",r)}matches(n){if(lf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!lf(this.value.arrayValue,r)}}class V0 extends fr{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!hg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(u=>lf(this.value.arrayValue,u))}}class Vr{constructor(n,r){this.position=n,this.before=r}}function Ea(o){return`${o.before?"b":"a"}:${o.position.map(n=>O0(n)).join(",")}`}class $l{constructor(n,r="asc"){this.field=n,this.dir=r}}function cC(o,n){return o.dir===n.dir&&o.field.isEqual(n.field)}function yg(o,n,r){let u=0;for(let l=0;l<o.position.length;l++){const g=n[l],E=o.position[l];if(u=g.field.isKeyField()?Ze.comparator(Ze.fromName(E.referenceValue),r.key):Bl(E,r.data.field(g.field)),"desc"===g.dir&&(u*=-1),0!==u)break}return o.before?u<=0:u<0}function es(o,n){if(null===o)return null===n;if(null===n||o.before!==n.before||o.position.length!==n.position.length)return!1;for(let r=0;r<o.position.length;r++)if(!Xi(o.position[r],n.position[r]))return!1;return!0}class li{constructor(n,r=null,u=[],l=[],g=null,E="F",C=null,A=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=u,this.filters=l,this.limit=g,this.limitType=E,this.startAt=C,this.endAt=A,this.V=null,this.S=null}}function pr(o,n,r,u,l,g,E,C){return new li(o,n,r,u,l,g,E,C)}function Ni(o){return new li(o)}function Ru(o){return!Mu(o.limit)&&"F"===o.limitType}function Ur(o){return!Mu(o.limit)&&"L"===o.limitType}function hf(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function wa(o){for(const n of o.filters)if(n.v())return n.field;return null}function Ia(o){return null!==o.collectionGroup}function ts(o){const n=Fe(o);if(null===n.V){n.V=[];const r=wa(n),u=hf(n);if(null!==r&&null===u)r.isKeyField()||n.V.push(new $l(r)),n.V.push(new $l(tr.keyField(),"asc"));else{let l=!1;for(const g of n.explicitOrderBy)n.V.push(g),g.field.isKeyField()&&(l=!0);if(!l){const g=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new $l(tr.keyField(),g))}}}return n.V}function gr(o){const n=Fe(o);if(!n.S)if("F"===n.limitType)n.S=k0(n.path,n.collectionGroup,ts(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const g of ts(n))r.push(new $l(g.field,"desc"===g.dir?"asc":"desc"));const u=n.endAt?new Vr(n.endAt.position,!n.endAt.before):null,l=n.startAt?new Vr(n.startAt.position,!n.startAt.before):null;n.S=k0(n.path,n.collectionGroup,r,n.filters,n.limit,u,l)}return n.S}function Ou(o,n,r){return new li(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),n,r,o.startAt,o.endAt)}function Ps(o,n){return jl(gr(o),gr(n))&&o.limitType===n.limitType}function Pu(o){return`${pg(gr(o))}|lt:${o.limitType}`}function Da(o){return`Query(target=${function(o){let n=o.path.canonicalString();return null!==o.collectionGroup&&(n+=" collectionGroup="+o.collectionGroup),o.filters.length>0&&(n+=`, filters: [${o.filters.map(r=>{return`${(u=r).field.canonicalString()} ${u.op} ${O0(u.value)}`;var u}).join(", ")}]`),Mu(o.limit)||(n+=", limit: "+o.limit),o.orderBy.length>0&&(n+=`, orderBy: [${o.orderBy.map(r=>{return`${(u=r).field.canonicalString()} (${u.dir})`;var u}).join(", ")}]`),o.startAt&&(n+=", startAt: "+Ea(o.startAt)),o.endAt&&(n+=", endAt: "+Ea(o.endAt)),`Target(${n})`}(gr(o))}; limitType=${o.limitType})`}function ks(o,n){return n.isFoundDocument()&&function(r,u){const l=u.key.path;return null!==r.collectionGroup?u.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Ze.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(o,n)&&function(r,u){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===u.data.field(l.field))return!1;return!0}(o,n)&&function(r,u){for(const l of r.filters)if(!l.matches(u))return!1;return!0}(o,n)&&(u=n,!((r=o).startAt&&!yg(r.startAt,ts(r),u)||r.endAt&&yg(r.endAt,ts(r),u)));var r,u}function a_(o){return(n,r)=>{let u=!1;for(const l of ts(o)){const g=U0(l,n,r);if(0!==g)return g;u=u||l.field.isKeyField()}return 0}}function U0(o,n,r){const u=o.field.isKeyField()?Ze.comparator(n.key,r.key):function(l,g,E){const C=g.data.field(l),A=E.data.field(l);return null!==C&&null!==A?Bl(C,A):ze()}(o.field,n,r);switch(o.dir){case"asc":return u;case"desc":return-1*u;default:return ze()}}function u_(o,n){if(o.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cg(n)?"-0":n}}function c_(o){return{integerValue:""+o}}function l_(o,n){return R0(n)?c_(n):u_(o,n)}class ff{constructor(){this._=void 0}}function B0(o,n,r){return o instanceof Gl?function(u,l){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return l&&(g.fields.__previous_value__=l),{mapValue:g}}(r,n):o instanceof Ca?H0(o,n):o instanceof ba?h_(o,n):function(u,l){const g=d_(u,l),E=lC(g)+lC(u.C);return dg(g)&&dg(u.C)?c_(E):u_(u.N,E)}(o,n)}function j0(o,n,r){return o instanceof Ca?H0(o,n):o instanceof ba?h_(o,n):r}function d_(o,n){return o instanceof ql?dg(r=n)||(u=r)&&"doubleValue"in u?n:{integerValue:0}:null;var u,r}class Gl extends ff{}class Ca extends ff{constructor(n){super(),this.elements=n}}function H0(o,n){const r=$0(n);for(const u of o.elements)r.some(l=>Xi(l,u))||r.push(u);return{arrayValue:{values:r}}}class ba extends ff{constructor(n){super(),this.elements=n}}function h_(o,n){let r=$0(n);for(const u of o.elements)r=r.filter(l=>!Xi(l,u));return{arrayValue:{values:r}}}class ql extends ff{constructor(n,r){super(),this.N=n,this.C=r}}function lC(o){return Tn(o.integerValue||o.doubleValue)}function $0(o){return hg(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}class Wl{constructor(n,r){this.field=n,this.transform=r}}class G0{constructor(n,r){this.version=n,this.transformResults=r}}class Mn{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Mn}static exists(n){return new Mn(void 0,n)}static updateTime(n){return new Mn(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function _g(o,n){return void 0!==o.updateTime?n.isFoundDocument()&&n.version.isEqual(o.updateTime):void 0===o.exists||o.exists===n.isFoundDocument()}class f_{}function hC(o,n,r){o instanceof pf?function(u,l,g){const E=u.value.clone(),C=W0(u.fieldTransforms,l,g.transformResults);E.setAll(C),l.convertToFoundDocument(g.version,E).setHasCommittedMutations()}(o,n,r):o instanceof ku?function(u,l,g){if(!_g(u.precondition,l))return void l.convertToUnknownDocument(g.version);const E=W0(u.fieldTransforms,l,g.transformResults),C=l.data;C.setAll(q0(u)),C.setAll(E),l.convertToFoundDocument(g.version,C).setHasCommittedMutations()}(o,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function vg(o,n,r){var l;o instanceof pf?function(u,l,g){if(!_g(u.precondition,l))return;const E=u.value.clone(),C=Eg(u.fieldTransforms,g,l);E.setAll(C),l.convertToFoundDocument(pC(l),E).setHasLocalMutations()}(o,n,r):o instanceof ku?function(u,l,g){if(!_g(u.precondition,l))return;const E=Eg(u.fieldTransforms,g,l),C=l.data;C.setAll(q0(u)),C.setAll(E),l.convertToFoundDocument(pC(l),C).setHasLocalMutations()}(o,n,r):_g(o.precondition,l=n)&&l.convertToNoDocument(mt.min())}function ZT(o,n){let r=null;for(const u of o.fieldTransforms){const l=n.data.field(u.field),g=d_(u.transform,l||null);null!=g&&(null==r&&(r=Lr.empty()),r.set(u.field,g))}return r||null}function fC(o,n){return o.type===n.type&&!!o.key.isEqual(n.key)&&!!o.precondition.isEqual(n.precondition)&&(u=n.fieldTransforms,!!(void 0===(r=o.fieldTransforms)&&void 0===u||r&&u&&va(r,u,(l,g)=>function(o,n){return o.field.isEqual(n.field)&&(u=n.transform,(r=o.transform)instanceof Ca&&u instanceof Ca||r instanceof ba&&u instanceof ba?va(r.elements,u.elements,Xi):r instanceof ql&&u instanceof ql?Xi(r.C,u.C):r instanceof Gl&&u instanceof Gl);var r,u}(l,g))))&&(0===o.type?o.value.isEqual(n.value):1!==o.type||o.data.isEqual(n.data)&&o.fieldMask.isEqual(n.fieldMask));var r,u}function pC(o){return o.isFoundDocument()?o.version:mt.min()}class pf extends f_{constructor(n,r,u,l=[]){super(),this.key=n,this.value=r,this.precondition=u,this.fieldTransforms=l,this.type=0}}class ku extends f_{constructor(n,r,u,l,g=[]){super(),this.key=n,this.data=r,this.fieldMask=u,this.precondition=l,this.fieldTransforms=g,this.type=1}}function q0(o){const n=new Map;return o.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const u=o.data.field(r);n.set(r,u)}}),n}function W0(o,n,r){const u=new Map;ct(o.length===r.length);for(let l=0;l<r.length;l++){const g=o[l],E=g.transform,C=n.data.field(g.field);u.set(g.field,j0(E,C,r[l]))}return u}function Eg(o,n,r){const u=new Map;for(const l of o){const g=l.transform,E=r.data.field(l.field);u.set(l.field,B0(g,E,n))}return u}class Fu extends f_{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class p_ extends f_{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class KT{constructor(n){this.count=n}}var jn,Nt;function z0(o){switch(o){case re.OK:return ze();case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return ze()}}function g_(o){if(void 0===o)return xn("GRPC error has no .code"),re.UNKNOWN;switch(o){case jn.OK:return re.OK;case jn.CANCELLED:return re.CANCELLED;case jn.UNKNOWN:return re.UNKNOWN;case jn.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case jn.INTERNAL:return re.INTERNAL;case jn.UNAVAILABLE:return re.UNAVAILABLE;case jn.UNAUTHENTICATED:return re.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case jn.NOT_FOUND:return re.NOT_FOUND;case jn.ALREADY_EXISTS:return re.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return re.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case jn.ABORTED:return re.ABORTED;case jn.OUT_OF_RANGE:return re.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return re.UNIMPLEMENTED;case jn.DATA_LOSS:return re.DATA_LOSS;default:return ze()}}(Nt=jn||(jn={}))[Nt.OK=0]="OK",Nt[Nt.CANCELLED=1]="CANCELLED",Nt[Nt.UNKNOWN=2]="UNKNOWN",Nt[Nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nt[Nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nt[Nt.NOT_FOUND=5]="NOT_FOUND",Nt[Nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nt[Nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nt[Nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nt[Nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nt[Nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nt[Nt.ABORTED=10]="ABORTED",Nt[Nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nt[Nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nt[Nt.INTERNAL=13]="INTERNAL",Nt[Nt.UNAVAILABLE=14]="UNAVAILABLE",Nt[Nt.DATA_LOSS=15]="DATA_LOSS";class rr{constructor(n,r){this.comparator=n,this.root=r||vn.EMPTY}insert(n,r){return new rr(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,vn.BLACK,null,null))}remove(n){return new rr(this.comparator,this.root.remove(n,this.comparator).copy(null,null,vn.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const u=this.comparator(n,r.key);if(0===u)return r.value;u<0?r=r.left:u>0&&(r=r.right)}return null}indexOf(n){let r=0,u=this.root;for(;!u.isEmpty();){const l=this.comparator(n,u.key);if(0===l)return r+u.left.size;l<0?u=u.left:(r+=u.left.size+1,u=u.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,u)=>(n(r,u),!1))}toString(){const n=[];return this.inorderTraversal((r,u)=>(n.push(`${r}:${u}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new wg(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new wg(this.root,n,this.comparator,!1)}getReverseIterator(){return new wg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new wg(this.root,n,this.comparator,!0)}}class wg{constructor(n,r,u,l){this.isReverse=l,this.nodeStack=[];let g=1;for(;!n.isEmpty();)if(g=r?u(n.key,r):1,l&&(g*=-1),g<0)n=this.isReverse?n.left:n.right;else{if(0===g){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class vn{constructor(n,r,u,l,g){this.key=n,this.value=r,this.color=null!=u?u:vn.RED,this.left=null!=l?l:vn.EMPTY,this.right=null!=g?g:vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,u,l,g){return new vn(null!=n?n:this.key,null!=r?r:this.value,null!=u?u:this.color,null!=l?l:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,u){let l=this;const g=u(n,l.key);return l=g<0?l.copy(null,null,null,l.left.insert(n,r,u),null):0===g?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(n,r,u)),l.fixUp()}removeMin(){if(this.left.isEmpty())return vn.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let u,l=this;if(r(n,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(n,l.key)){if(l.right.isEmpty())return vn.EMPTY;u=l.right.min(),l=l.copy(u.key,u.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ze();const n=this.left.check();if(n!==this.right.check())throw ze();return n+(this.isRed()?0:1)}}vn.EMPTY=null,vn.RED=!0,vn.BLACK=!1,vn.EMPTY=new class{constructor(){this.size=0}get key(){throw ze()}get value(){throw ze()}get color(){throw ze()}get left(){throw ze()}get right(){throw ze()}copy(o,n,r,u,l){return this}insert(o,n,r){return new vn(o,n)}remove(o,n){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class En{constructor(n){this.comparator=n,this.data=new rr(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,u)=>(n(r),!1))}forEachInRange(n,r){const u=this.data.getIteratorFrom(n[0]);for(;u.hasNext();){const l=u.getNext();if(this.comparator(l.key,n[1])>=0)return;r(l.key)}}forEachWhile(n,r){let u;for(u=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();u.hasNext();)if(!n(u.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new m_(this.data.getIterator())}getIteratorFrom(n){return new m_(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(u=>{r=r.add(u)}),r}isEqual(n){if(!(n instanceof En)||this.size!==n.size)return!1;const r=this.data.getIterator(),u=n.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,g=u.getNext().key;if(0!==this.comparator(l,g))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new En(this.comparator);return r.data=n,r}}class m_{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const gC=new rr(Ze.comparator);function di(){return gC}const Ig=new rr(Ze.comparator);function y_(){return Ig}const Z0=new rr(Ze.comparator);function K0(){return Z0}const mC=new En(Ze.comparator);function Ut(...o){let n=mC;for(const r of o)n=n.add(r);return n}const yC=new En(Qe);function Dg(){return yC}class zl{constructor(n,r,u,l,g){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=u,this.documentUpdates=l,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(n,r){const u=new Map;return u.set(n,gf.createSynthesizedTargetChangeForCurrentChange(n,r)),new zl(mt.min(),u,Dg(),di(),Ut())}}class gf{constructor(n,r,u,l,g){this.resumeToken=n,this.current=r,this.addedDocuments=u,this.modifiedDocuments=l,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(n,r){return new gf(nr.EMPTY_BYTE_STRING,r,Ut(),Ut(),Ut())}}class mf{constructor(n,r,u,l){this.k=n,this.removedTargetIds=r,this.key=u,this.$=l}}class __{constructor(n,r){this.targetId=n,this.O=r}}class Cg{constructor(n,r,u=nr.EMPTY_BYTE_STRING,l=null){this.state=n,this.targetIds=r,this.resumeToken=u,this.cause=l}}class _C{constructor(){this.F=0,this.M=vC(),this.L=nr.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=Ut(),r=Ut(),u=Ut();return this.M.forEach((l,g)=>{switch(g){case 0:n=n.add(l);break;case 2:r=r.add(l);break;case 1:u=u.add(l);break;default:ze()}}),new gf(this.L,this.B,n,r,u)}G(){this.U=!1,this.M=vC()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class v_{constructor(n){this.tt=n,this.et=new Map,this.nt=di(),this.st=Y0(),this.it=new En(Qe)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const u=this.ut(r);switch(n.state){case 0:this.ht(r)&&u.j(n.resumeToken);break;case 1:u.X(),u.q||u.G(),u.j(n.resumeToken);break;case 2:u.X(),u.q||this.removeTarget(r);break;case 3:this.ht(r)&&(u.Z(),u.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),u.j(n.resumeToken));break;default:ze()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((u,l)=>{this.ht(l)&&r(l)})}ft(n){const r=n.targetId,u=n.O.count,l=this.dt(r);if(l){const g=l.target;if(gg(g))if(0===u){const E=new Ze(g.path);this.at(r,E,rn.newNoDocument(E,mt.min()))}else ct(1===u);else this.wt(r)!==u&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((g,E)=>{const C=this.dt(E);if(C){if(g.current&&gg(C.target)){const A=new Ze(C.target.path);null!==this.nt.get(A)||this.gt(E,A)||this.at(E,A,rn.newNoDocument(A,n))}g.K&&(r.set(E,g.W()),g.G())}});let u=Ut();this.st.forEach((g,E)=>{let C=!0;E.forEachWhile(A=>{const N=this.dt(A);return!N||2===N.purpose||(C=!1,!1)}),C&&(u=u.add(g))});const l=new zl(n,r,this.it,this.nt,u);return this.nt=di(),this.st=Y0(),this.it=new En(Qe),l}ot(n,r){if(!this.ht(n))return;const u=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,u),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,u){if(!this.ht(n))return;const l=this.ut(n);this.gt(n,r)?l.H(r,1):l.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),u&&(this.nt=this.nt.insert(r,u))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new _C,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new En(Qe),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||Me("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new _C),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function Y0(){return new rr(Ze.comparator)}function vC(){return new rr(Ze.comparator)}const yf={asc:"ASCENDING",desc:"DESCENDING"},EC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class E_{constructor(n,r){this.databaseId=n,this.D=r}}function Lu(o,n){return o.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Q0(o,n){return o.D?n.toBase64():n.toUint8Array()}function w_(o,n){return Lu(o,n.toTimestamp())}function Rn(o){return ct(!!o),mt.fromTimestamp(function(n){const r=Os(n);return new Qt(r.seconds,r.nanos)}(o))}function bg(o,n){return(r=o,new Mt(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function wC(o){const n=Mt.fromString(o);return ct(A_(n)),n}function _f(o,n){return bg(o.databaseId,n.path)}function ns(o,n){const r=wC(n);if(r.get(1)!==o.databaseId.projectId)throw new Se(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+o.databaseId.projectId);if(r.get(3)!==o.databaseId.database)throw new Se(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+o.databaseId.database);return new Ze(Ag(r))}function Tg(o,n){return bg(o.databaseId,n)}function J0(o){const n=wC(o);return 4===n.length?Mt.emptyPath():Ag(n)}function Zl(o){return new Mt(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Ag(o){return ct(o.length>4&&"documents"===o.get(4)),o.popFirst(5)}function I_(o,n,r){return{name:_f(o,n),fields:r.value.mapValue.fields}}function Sg(o,n,r){const u=ns(o,n.name),l=Rn(n.updateTime),g=new Lr({mapValue:{fields:n.fields}}),E=rn.newFoundDocument(u,l,g);return r&&E.setHasCommittedMutations(),r?E.setHasCommittedMutations():E}function Ng(o,n){let r;if(n instanceof pf)r={update:I_(o,n.key,n.value)};else if(n instanceof Fu)r={delete:_f(o,n.key)};else if(n instanceof ku)r={update:I_(o,n.key,n.data),updateMask:aw(n.fieldMask)};else{if(!(n instanceof p_))return ze();r={verify:_f(o,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(u=>function(l,g){const E=g.transform;if(E instanceof Gl)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Ca)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof ba)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof ql)return{fieldPath:g.field.canonicalString(),increment:E.C};throw ze()}(0,u))),n.precondition.isNone||(r.currentDocument=void 0!==(l=n.precondition).updateTime?{updateTime:w_(o,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:ze()),r;var l}function C_(o,n){const r=n.currentDocument?void 0!==(l=n.currentDocument).updateTime?Mn.updateTime(Rn(l.updateTime)):void 0!==l.exists?Mn.exists(l.exists):Mn.none():Mn.none(),u=n.updateTransforms?n.updateTransforms.map(l=>function(g,E){let C=null;"setToServerValue"in E?(ct("REQUEST_TIME"===E.setToServerValue),C=new Gl):"appendMissingElements"in E?C=new Ca(E.appendMissingElements.values||[]):"removeAllFromArray"in E?C=new ba(E.removeAllFromArray.values||[]):"increment"in E?C=new ql(g,E.increment):ze();const A=tr.fromServerFormat(E.fieldPath);return new Wl(A,C)}(o,l)):[];var l;if(n.update){const l=ns(o,n.update.name),g=new Lr({mapValue:{fields:n.update.fields}});if(n.updateMask){const E=new Nu((n.updateMask.fieldPaths||[]).map(N=>tr.fromServerFormat(N)));return new ku(l,g,E,r,u)}return new pf(l,g,r,u)}if(n.delete){const l=ns(o,n.delete);return new Fu(l,r)}if(n.verify){const l=ns(o,n.verify);return new p_(l,r)}return ze()}function xg(o,n){return{documents:[Tg(o,n.path)]}}function b_(o,n){const r={structuredQuery:{}},u=n.path;null!==n.collectionGroup?(r.parent=Tg(o,u),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=Tg(o,u.popLast()),r.structuredQuery.from=[{collectionId:u.lastSegment()}]);const l=function(C){if(0===C.length)return;const A=C.map(N=>function(O){if("=="===O.op){if(Si(O.value))return{unaryFilter:{field:Vu(O.field),op:"IS_NAN"}};if(rC(O.value))return{unaryFilter:{field:Vu(O.field),op:"IS_NULL"}}}else if("!="===O.op){if(Si(O.value))return{unaryFilter:{field:Vu(O.field),op:"IS_NOT_NAN"}};if(rC(O.value))return{unaryFilter:{field:Vu(O.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(O.field),op:iw(O.op),value:O.value}}}(N));return 1===A.length?A[0]:{compositeFilter:{op:"AND",filters:A}}}(n.filters);l&&(r.structuredQuery.where=l);const g=function(C){if(0!==C.length)return C.map(A=>{return{field:Vu((N=A).field),direction:rw(N.dir)};var N})}(n.orderBy);g&&(r.structuredQuery.orderBy=g);const E=(A=n.limit,o.D||Mu(A)?A:{value:A});var A;return null!==E&&(r.structuredQuery.limit=E),n.startAt&&(r.structuredQuery.startAt=T_(n.startAt)),n.endAt&&(r.structuredQuery.endAt=T_(n.endAt)),r}function tw(o){let n=J0(o.parent);const r=o.structuredQuery,u=r.from?r.from.length:0;let l=null;if(u>0){ct(1===u);const O=r.from[0];O.allDescendants?l=O.collectionId:n=n.child(O.collectionId)}let g=[];r.where&&(g=nw(r.where));let E=[];r.orderBy&&(E=r.orderBy.map(O=>{return new $l(Uu((F=O).field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(F.direction));var F}));let C=null;r.limit&&(C=function(O){let F;return F="object"==typeof O?O.value:O,Mu(F)?null:F}(r.limit));let A=null;r.startAt&&(A=Mg(r.startAt));let N=null;return r.endAt&&(N=Mg(r.endAt)),pr(n,l,E,g,C,"F",A,N)}function nw(o){return o?void 0!==o.unaryFilter?[ow(o)]:void 0!==o.fieldFilter?[sw(o)]:void 0!==o.compositeFilter?o.compositeFilter.filters.map(n=>nw(n)).reduce((n,r)=>n.concat(r)):ze():[]}function T_(o){return{before:o.before,values:o.position}}function Mg(o){return new Vr(o.values||[],!!o.before)}function rw(o){return yf[o]}function iw(o){return EC[o]}function Vu(o){return{fieldPath:o.canonicalString()}}function Uu(o){return tr.fromServerFormat(o.fieldPath)}function sw(o){return fr.create(Uu(o.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ze()}}(o.fieldFilter.op),o.fieldFilter.value)}function ow(o){switch(o.unaryFilter.op){case"IS_NAN":const n=Uu(o.unaryFilter.field);return fr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Uu(o.unaryFilter.field);return fr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Uu(o.unaryFilter.field);return fr.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Uu(o.unaryFilter.field);return fr.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ze()}}function aw(o){const n=[];return o.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function A_(o){return o.length>=4&&"projects"===o.get(0)&&"databases"===o.get(2)}function Fs(o){let n="";for(let r=0;r<o.length;r++)n.length>0&&(n=uw(n)),n=DC(o.get(r),n);return uw(n)}function DC(o,n){let r=n;const u=o.length;for(let l=0;l<u;l++){const g=o.charAt(l);switch(g){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=g}}return r}function uw(o){return o+"\x01\x01"}function Ls(o){const n=o.length;if(ct(n>=2),2===n)return ct("\x01"===o.charAt(0)&&"\x01"===o.charAt(1)),Mt.emptyPath();const r=n-2,u=[];let l="";for(let g=0;g<n;){const E=o.indexOf("\x01",g);switch((E<0||E>r)&&ze(),o.charAt(E+1)){case"\x01":const C=o.substring(g,E);let A;0===l.length?A=C:(l+=C,A=l,l=""),u.push(A);break;case"\x10":l+=o.substring(g,E),l+="\0";break;case"\x11":l+=o.substring(g,E+1);break;default:ze()}g=E+2}return new Mt(u)}class CC{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class kt{constructor(n,r,u){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=u}}kt.store="owner",kt.key="owner";class bo{constructor(n,r,u){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=u}}bo.store="mutationQueues",bo.keyPath="userId";class sn{constructor(n,r,u,l,g){this.userId=n,this.batchId=r,this.localWriteTimeMs=u,this.baseMutations=l,this.mutations=g}}sn.store="mutations",sn.keyPath="batchId",sn.userMutationsIndex="userMutationsIndex",sn.userMutationsKeyPath=["userId","batchId"];class Ar{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,Fs(r)]}static key(n,r,u){return[n,Fs(r),u]}}Ar.store="documentMutations",Ar.PLACEHOLDER=new Ar;class cw{constructor(n,r){this.path=n,this.readTime=r}}class bC{constructor(n,r){this.path=n,this.version=r}}class pn{constructor(n,r,u,l,g,E){this.unknownDocument=n,this.noDocument=r,this.document=u,this.hasCommittedMutations=l,this.readTime=g,this.parentPath=E}}pn.store="remoteDocuments",pn.readTimeIndex="readTimeIndex",pn.readTimeIndexPath="readTime",pn.collectionReadTimeIndex="collectionReadTimeIndex",pn.collectionReadTimeIndexPath=["parentPath","readTime"];class rs{constructor(n){this.byteSize=n}}rs.store="remoteDocumentGlobal",rs.key="remoteDocumentGlobalKey";class Hn{constructor(n,r,u,l,g,E,C){this.targetId=n,this.canonicalId=r,this.readTime=u,this.resumeToken=l,this.lastListenSequenceNumber=g,this.lastLimboFreeSnapshotVersion=E,this.query=C}}Hn.store="targets",Hn.keyPath="targetId",Hn.queryTargetsIndexName="queryTargetsIndex",Hn.queryTargetsKeyPath=["canonicalId","targetId"];class mr{constructor(n,r,u){this.targetId=n,this.path=r,this.sequenceNumber=u}}mr.store="targetDocuments",mr.keyPath=["targetId","path"],mr.documentTargetsIndex="documentTargetsIndex",mr.documentTargetsKeyPath=["path","targetId"];class hi{constructor(n,r,u,l){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=u,this.targetCount=l}}hi.key="targetGlobalKey",hi.store="targetGlobal";class Ta{constructor(n,r){this.collectionId=n,this.parent=r}}Ta.store="collectionParents",Ta.keyPath=["collectionId","parent"];class To{constructor(n,r,u,l){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=u,this.inForeground=l}}To.store="clientMetadata",To.keyPath="clientId";class Bu{constructor(n,r,u){this.bundleId=n,this.createTime=r,this.version=u}}Bu.store="bundles",Bu.keyPath="bundleId";class vf{constructor(n,r,u){this.name=n,this.readTime=r,this.bundledQuery=u}}vf.store="namedQueries",vf.keyPath="name";const lw=[bo.store,sn.store,Ar.store,pn.store,Hn.store,kt.store,hi.store,mr.store,To.store,rs.store,Ta.store,Bu.store,vf.store],Rg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class is{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class be{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&ze(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new be((u,l)=>{this.nextCallback=g=>{this.wrapSuccess(n,g).next(u,l)},this.catchCallback=g=>{this.wrapFailure(r,g).next(u,l)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof be?r:be.resolve(r)}catch(r){return be.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):be.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):be.reject(r)}static resolve(n){return new be((r,u)=>{r(n)})}static reject(n){return new be((r,u)=>{u(n)})}static waitFor(n){return new be((r,u)=>{let l=0,g=0,E=!1;n.forEach(C=>{++l,C.next(()=>{++g,E&&g===l&&r()},A=>u(A))}),E=!0,g===l&&r()})}static or(n){let r=be.resolve(!1);for(const u of n)r=r.next(l=>l?be.resolve(l):u());return r}static forEach(n,r){const u=[];return n.forEach((l,g)=>{u.push(r.call(this,l,g))}),this.waitFor(u)}}class Og{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new er,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Br(n,r.error)):this.Tt.resolve()},this.transaction.onerror=u=>{const l=S_(u.target.error);this.Tt.reject(new Br(n,l))}}static open(n,r,u,l){try{return new Og(r,n.transaction(l,u))}catch(g){throw new Br(r,g)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(Me("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new dw(r)}}class On{constructor(n,r,u){this.name=n,this.version=r,this.At=u,12.2===On.Rt((0,Ct.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return Me("SimpleDb","Removing database:",n),ju(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,Ct.hl)())return!1;if(On.Pt())return!0;const n=(0,Ct.z$)(),r=On.Rt(n),u=0<r&&r<10,l=On.vt(n),g=0<l&&l<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||u||g)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),u=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(u)}static vt(n){const r=n.match(/Android ([\d.]+)/i),u=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(u)}Dt(n){var r=this;return(0,ne.Z)(function*(){return r.db||(Me("SimpleDb","Opening database:",r.name),r.db=yield new Promise((u,l)=>{const g=indexedDB.open(r.name,r.version);g.onsuccess=E=>{u(E.target.result)},g.onblocked=()=>{l(new Br(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=E=>{const C=E.target.error;l("VersionError"===C.name?new Se(re.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new Se(re.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new Br(n,C))},g.onupgradeneeded=E=>{Me("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',E.oldVersion),r.At.Ct(E.target.result,g.transaction,E.oldVersion,r.version).next(()=>{Me("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=u=>r.Nt(u)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,u,l){var g=this;return(0,ne.Z)(function*(){const E="readonly"===r;let C=0;for(;;){++C;try{g.db=yield g.Dt(n);const A=Og.open(g.db,n,E?"readonly":"readwrite",u),N=l(A).catch(O=>(A.abort(O),be.reject(O))).toPromise();return N.catch(()=>{}),yield A.It,N}catch(A){const N="FirebaseError"!==A.name&&C<3;if(Me("SimpleDb","Transaction failed with error:",A.message,"Retrying:",N),g.close(),!N)return Promise.reject(A)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ss{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return ju(this.kt.delete())}}class Br extends Se{constructor(n,r){super(re.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Aa(o){return"IndexedDbTransactionError"===o.name}class dw{constructor(n){this.store=n}put(n,r){let u;return void 0!==r?(Me("SimpleDb","PUT",this.store.name,n,r),u=this.store.put(r,n)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",n),u=this.store.put(n)),ju(u)}add(n){return Me("SimpleDb","ADD",this.store.name,n,n),ju(this.store.add(n))}get(n){return ju(this.store.get(n)).next(r=>(void 0===r&&(r=null),Me("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return Me("SimpleDb","DELETE",this.store.name,n),ju(this.store.delete(n))}count(){return Me("SimpleDb","COUNT",this.store.name),ju(this.store.count())}Lt(n,r){const u=this.cursor(this.options(n,r)),l=[];return this.Bt(u,(g,E)=>{l.push(E)}).next(()=>l)}Ut(n,r){Me("SimpleDb","DELETE ALL",this.store.name);const u=this.options(n,r);u.qt=!1;const l=this.cursor(u);return this.Bt(l,(g,E,C)=>C.delete())}Kt(n,r){let u;r?u=n:(u={},r=n);const l=this.cursor(u);return this.Bt(l,r)}jt(n){const r=this.cursor({});return new be((u,l)=>{r.onerror=g=>{const E=S_(g.target.error);l(E)},r.onsuccess=g=>{const E=g.target.result;E?n(E.primaryKey,E.value).next(C=>{C?E.continue():u()}):u()}})}Bt(n,r){const u=[];return new be((l,g)=>{n.onerror=E=>{g(E.target.error)},n.onsuccess=E=>{const C=E.target.result;if(!C)return void l();const A=new ss(C),N=r(C.primaryKey,C.value,A);if(N instanceof be){const O=N.catch(F=>(A.done(),be.reject(F)));u.push(O)}A.isDone?l():null===A.Ft?C.continue():C.continue(A.Ft)}}).next(()=>be.waitFor(u))}options(n,r){let u;return void 0!==n&&("string"==typeof n?u=n:r=n),{index:u,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const u=this.store.index(n.index);return n.qt?u.openKeyCursor(n.range,r):u.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function ju(o){return new be((n,r)=>{o.onsuccess=u=>{n(u.target.result)},o.onerror=u=>{const l=S_(u.target.error);r(l)}})}let hw=!1;function S_(o){const n=On.Rt((0,Ct.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(r)>=0){const u=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hw||(hw=!0,setTimeout(()=>{throw u},0)),u}}return o}class fw extends is{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function Sr(o,n){const r=Fe(o);return On.St(r.Qt,n)}class Hu{constructor(n,r,u,l){this.batchId=n,this.localWriteTime=r,this.baseMutations=u,this.mutations=l}applyToRemoteDocument(n,r){const u=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const g=this.mutations[l];g.key.isEqual(n.key)&&hC(g,n,u[l])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&vg(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&vg(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const u=n.get(r.key),l=u;this.applyToLocalView(l),u.isValidDocument()||l.convertToNoDocument(mt.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),Ut())}isEqual(n){return this.batchId===n.batchId&&va(this.mutations,n.mutations,(r,u)=>fC(r,u))&&va(this.baseMutations,n.baseMutations,(r,u)=>fC(r,u))}}class N_{constructor(n,r,u,l){this.batch=n,this.commitVersion=r,this.mutationResults=u,this.docVersions=l}static from(n,r,u){ct(n.mutations.length===u.length);let l=K0();const g=n.mutations;for(let E=0;E<g.length;E++)l=l.insert(g[E].key,u[E].version);return new N_(n,r,u,l)}}class Ao{constructor(n,r,u,l,g=mt.min(),E=mt.min(),C=nr.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=u,this.sequenceNumber=l,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=C}withSequenceNumber(n){return new Ao(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new Ao(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class pw{constructor(n){this.Wt=n}}function Pg(o,n){if(n.document)return Sg(o.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Ze.fromSegments(n.noDocument.path),u=Gu(n.noDocument.readTime),l=rn.newNoDocument(r,u);return n.hasCommittedMutations?l.setHasCommittedMutations():l}if(n.unknownDocument){const r=Ze.fromSegments(n.unknownDocument.path),u=Gu(n.unknownDocument.version);return rn.newUnknownDocument(r,u)}return ze()}function x_(o,n,r){const u=Kl(r),l=n.key.path.popLast().toArray();if(n.isFoundDocument()){const g={name:_f(C=o.Wt,(A=n).key),fields:A.data.value.mapValue.fields,updateTime:Lu(C,A.version.toTimestamp())};return new pn(null,null,g,n.hasCommittedMutations,u,l)}var C,A;if(n.isNoDocument()){const g=n.key.path.toArray(),E=$u(n.version),C=n.hasCommittedMutations;return new pn(null,new cw(g,E),null,C,u,l)}if(n.isUnknownDocument()){const g=n.key.path.toArray(),E=$u(n.version);return new pn(new bC(g,E),null,null,!0,u,l)}return ze()}function Kl(o){const n=o.toTimestamp();return[n.seconds,n.nanoseconds]}function gw(o){const n=new Qt(o[0],o[1]);return mt.fromTimestamp(n)}function $u(o){const n=o.toTimestamp();return new CC(n.seconds,n.nanoseconds)}function Gu(o){const n=new Qt(o.seconds,o.nanoseconds);return mt.fromTimestamp(n)}function Sa(o,n){const r=(n.baseMutations||[]).map(g=>C_(o.Wt,g));for(let g=0;g<n.mutations.length-1;++g){const E=n.mutations[g];g+1<n.mutations.length&&void 0!==n.mutations[g+1].transform&&(E.updateTransforms=n.mutations[g+1].transform.fieldTransforms,n.mutations.splice(g+1,1),++g)}const u=n.mutations.map(g=>C_(o.Wt,g)),l=Qt.fromMillis(n.localWriteTimeMs);return new Hu(n.batchId,l,r,u)}function Na(o){const n=Gu(o.readTime),r=void 0!==o.lastLimboFreeSnapshotVersion?Gu(o.lastLimboFreeSnapshotVersion):mt.min();let u;var l;return void 0!==o.query.documents?(ct(1===(l=o.query).documents.length),u=gr(Ni(J0(l.documents[0])))):u=gr(tw(o.query)),new Ao(u,o.targetId,0,o.lastListenSequenceNumber,n,r,nr.fromBase64String(o.resumeToken))}function M_(o,n){const r=$u(n.snapshotVersion),u=$u(n.lastLimboFreeSnapshotVersion);let l;l=gg(n.target)?xg(o.Wt,n.target):b_(o.Wt,n.target);const g=n.resumeToken.toBase64();return new Hn(n.targetId,pg(n.target),r,g,n.sequenceNumber,u,l)}function kg(o){const n=tw({parent:o.parent,structuredQuery:o.structuredQuery});return"LAST"===o.limitType?Ou(n,n.limit,"L"):n}class mw{getBundleMetadata(n,r){return R_(n).get(r).next(u=>{if(u)return{id:(l=u).bundleId,createTime:Gu(l.createTime),version:l.version};var l})}saveBundleMetadata(n,r){return R_(n).put({bundleId:(u=r).id,createTime:$u(Rn(u.createTime)),version:u.version});var u}getNamedQuery(n,r){return O_(n).get(r).next(u=>{if(u)return{name:(l=u).name,query:kg(l.bundledQuery),readTime:Gu(l.readTime)};var l})}saveNamedQuery(n,r){return O_(n).put({name:(u=r).name,readTime:$u(Rn(u.readTime)),bundledQuery:u.bundledQuery});var u}}function R_(o){return Sr(o,Bu.store)}function O_(o){return Sr(o,vf.store)}class yw{constructor(){this.Gt=new Fg}addToCollectionParentIndex(n,r){return this.Gt.add(r),be.resolve()}getCollectionParents(n,r){return be.resolve(this.Gt.getEntries(r))}}class Fg{constructor(){this.index={}}add(n){const r=n.lastSegment(),u=n.popLast(),l=this.index[r]||new En(Mt.comparator),g=!l.has(u);return this.index[r]=l.add(u),g}has(n){const r=n.lastSegment(),u=n.popLast(),l=this.index[r];return l&&l.has(u)}getEntries(n){return(this.index[n]||new En(Mt.comparator)).toArray()}}class _w{constructor(){this.zt=new Fg}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const u=r.lastSegment(),l=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const g={collectionId:u,parent:Fs(l)};return vw(n).put(g)}return be.resolve()}getCollectionParents(n,r){const u=[],l=IDBKeyRange.bound([r,""],[eC(r),""],!1,!0);return vw(n).Lt(l).next(g=>{for(const E of g){if(E.collectionId!==r)break;u.push(Ls(E.parent))}return u})}}function vw(o){return Sr(o,Ta.store)}const Ew={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Qr{constructor(n,r,u){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=u}static withCacheSize(n){return new Qr(n,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ww(o,n,r){const u=o.store(sn.store),l=o.store(Ar.store),g=[],E=IDBKeyRange.only(r.batchId);let C=0;const A=u.Kt({range:E},(O,F,Q)=>(C++,Q.delete()));g.push(A.next(()=>{ct(1===C)}));const N=[];for(const O of r.mutations){const F=Ar.key(n,O.key.path,r.batchId);g.push(l.delete(F)),N.push(O.key)}return be.waitFor(g).next(()=>N)}function Lg(o){if(!o)return 0;let n;if(o.document)n=o.document;else if(o.unknownDocument)n=o.unknownDocument;else{if(!o.noDocument)throw ze();n=o.noDocument}return JSON.stringify(n).length}Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(41943040,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);class P_{constructor(n,r,u,l){this.userId=n,this.N=r,this.Ht=u,this.referenceDelegate=l,this.Jt={}}static Yt(n,r,u,l){ct(""!==n.uid);const g=n.isAuthenticated()?n.uid:"";return new P_(g,r,u,l)}checkEmpty(n){let r=!0;const u=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xa(n).Kt({index:sn.userMutationsIndex,range:u},(l,g,E)=>{r=!1,E.done()}).next(()=>r)}addMutationBatch(n,r,u,l){const g=Yl(n),E=xa(n);return E.add({}).next(C=>{ct("number"==typeof C);const A=new Hu(C,r,u,l),N=function(Q,ie,Ie){const Be=Ie.baseMutations.map(Ot=>Ng(Q.Wt,Ot)),tt=Ie.mutations.map(Ot=>Ng(Q.Wt,Ot));return new sn(ie,Ie.batchId,Ie.localWriteTime.toMillis(),Be,tt)}(this.N,this.userId,A),O=[];let F=new En((Q,ie)=>Qe(Q.canonicalString(),ie.canonicalString()));for(const Q of l){const ie=Ar.key(this.userId,Q.key.path,C);F=F.add(Q.key.path.popLast()),O.push(E.put(N)),O.push(g.put(ie,Ar.PLACEHOLDER))}return F.forEach(Q=>{O.push(this.Ht.addToCollectionParentIndex(n,Q))}),n.addOnCommittedListener(()=>{this.Jt[C]=A.keys()}),be.waitFor(O).next(()=>A)})}lookupMutationBatch(n,r){return xa(n).get(r).next(u=>u?(ct(u.userId===this.userId),Sa(this.N,u)):null)}Xt(n,r){return this.Jt[r]?be.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(u=>{if(u){const l=u.keys();return this.Jt[r]=l,l}return null})}getNextMutationBatchAfterBatchId(n,r){const u=r+1,l=IDBKeyRange.lowerBound([this.userId,u]);let g=null;return xa(n).Kt({index:sn.userMutationsIndex,range:l},(E,C,A)=>{C.userId===this.userId&&(ct(C.batchId>=u),g=Sa(this.N,C)),A.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let u=-1;return xa(n).Kt({index:sn.userMutationsIndex,range:r,reverse:!0},(l,g,E)=>{u=g.batchId,E.done()}).next(()=>u)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xa(n).Lt(sn.userMutationsIndex,r).next(u=>u.map(l=>Sa(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(n,r){const u=Ar.prefixForPath(this.userId,r.path),l=IDBKeyRange.lowerBound(u),g=[];return Yl(n).Kt({range:l},(E,C,A)=>{const[N,O,F]=E,Q=Ls(O);if(N===this.userId&&r.path.isEqual(Q))return xa(n).get(F).next(ie=>{if(!ie)throw ze();ct(ie.userId===this.userId),g.push(Sa(this.N,ie))});A.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(n,r){let u=new En(Qe);const l=[];return r.forEach(g=>{const E=Ar.prefixForPath(this.userId,g.path),C=IDBKeyRange.lowerBound(E),A=Yl(n).Kt({range:C},(N,O,F)=>{const[Q,ie,Ie]=N,Be=Ls(ie);Q===this.userId&&g.path.isEqual(Be)?u=u.add(Ie):F.done()});l.push(A)}),be.waitFor(l).next(()=>this.Zt(n,u))}getAllMutationBatchesAffectingQuery(n,r){const u=r.path,l=u.length+1,g=Ar.prefixForPath(this.userId,u),E=IDBKeyRange.lowerBound(g);let C=new En(Qe);return Yl(n).Kt({range:E},(A,N,O)=>{const[F,Q,ie]=A,Ie=Ls(Q);F===this.userId&&u.isPrefixOf(Ie)?Ie.length===l&&(C=C.add(ie)):O.done()}).next(()=>this.Zt(n,C))}Zt(n,r){const u=[],l=[];return r.forEach(g=>{l.push(xa(n).get(g).next(E=>{if(null===E)throw ze();ct(E.userId===this.userId),u.push(Sa(this.N,E))}))}),be.waitFor(l).next(()=>u)}removeMutationBatch(n,r){return ww(n.Qt,this.userId,r).next(u=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),be.forEach(u,l=>this.referenceDelegate.markPotentiallyOrphaned(n,l))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return be.resolve();const u=IDBKeyRange.lowerBound(Ar.prefixForUser(this.userId)),l=[];return Yl(n).Kt({range:u},(g,E,C)=>{if(g[0]===this.userId){const A=Ls(g[1]);l.push(A)}else C.done()}).next(()=>{ct(0===l.length)})})}containsKey(n,r){return Iw(n,this.userId,r)}ee(n){return Dw(n).get(this.userId).next(r=>r||new bo(this.userId,-1,""))}}function Iw(o,n,r){const u=Ar.prefixForPath(n,r.path),l=u[1],g=IDBKeyRange.lowerBound(u);let E=!1;return Yl(o).Kt({range:g,qt:!0},(C,A,N)=>{const[O,F,Q]=C;O===n&&F===l&&(E=!0),N.done()}).next(()=>E)}function xa(o){return Sr(o,sn.store)}function Yl(o){return Sr(o,Ar.store)}function Dw(o){return Sr(o,bo.store)}class qu{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new qu(0)}static ie(){return new qu(-1)}}class TC{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const u=new qu(r.highestTargetId);return r.highestTargetId=u.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>mt.fromTimestamp(new Qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,u){return this.re(n).next(l=>(l.highestListenSequenceNumber=r,u&&(l.lastRemoteSnapshotVersion=u.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.oe(n,l)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(u=>(u.targetCount+=1,this.ce(r,u),this.oe(n,u))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>Ql(n).delete(r.targetId)).next(()=>this.re(n)).next(u=>(ct(u.targetCount>0),u.targetCount-=1,this.oe(n,u)))}removeTargets(n,r,u){let l=0;const g=[];return Ql(n).Kt((E,C)=>{const A=Na(C);A.sequenceNumber<=r&&null===u.get(A.targetId)&&(l++,g.push(this.removeTargetData(n,A)))}).next(()=>be.waitFor(g)).next(()=>l)}forEachTarget(n,r){return Ql(n).Kt((u,l)=>{const g=Na(l);r(g)})}re(n){return Cw(n).get(hi.key).next(r=>(ct(null!==r),r))}oe(n,r){return Cw(n).put(hi.key,r)}ae(n,r){return Ql(n).put(M_(this.N,r))}ce(n,r){let u=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,u=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,u=!0),u}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const u=pg(r),l=IDBKeyRange.bound([u,Number.NEGATIVE_INFINITY],[u,Number.POSITIVE_INFINITY]);let g=null;return Ql(n).Kt({range:l,index:Hn.queryTargetsIndexName},(E,C,A)=>{const N=Na(C);jl(r,N.target)&&(g=N,A.done())}).next(()=>g)}addMatchingKeys(n,r,u){const l=[],g=Ma(n);return r.forEach(E=>{const C=Fs(E.path);l.push(g.put(new mr(u,C))),l.push(this.referenceDelegate.addReference(n,u,E))}),be.waitFor(l)}removeMatchingKeys(n,r,u){const l=Ma(n);return be.forEach(r,g=>{const E=Fs(g.path);return be.waitFor([l.delete([u,E]),this.referenceDelegate.removeReference(n,u,g)])})}removeMatchingKeysForTargetId(n,r){const u=Ma(n),l=IDBKeyRange.bound([r],[r+1],!1,!0);return u.delete(l)}getMatchingKeysForTargetId(n,r){const u=IDBKeyRange.bound([r],[r+1],!1,!0),l=Ma(n);let g=Ut();return l.Kt({range:u,qt:!0},(E,C,A)=>{const N=Ls(E[1]),O=new Ze(N);g=g.add(O)}).next(()=>g)}containsKey(n,r){const u=Fs(r.path),l=IDBKeyRange.bound([u],[eC(u)],!1,!0);let g=0;return Ma(n).Kt({index:mr.documentTargetsIndex,qt:!0,range:l},([E,C],A,N)=>{0!==E&&(g++,N.done())}).next(()=>g>0)}Et(n,r){return Ql(n).get(r).next(u=>u?Na(u):null)}}function Ql(o){return Sr(o,Hn.store)}function Cw(o){return Sr(o,hi.store)}function Ma(o){return Sr(o,mr.store)}function Wu(o){return k_.apply(this,arguments)}function k_(){return(k_=(0,ne.Z)(function*(o){if(o.code!==re.FAILED_PRECONDITION||o.message!==Rg)throw o;Me("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function bw([o,n],[r,u]){const l=Qe(o,r);return 0===l?Qe(n,u):l}class Tw{constructor(n){this.ue=n,this.buffer=new En(bw),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const u=this.buffer.last();bw(r,u)<0&&(this.buffer=this.buffer.delete(u).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Aw{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const u=this.de?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${u}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",u,(0,ne.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(l){Aa(l)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield Wu(l)}yield r._e(n)}))}}class Sw{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(u=>Math.floor(r/100*u))}nthSequenceNumber(n,r){if(0===r)return be.resolve(Ai.T);const u=new Tw(r);return this.me.forEachTarget(n,l=>u.fe(l.sequenceNumber)).next(()=>this.me.ye(n,l=>u.fe(l))).next(()=>u.maxValue)}removeTargets(n,r,u){return this.me.removeTargets(n,r,u)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Ew)):this.getCacheSize(n).next(u=>u<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${u} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ew):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let u,l,g,E,C,A,N;const O=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(F=>(F>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${F}`),l=this.params.maximumSequenceNumbersToCollect):l=F,E=Date.now(),this.nthSequenceNumber(n,l))).next(F=>(u=F,C=Date.now(),this.removeTargets(n,u,r))).next(F=>(g=F,A=Date.now(),this.removeOrphanedDocuments(n,u))).next(F=>(N=Date.now(),e_()<=xs.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-O}ms\n\tDetermined least recently used ${l} in `+(C-E)+`ms\n\tRemoved ${g} targets in `+(A-C)+`ms\n\tRemoved ${F} documents in `+(N-A)+`ms\nTotal Duration: ${N-O}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:g,documentsRemoved:F})))}}class Nw{constructor(n,r){this.db=n,this.garbageCollector=new Sw(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(u=>r.next(l=>u+l))}Ee(n){let r=0;return this.ye(n,u=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(u,l)=>r(l))}addReference(n,r,u){return Ef(n,u)}removeReference(n,r,u){return Ef(n,u)}removeTargets(n,r,u){return this.db.getTargetCache().removeTargets(n,r,u)}markPotentiallyOrphaned(n,r){return Ef(n,r)}Ie(n,r){return function(u,l){let g=!1;return Dw(u).jt(E=>Iw(u,E,l).next(C=>(C&&(g=!0),be.resolve(!C)))).next(()=>g)}(n,r)}removeOrphanedDocuments(n,r){const u=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let g=0;return this.Te(n,(E,C)=>{if(C<=r){const A=this.Ie(n,E).next(N=>{if(!N)return g++,u.getEntry(n,E).next(()=>(u.removeEntry(E),Ma(n).delete([0,Fs(E.path)])))});l.push(A)}}).next(()=>be.waitFor(l)).next(()=>u.apply(n)).next(()=>g)}removeTarget(n,r){const u=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,u)}updateLimboDocument(n,r){return Ef(n,r)}Te(n,r){const u=Ma(n);let l,g=Ai.T;return u.Kt({index:mr.documentTargetsIndex},([E,C],{path:A,sequenceNumber:N})=>{0===E?(g!==Ai.T&&r(new Ze(Ls(l)),g),g=N,l=A):g=Ai.T}).next(()=>{g!==Ai.T&&r(new Ze(Ls(l)),g)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Ef(o,n){return Ma(o).put((u=o.currentSequenceNumber,new mr(0,Fs(n.path),u)));var u}class zu{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),u=this.inner[r];if(void 0!==u)for(const[l,g]of u)if(this.equalsFn(l,n))return g}has(n){return void 0!==this.get(n)}set(n,r){const u=this.mapKeyFn(n),l=this.inner[u];if(void 0!==l){for(let g=0;g<l.length;g++)if(this.equalsFn(l[g][0],n))return void(l[g]=[n,r]);l.push([n,r])}else this.inner[u]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),u=this.inner[r];if(void 0===u)return!1;for(let l=0;l<u.length;l++)if(this.equalsFn(u[l][0],n))return 1===u.length?delete this.inner[r]:u.splice(l,1),!0;return!1}forEach(n){Vl(this.inner,(r,u)=>{for(const[l,g]of u)n(l,g)})}isEmpty(){return x0(this.inner)}}class F_{constructor(){this.changes=new zu(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:mt.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:rn.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const u=this.changes.get(r);return void 0!==u?be.resolve(u.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class xw{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,u){return So(n).put(Vs(r),u)}removeEntry(n,r){const u=So(n),l=Vs(r);return u.delete(l)}updateMetadata(n,r){return this.getMetadata(n).next(u=>(u.byteSize+=r,this.Ae(n,u)))}getEntry(n,r){return So(n).get(Vs(r)).next(u=>this.Re(r,u))}be(n,r){return So(n).get(Vs(r)).next(u=>({document:this.Re(r,u),size:Lg(u)}))}getEntries(n,r){let u=di();return this.Pe(n,r,(l,g)=>{const E=this.Re(l,g);u=u.insert(l,E)}).next(()=>u)}ve(n,r){let u=di(),l=new rr(Ze.comparator);return this.Pe(n,r,(g,E)=>{const C=this.Re(g,E);u=u.insert(g,C),l=l.insert(g,Lg(E))}).next(()=>({documents:u,Ve:l}))}Pe(n,r,u){if(r.isEmpty())return be.resolve();const l=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),g=r.getIterator();let E=g.getNext();return So(n).Kt({range:l},(C,A,N)=>{const O=Ze.fromSegments(C);for(;E&&Ze.comparator(E,O)<0;)u(E,null),E=g.getNext();E&&E.isEqual(O)&&(u(E,A),E=g.hasNext()?g.getNext():null),E?N.Mt(E.path.toArray()):N.done()}).next(()=>{for(;E;)u(E,null),E=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(n,r,u){let l=di();const g=r.path.length+1,E={};if(u.isEqual(mt.min())){const C=r.path.toArray();E.range=IDBKeyRange.lowerBound(C)}else{const C=r.path.toArray(),A=Kl(u);E.range=IDBKeyRange.lowerBound([C,A],!0),E.index=pn.collectionReadTimeIndex}return So(n).Kt(E,(C,A,N)=>{if(C.length!==g)return;const O=Pg(this.N,A);r.path.isPrefixOf(O.key.path)?ks(r,O)&&(l=l.insert(O.key,O)):N.done()}).next(()=>l)}newChangeBuffer(n){return new Mw(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return L_(n).get(rs.key).next(r=>(ct(!!r),r))}Ae(n,r){return L_(n).put(rs.key,r)}Re(n,r){if(r){const u=Pg(this.N,r);if(!u.isNoDocument()||!u.version.isEqual(mt.min()))return u}return rn.newInvalidDocument(n)}}class Mw extends F_{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new zu(u=>u.toString(),(u,l)=>u.isEqual(l))}applyChanges(n){const r=[];let u=0,l=new En((g,E)=>Qe(g.canonicalString(),E.canonicalString()));return this.changes.forEach((g,E)=>{const C=this.De.get(g);if(E.document.isValidDocument()){const A=x_(this.Se.N,E.document,this.getReadTime(g));l=l.add(g.path.popLast()),u+=Lg(A)-C,r.push(this.Se.addEntry(n,g,A))}else if(u-=C,this.trackRemovals){const A=x_(this.Se.N,rn.newNoDocument(g,mt.min()),this.getReadTime(g));r.push(this.Se.addEntry(n,g,A))}else r.push(this.Se.removeEntry(n,g))}),l.forEach(g=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,g))}),r.push(this.Se.updateMetadata(n,u)),be.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(u=>(this.De.set(r,u.size),u.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:u,Ve:l})=>(l.forEach((g,E)=>{this.De.set(g,E)}),u))}}function L_(o){return Sr(o,rs.store)}function So(o){return Sr(o,pn.store)}function Vs(o){return o.path.toArray()}class AC{constructor(n){this.N=n}Ct(n,r,u,l){ct(u<l&&u>=0&&l<=11);const g=new Og("createOrUpgrade",r);var C;u<1&&l>=1&&(n.createObjectStore(kt.store),(C=n).createObjectStore(bo.store,{keyPath:bo.keyPath}),C.createObjectStore(sn.store,{keyPath:sn.keyPath,autoIncrement:!0}).createIndex(sn.userMutationsIndex,sn.userMutationsKeyPath,{unique:!0}),C.createObjectStore(Ar.store),Rw(n),function(C){C.createObjectStore(pn.store)}(n));let E=be.resolve();return u<3&&l>=3&&(0!==u&&(function(C){C.deleteObjectStore(mr.store),C.deleteObjectStore(Hn.store),C.deleteObjectStore(hi.store)}(n),Rw(n)),E=E.next(()=>function(C){const A=C.store(hi.store),N=new hi(0,0,mt.min().toTimestamp(),0);return A.put(hi.key,N)}(g))),u<4&&l>=4&&(0!==u&&(E=E.next(()=>function(C,A){return A.store(sn.store).Lt().next(N=>{C.deleteObjectStore(sn.store),C.createObjectStore(sn.store,{keyPath:sn.keyPath,autoIncrement:!0}).createIndex(sn.userMutationsIndex,sn.userMutationsKeyPath,{unique:!0});const O=A.store(sn.store),F=N.map(Q=>O.put(Q));return be.waitFor(F)})}(n,g))),E=E.next(()=>{!function(C){C.createObjectStore(To.store,{keyPath:To.keyPath})}(n)})),u<5&&l>=5&&(E=E.next(()=>this.Ce(g))),u<6&&l>=6&&(E=E.next(()=>(function(C){C.createObjectStore(rs.store)}(n),this.Ne(g)))),u<7&&l>=7&&(E=E.next(()=>this.xe(g))),u<8&&l>=8&&(E=E.next(()=>this.ke(n,g))),u<9&&l>=9&&(E=E.next(()=>{(function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")})(n),function(C){const A=C.objectStore(pn.store);A.createIndex(pn.readTimeIndex,pn.readTimeIndexPath,{unique:!1}),A.createIndex(pn.collectionReadTimeIndex,pn.collectionReadTimeIndexPath,{unique:!1})}(r)})),u<10&&l>=10&&(E=E.next(()=>this.$e(g))),u<11&&l>=11&&(E=E.next(()=>{(function(C){C.createObjectStore(Bu.store,{keyPath:Bu.keyPath})})(n),function(C){C.createObjectStore(vf.store,{keyPath:vf.keyPath})}(n)})),E}Ne(n){let r=0;return n.store(pn.store).Kt((u,l)=>{r+=Lg(l)}).next(()=>{const u=new rs(r);return n.store(rs.store).put(rs.key,u)})}Ce(n){const r=n.store(bo.store),u=n.store(sn.store);return r.Lt().next(l=>be.forEach(l,g=>{const E=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return u.Lt(sn.userMutationsIndex,E).next(C=>be.forEach(C,A=>{ct(A.userId===g.userId);const N=Sa(this.N,A);return ww(n,g.userId,N).next(()=>{})}))}))}xe(n){const r=n.store(mr.store),u=n.store(pn.store);return n.store(hi.store).get(hi.key).next(l=>{const g=[];return u.Kt((E,C)=>{const A=new Mt(E),N=[0,Fs(A)];g.push(r.get(N).next(O=>O?be.resolve():r.put(new mr(0,Fs(A),l.highestListenSequenceNumber))))}).next(()=>be.waitFor(g))})}ke(n,r){n.createObjectStore(Ta.store,{keyPath:Ta.keyPath});const u=r.store(Ta.store),l=new Fg,g=E=>{if(l.add(E)){const C=E.lastSegment(),A=E.popLast();return u.put({collectionId:C,parent:Fs(A)})}};return r.store(pn.store).Kt({qt:!0},(E,C)=>{const A=new Mt(E);return g(A.popLast())}).next(()=>r.store(Ar.store).Kt({qt:!0},([E,C,A],N)=>{const O=Ls(C);return g(O.popLast())}))}$e(n){const r=n.store(Hn.store);return r.Kt((u,l)=>{const g=Na(l),E=M_(this.N,g);return r.put(E)})}}function Rw(o){o.createObjectStore(mr.store,{keyPath:mr.keyPath}).createIndex(mr.documentTargetsIndex,mr.documentTargetsKeyPath,{unique:!0}),o.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.queryTargetsIndexName,Hn.queryTargetsKeyPath,{unique:!0}),o.createObjectStore(hi.store)}const Ra="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ow{constructor(n,r,u,l,g,E,C,A,N,O){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=u,this.Oe=g,this.window=E,this.document=C,this.Fe=N,this.Me=O,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=F=>Promise.resolve(),!Ow.bt())throw new Se(re.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nw(this,l),this.We=r+"main",this.N=new pw(A),this.Ge=new On(this.We,11,new AC(this.N)),this.ze=new TC(this.referenceDelegate,this.N),this.Ht=new _w,this.He=new xw(this.N,this.Ht),this.Je=new mw,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===O&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(re.FAILED_PRECONDITION,Ra);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Ai(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var u=(0,ne.Z)(function*(l){if(r.started)return n(l)});return function(l){return u.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,ne.Z)(function*(u){null===u.newVersion&&(yield n())});return function(u){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,ne.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>V_(n).put(new To(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(Aa(n))return Me("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Zu(n).get(kt.key).next(r=>be.resolve(this.cn(r)))}un(n){return V_(n).delete(this.clientId)}hn(){var n=this;return(0,ne.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",u=>{const l=Sr(u,To.store);return l.Lt().next(g=>{const E=n.fn(g,18e5),C=g.filter(A=>-1===E.indexOf(A));return be.forEach(C,A=>l.delete(A.clientId)).next(()=>C)})}).catch(()=>[]);if(n.Ye)for(const u of r)n.Ye.removeItem(n.dn(u.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?be.resolve(!0):Zu(n).get(kt.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Se(re.FAILED_PRECONDITION,Ra);return!1}}return!(!this.networkEnabled||!this.inForeground)||V_(n).Lt().next(u=>void 0===this.fn(u,5e3).find(l=>{if(this.clientId!==l.clientId){const E=!this.inForeground&&l.inForeground,C=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||E&&C)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&Me("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,ne.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[kt.store,To.store],r=>{const u=new fw(r,Ai.T);return n.on(u).next(()=>n.un(u))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(u=>this.ln(u.updateTimeMs,r)&&!this.wn(u.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>V_(n).Lt().next(r=>this.fn(r,18e5).map(u=>u.clientId)))}get started(){return this.Be}getMutationQueue(n){return P_.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,u){let g;return Me("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",lw,E=>(g=new fw(E,this.Le?this.Le.next():Ai.T),"readwrite-primary"===r?this.sn(g).next(C=>!!C||this.rn(g)).next(C=>{if(!C)throw xn(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Se(re.FAILED_PRECONDITION,Rg);return u(g)}).next(C=>this.an(g).next(()=>C)):this.En(g).next(()=>u(g)))).then(E=>(g.raiseOnCommittedEvent(),E))}En(n){return Zu(n).get(kt.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Se(re.FAILED_PRECONDITION,Ra)})}an(n){const r=new kt(this.clientId,this.allowTabSynchronization,Date.now());return Zu(n).put(kt.key,r)}static bt(){return On.bt()}on(n){const r=Zu(n);return r.get(kt.key).next(u=>this.cn(u)?(Me("IndexedDbPersistence","Releasing primary lease."),r.delete(kt.key)):be.resolve())}ln(n,r){const u=Date.now();return!(n<u-r||n>u&&(xn(`Detected an update time that is in the future: ${n} > ${u}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,Ct.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const u=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return Me("IndexedDbPersistence",`Client '${n}' ${u?"is":"is not"} zombied in LocalStorage`),u}catch(u){return xn("IndexedDbPersistence","Failed to get zombied client id.",u),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){xn("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Zu(o){return Sr(o,kt.store)}function V_(o){return Sr(o,To.store)}function Vg(o,n){let r=o.projectId;return o.isDefaultDatabase||(r+="."+o.database),"firestore/"+n+"/"+r+"/"}class Pw{constructor(n,r){this.progress=n,this.Tn=r}}class SC{constructor(n,r,u){this.He=n,this.In=r,this.Ht=u}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(u=>this.Rn(n,r,u))}Rn(n,r,u){return this.He.getEntry(n,r).next(l=>{for(const g of u)g.applyToLocalView(l);return l})}bn(n,r){n.forEach((u,l)=>{for(const g of r)g.applyToLocalView(l)})}Pn(n,r){return this.He.getEntries(n,r).next(u=>this.vn(n,u).next(()=>u))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(u=>this.bn(r,u))}getDocumentsMatchingQuery(n,r,u){return Ze.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(n,r.path):Ia(r)?this.Sn(n,r,u):this.Dn(n,r,u);var l}Vn(n,r){return this.An(n,new Ze(r)).next(u=>{let l=y_();return u.isFoundDocument()&&(l=l.insert(u.key,u)),l})}Sn(n,r,u){const l=r.collectionGroup;let g=y_();return this.Ht.getCollectionParents(n,l).next(E=>be.forEach(E,C=>{const A=(N=r,O=C.child(l),new li(O,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt));var N,O;return this.Dn(n,A,u).next(N=>{N.forEach((O,F)=>{g=g.insert(O,F)})})}).next(()=>g))}Dn(n,r,u){let l,g;return this.He.getDocumentsMatchingQuery(n,r,u).next(E=>(l=E,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(E=>(g=E,this.Cn(n,g,l).next(C=>{l=C;for(const A of g)for(const N of A.mutations){const O=N.key;let F=l.get(O);null==F&&(F=rn.newInvalidDocument(O),l=l.insert(O,F)),vg(N,F,A.localWriteTime),F.isFoundDocument()||(l=l.remove(O))}}))).next(()=>(l.forEach((E,C)=>{ks(r,C)||(l=l.remove(E))}),l))}Cn(n,r,u){let l=Ut();for(const E of r)for(const C of E.mutations)C instanceof ku&&null===u.get(C.key)&&(l=l.add(C.key));let g=u;return this.He.getEntries(n,l).next(E=>(E.forEach((C,A)=>{A.isFoundDocument()&&(g=g.insert(C,A))}),g))}}class rt{constructor(n,r,u,l){this.targetId=n,this.fromCache=r,this.Nn=u,this.xn=l}static kn(n,r){let u=Ut(),l=Ut();for(const g of r.docChanges)switch(g.type){case 0:u=u.add(g.doc.key);break;case 1:l=l.add(g.doc.key)}return new rt(n,r.fromCache,u,l)}}class kw{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,u,l){return 0===(g=r).filters.length&&null===g.limit&&null==g.startAt&&null==g.endAt&&(0===g.explicitOrderBy.length||1===g.explicitOrderBy.length&&g.explicitOrderBy[0].field.isKeyField())||u.isEqual(mt.min())?this.Fn(n,r):this.On.Pn(n,l).next(g=>{const E=this.Mn(r,g);return(Ru(r)||Ur(r))&&this.Ln(r.limitType,E,l,u)?this.Fn(n,r):(e_()<=xs.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Da(r)),this.On.getDocumentsMatchingQuery(n,r,u).next(C=>(E.forEach(A=>{C=C.insert(A.key,A)}),C)))});var g}Mn(n,r){let u=new En(a_(n));return r.forEach((l,g)=>{ks(n,g)&&(u=u.add(g))}),u}Ln(n,r,u,l){if(u.size!==r.size)return!0;const g="F"===n?r.last():r.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(l)>0)}Fn(n,r){return e_()<=xs.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",Da(r)),this.On.getDocumentsMatchingQuery(n,r,mt.min())}}class NC{constructor(n,r,u,l){this.persistence=n,this.Bn=r,this.N=l,this.Un=new rr(Qe),this.qn=new zu(g=>pg(g),jl),this.Kn=mt.min(),this.In=n.getMutationQueue(u),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new SC(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function Fw(o,n,r,u){return new NC(o,n,r,u)}function wf(o,n){return U_.apply(this,arguments)}function U_(){return(U_=(0,ne.Z)(function*(o,n){const r=Fe(o);let u=r.In,l=r.Qn;const g=yield r.persistence.runTransaction("Handle user change","readonly",E=>{let C;return r.In.getAllMutationBatches(E).next(A=>(C=A,u=r.persistence.getMutationQueue(n),l=new SC(r.jn,u,r.persistence.getIndexManager()),u.getAllMutationBatches(E))).next(A=>{const N=[],O=[];let F=Ut();for(const Q of C){N.push(Q.batchId);for(const ie of Q.mutations)F=F.add(ie.key)}for(const Q of A){O.push(Q.batchId);for(const ie of Q.mutations)F=F.add(ie.key)}return l.Pn(E,F).next(Q=>({Wn:Q,removedBatchIds:N,addedBatchIds:O}))})});return r.In=u,r.Qn=l,r.Bn.$n(r.Qn),g})).apply(this,arguments)}function Ug(o,n){const r=Fe(o);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",u=>{const l=n.batch.keys(),g=r.jn.newChangeBuffer({trackRemovals:!0});return function(E,C,A,N){const O=A.batch,F=O.keys();let Q=be.resolve();return F.forEach(ie=>{Q=Q.next(()=>N.getEntry(C,ie)).next(Ie=>{const Be=A.docVersions.get(ie);ct(null!==Be),Ie.version.compareTo(Be)<0&&(O.applyToRemoteDocument(Ie,A),Ie.isValidDocument()&&N.addEntry(Ie,A.commitVersion))})}),Q.next(()=>E.In.removeMutationBatch(C,O))}(r,u,n,g).next(()=>g.apply(u)).next(()=>r.In.performConsistencyCheck(u)).next(()=>r.Qn.Pn(u,l))})}function If(o){const n=Fe(o);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function wn(o,n){const r=Fe(o),u=n.snapshotVersion;let l=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const E=r.jn.newChangeBuffer({trackRemovals:!0});l=r.Un;const C=[];n.targetChanges.forEach((N,O)=>{const F=l.get(O);if(!F)return;C.push(r.ze.removeMatchingKeys(g,N.removedDocuments,O).next(()=>r.ze.addMatchingKeys(g,N.addedDocuments,O)));const Q=N.resumeToken;if(Q.approximateByteSize()>0){const ie=F.withResumeToken(Q,u).withSequenceNumber(g.currentSequenceNumber);l=l.insert(O,ie),Ie=F,tt=N,ct((Be=ie).resumeToken.approximateByteSize()>0),(0===Ie.resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-Ie.snapshotVersion.toMicroseconds()>=3e8||tt.addedDocuments.size+tt.modifiedDocuments.size+tt.removedDocuments.size>0)&&C.push(r.ze.updateTargetData(g,ie))}var Ie,Be,tt});let A=di();if(n.documentUpdates.forEach((N,O)=>{n.resolvedLimboDocuments.has(N)&&C.push(r.persistence.referenceDelegate.updateLimboDocument(g,N))}),C.push(xC(g,E,n.documentUpdates,u,void 0).next(N=>{A=N})),!u.isEqual(mt.min())){const N=r.ze.getLastRemoteSnapshotVersion(g).next(O=>r.ze.setTargetsMetadata(g,g.currentSequenceNumber,u));C.push(N)}return be.waitFor(C).next(()=>E.apply(g)).next(()=>r.Qn.vn(g,A)).next(()=>A)}).then(g=>(r.Un=l,g))}function xC(o,n,r,u,l){let g=Ut();return r.forEach(E=>g=g.add(E)),n.getEntries(o,g).next(E=>{let C=di();return r.forEach((A,N)=>{const O=E.get(A),F=(null==l?void 0:l.get(A))||u;N.isNoDocument()&&N.version.isEqual(mt.min())?(n.removeEntry(A,F),C=C.insert(A,N)):!O.isValidDocument()||N.version.compareTo(O.version)>0||0===N.version.compareTo(O.version)&&O.hasPendingWrites?(n.addEntry(N,F),C=C.insert(A,N)):Me("LocalStore","Ignoring outdated watch update for ",A,". Current version:",O.version," Watch version:",N.version)}),C})}function Lw(o,n){const r=Fe(o);return r.persistence.runTransaction("Get next mutation batch","readonly",u=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(u,n)))}function Oa(o,n){const r=Fe(o);return r.persistence.runTransaction("Allocate target","readwrite",u=>{let l;return r.ze.getTargetData(u,n).next(g=>g?(l=g,be.resolve(l)):r.ze.allocateTargetId(u).next(E=>(l=new Ao(n,E,0,u.currentSequenceNumber),r.ze.addTargetData(u,l).next(()=>l))))}).then(u=>{const l=r.Un.get(u.targetId);return(null===l||u.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Un=r.Un.insert(u.targetId,u),r.qn.set(n,u.targetId)),u})}function Jl(o,n,r){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,ne.Z)(function*(o,n,r){const u=Fe(o),l=u.Un.get(n),g=r?"readwrite":"readwrite-primary";try{r||(yield u.persistence.runTransaction("Release target",g,E=>u.persistence.referenceDelegate.removeTarget(E,l)))}catch(E){if(!Aa(E))throw E;Me("LocalStore",`Failed to update sequence numbers for target ${n}: ${E}`)}u.Un=u.Un.remove(n),u.qn.delete(l.target)})).apply(this,arguments)}function Df(o,n,r){const u=Fe(o);let l=mt.min(),g=Ut();return u.persistence.runTransaction("Execute query","readonly",E=>function(C,A,N){const O=Fe(C),F=O.qn.get(N);return void 0!==F?be.resolve(O.Un.get(F)):O.ze.getTargetData(A,N)}(u,E,gr(n)).next(C=>{if(C)return l=C.lastLimboFreeSnapshotVersion,u.ze.getMatchingKeysForTargetId(E,C.targetId).next(A=>{g=A})}).next(()=>u.Bn.getDocumentsMatchingQuery(E,n,r?l:mt.min(),r?g:Ut())).next(C=>({documents:C,Gn:g})))}function B_(o,n){const r=Fe(o),u=Fe(r.ze),l=r.Un.get(n);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",g=>u.Et(g,n).next(E=>E?E.target:null))}function j_(o){const n=Fe(o);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(u,l,g){const E=Fe(u);let C=di(),A=Kl(g);const N=So(l),O=IDBKeyRange.lowerBound(A,!0);return N.Kt({index:pn.readTimeIndex,range:O},(F,Q)=>{const ie=Pg(E.N,Q);C=C.insert(ie.key,ie),A=Q.readTime}).next(()=>({Tn:C,readTime:gw(A)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:u})=>(n.Kn=u,r))}function H_(){return(H_=(0,ne.Z)(function*(o){const n=Fe(o);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(u){const l=So(u);let g=mt.min();return l.Kt({index:pn.readTimeIndex,reverse:!0},(E,C,A)=>{C.readTime&&(g=gw(C.readTime)),A.done()}).next(()=>g)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function Ku(){return(Ku=(0,ne.Z)(function*(o,n,r,u){const l=Fe(o);let g=Ut(),E=di(),C=K0();for(const O of r){const F=n.zn(O.metadata.name);O.document&&(g=g.add(F)),E=E.insert(F,n.Hn(O)),C=C.insert(F,n.Jn(O.metadata.readTime))}const A=l.jn.newChangeBuffer({trackRemovals:!0}),N=yield Oa(l,(O=u,gr(Ni(Mt.fromString(`__bundle__/docs/${O}`)))));var O;return l.persistence.runTransaction("Apply bundle documents","readwrite",O=>xC(O,A,E,mt.min(),C).next(F=>(A.apply(O),F)).next(F=>l.ze.removeMatchingKeysForTargetId(O,N.targetId).next(()=>l.ze.addMatchingKeys(O,g,N.targetId)).next(()=>l.Qn.vn(O,F)).next(()=>F)))})).apply(this,arguments)}function OC(o,n){return $_.apply(this,arguments)}function $_(){return($_=(0,ne.Z)(function*(o,n,r=Ut()){const u=yield Oa(o,gr(kg(n.bundledQuery))),l=Fe(o);return l.persistence.runTransaction("Save named query","readwrite",g=>{const E=Rn(n.readTime);if(u.snapshotVersion.compareTo(E)>=0)return l.Je.saveNamedQuery(g,n);const C=u.withResumeToken(nr.EMPTY_BYTE_STRING,E);return l.Un=l.Un.insert(C.targetId,C),l.ze.updateTargetData(g,C).next(()=>l.ze.removeMatchingKeysForTargetId(g,u.targetId)).next(()=>l.ze.addMatchingKeys(g,r,u.targetId)).next(()=>l.Je.saveNamedQuery(g,n))})})).apply(this,arguments)}class PC{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return be.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var u;return this.Yn.set(r.id,{id:(u=r).id,version:u.version,createTime:Rn(u.createTime)}),be.resolve()}getNamedQuery(n,r){return be.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(u=r).name,query:kg(u.bundledQuery),readTime:Rn(u.readTime)}),be.resolve();var u}}class Xl{constructor(){this.Zn=new En($n.ts),this.es=new En($n.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const u=new $n(n,r);this.Zn=this.Zn.add(u),this.es=this.es.add(u)}ss(n,r){n.forEach(u=>this.addReference(u,r))}removeReference(n,r){this.rs(new $n(n,r))}os(n,r){n.forEach(u=>this.removeReference(u,r))}cs(n){const r=new Ze(new Mt([])),u=new $n(r,n),l=new $n(r,n+1),g=[];return this.es.forEachInRange([u,l],E=>{this.rs(E),g.push(E.key)}),g}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Ze(new Mt([])),u=new $n(r,n),l=new $n(r,n+1);let g=Ut();return this.es.forEachInRange([u,l],E=>{g=g.add(E.key)}),g}containsKey(n){const r=new $n(n,0),u=this.Zn.firstAfterOrEqual(r);return null!==u&&n.isEqual(u.key)}}class $n{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Ze.comparator(n.key,r.key)||Qe(n.ls,r.ls)}static ns(n,r){return Qe(n.ls,r.ls)||Ze.comparator(n.key,r.key)}}class Vw{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new En($n.ts)}checkEmpty(n){return be.resolve(0===this.In.length)}addMutationBatch(n,r,u,l){const g=this.fs;this.fs++;const E=new Hu(g,r,u,l);this.In.push(E);for(const C of l)this.ds=this.ds.add(new $n(C.key,g)),this.Ht.addToCollectionParentIndex(n,C.key.path.popLast());return be.resolve(E)}lookupMutationBatch(n,r){return be.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const l=this._s(r+1),g=l<0?0:l;return be.resolve(this.In.length>g?this.In[g]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return be.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const u=new $n(r,0),l=new $n(r,Number.POSITIVE_INFINITY),g=[];return this.ds.forEachInRange([u,l],E=>{const C=this.ws(E.ls);g.push(C)}),be.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(n,r){let u=new En(Qe);return r.forEach(l=>{const g=new $n(l,0),E=new $n(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([g,E],C=>{u=u.add(C.ls)})}),be.resolve(this.gs(u))}getAllMutationBatchesAffectingQuery(n,r){const u=r.path,l=u.length+1;let g=u;Ze.isDocumentKey(g)||(g=g.child(""));const E=new $n(new Ze(g),0);let C=new En(Qe);return this.ds.forEachWhile(A=>{const N=A.key.path;return!!u.isPrefixOf(N)&&(N.length===l&&(C=C.add(A.ls)),!0)},E),be.resolve(this.gs(C))}gs(n){const r=[];return n.forEach(u=>{const l=this.ws(u);null!==l&&r.push(l)}),r}removeMutationBatch(n,r){ct(0===this.ys(r.batchId,"removed")),this.In.shift();let u=this.ds;return be.forEach(r.mutations,l=>{const g=new $n(l.key,r.batchId);return u=u.delete(g),this.referenceDelegate.markPotentiallyOrphaned(n,l.key)}).next(()=>{this.ds=u})}te(n){}containsKey(n,r){const u=new $n(r,0),l=this.ds.firstAfterOrEqual(u);return be.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(n){return be.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class Uw{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new rr(Ze.comparator),this.size=0}addEntry(n,r,u){const l=r.key,g=this.docs.get(l),E=g?g.size:0,C=this.ps(r);return this.docs=this.docs.insert(l,{document:r.clone(),size:C,readTime:u}),this.size+=C-E,this.Ht.addToCollectionParentIndex(n,l.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const u=this.docs.get(r);return be.resolve(u?u.document.clone():rn.newInvalidDocument(r))}getEntries(n,r){let u=di();return r.forEach(l=>{const g=this.docs.get(l);u=u.insert(l,g?g.document.clone():rn.newInvalidDocument(l))}),be.resolve(u)}getDocumentsMatchingQuery(n,r,u){let l=di();const g=new Ze(r.path.child("")),E=this.docs.getIteratorFrom(g);for(;E.hasNext();){const{key:C,value:{document:A,readTime:N}}=E.getNext();if(!r.path.isPrefixOf(C.path))break;N.compareTo(u)<=0||ks(r,A)&&(l=l.insert(A.key,A.clone()))}return be.resolve(l)}Es(n,r){return be.forEach(this.docs,u=>r(u))}newChangeBuffer(n){return new kC(this)}getSize(n){return be.resolve(this.size)}}class kC extends F_{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((u,l)=>{l.document.isValidDocument()?r.push(this.Se.addEntry(n,l.document,this.getReadTime(u))):this.Se.removeEntry(u)}),be.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class Cf{constructor(n){this.persistence=n,this.Ts=new zu(r=>pg(r),jl),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Is=0,this.As=new Xl,this.targetCount=0,this.Rs=qu.se()}forEachTarget(n,r){return this.Ts.forEach((u,l)=>r(l)),be.resolve()}getLastRemoteSnapshotVersion(n){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return be.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(n,r,u){return u&&(this.lastRemoteSnapshotVersion=u),r>this.Is&&(this.Is=r),be.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new qu(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,be.resolve()}updateTargetData(n,r){return this.ae(r),be.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,be.resolve()}removeTargets(n,r,u){let l=0;const g=[];return this.Ts.forEach((E,C)=>{C.sequenceNumber<=r&&null===u.get(C.targetId)&&(this.Ts.delete(E),g.push(this.removeMatchingKeysForTargetId(n,C.targetId)),l++)}),be.waitFor(g).next(()=>l)}getTargetCount(n){return be.resolve(this.targetCount)}getTargetData(n,r){const u=this.Ts.get(r)||null;return be.resolve(u)}addMatchingKeys(n,r,u){return this.As.ss(r,u),be.resolve()}removeMatchingKeys(n,r,u){this.As.os(r,u);const l=this.persistence.referenceDelegate,g=[];return l&&r.forEach(E=>{g.push(l.markPotentiallyOrphaned(n,E))}),be.waitFor(g)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),be.resolve()}getMatchingKeysForTargetId(n,r){const u=this.As.hs(r);return be.resolve(u)}containsKey(n,r){return be.resolve(this.As.containsKey(r))}}class bf{constructor(n,r){this.bs={},this.Le=new Ai(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new Cf(this),this.Ht=new yw,this.He=new Uw(this.Ht,u=>this.referenceDelegate.Ps(u)),this.N=new pw(r),this.Je=new PC(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new Vw(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,u){Me("MemoryPersistence","Starting transaction:",n);const l=new FC(this.Le.next());return this.referenceDelegate.vs(),u(l).next(g=>this.referenceDelegate.Vs(l).next(()=>g)).toPromise().then(g=>(l.raiseOnCommittedEvent(),g))}Ss(n,r){return be.or(Object.values(this.bs).map(u=>()=>u.containsKey(n,r)))}}class FC extends is{constructor(n){super(),this.currentSequenceNumber=n}}class G_{constructor(n){this.persistence=n,this.Ds=new Xl,this.Cs=null}static Ns(n){return new G_(n)}get xs(){if(this.Cs)return this.Cs;throw ze()}addReference(n,r,u){return this.Ds.addReference(u,r),this.xs.delete(u.toString()),be.resolve()}removeReference(n,r,u){return this.Ds.removeReference(u,r),this.xs.add(u.toString()),be.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),be.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(l=>this.xs.add(l.toString()));const u=this.persistence.getTargetCache();return u.getMatchingKeysForTargetId(n,r.targetId).next(l=>{l.forEach(g=>this.xs.add(g.toString()))}).next(()=>u.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.xs,u=>{const l=Ze.fromPath(u);return this.ks(n,l).next(g=>{g||r.removeEntry(l)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(u=>{u?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return be.or([()=>be.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function Bw(o,n){return`firestore_clients_${o}_${n}`}function q_(o,n,r){let u=`firestore_mutations_${o}_${r}`;return n.isAuthenticated()&&(u+=`_${n.uid}`),u}function jg(o,n){return`firestore_targets_${o}_${n}`}class Tf{constructor(n,r,u,l){this.user=n,this.batchId=r,this.state=u,this.error=l}static $s(n,r,u){const l=JSON.parse(u);let g,E="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return E&&l.error&&(E="string"==typeof l.error.message&&"string"==typeof l.error.code,E&&(g=new Se(l.error.code,l.error.message))),E?new Tf(n,r,l.state,g):(xn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${u}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Af{constructor(n,r,u){this.targetId=n,this.state=r,this.error=u}static $s(n,r){const u=JSON.parse(r);let l,g="object"==typeof u&&-1!==["not-current","current","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(l=new Se(u.error.code,u.error.message))),g?new Af(n,u.state,l):(xn("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Sf{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const u=JSON.parse(r);let l="object"==typeof u&&u.activeTargetIds instanceof Array,g=Dg();for(let E=0;l&&E<u.activeTargetIds.length;++E)l=R0(u.activeTargetIds[E]),g=g.add(u.activeTargetIds[E]);return l?new Sf(n,g):(xn("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class W_{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new W_(r.clientId,r.onlineState):(xn("SharedClientState",`Failed to parse online state: ${n}`),null)}}class z_{constructor(){this.activeTargetIds=Dg()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class jw{constructor(n,r,u,l,g){this.window=n,this.Oe=r,this.persistenceKey=u,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new rr(Qe),this.started=!1,this.Ks=[];const E=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.js=Bw(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new z_),this.Ws=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(C){return`firestore_bundle_loaded_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,ne.Z)(function*(){const r=yield n.syncEngine.pn();for(const l of r){if(l===n.Ls)continue;const g=n.getItem(Bw(n.persistenceKey,l));if(g){const E=Sf.$s(l,g);E&&(n.qs=n.qs.insert(E.clientId,E))}}n.Ys();const u=n.storage.getItem(n.Hs);if(u){const l=n.Xs(u);l&&n.Zs(l)}for(const l of n.Ks)n.Us(l);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((u,l)=>{l.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,u){this.ei(n,r,u),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const u=this.storage.getItem(jg(this.persistenceKey,n));if(u){const l=Af.$s(n,u);l&&(r=l.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(jg(this.persistenceKey,n))}updateQueryState(n,r,u){this.ii(n,r,u)}handleUserChange(n,r,u){r.forEach(l=>{this.ni(l)}),this.currentUser=n,u.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return Me("SharedClientState","READ",n,r),r}setItem(n,r){Me("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){Me("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const u=n;if(u.storageArea===this.storage){if(Me("SharedClientState","EVENT",u.key,u.newValue),u.key===this.js)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ne.Z)(function*(){if(r.started){if(null!==u.key)if(r.Ws.test(u.key)){if(null==u.newValue){const l=r.ai(u.key);return r.ci(l,null)}{const l=r.ui(u.key,u.newValue);if(l)return r.ci(l.clientId,l)}}else if(r.Gs.test(u.key)){if(null!==u.newValue){const l=r.hi(u.key,u.newValue);if(l)return r.li(l)}}else if(r.zs.test(u.key)){if(null!==u.newValue){const l=r.fi(u.key,u.newValue);if(l)return r.di(l)}}else if(u.key===r.Hs){if(null!==u.newValue){const l=r.Xs(u.newValue);if(l)return r.Zs(l)}}else if(u.key===r.Qs){const l=function(g){let E=Ai.T;if(null!=g)try{const C=JSON.parse(g);ct("number"==typeof C),E=C}catch(C){xn("SharedClientState","Failed to read sequence number from WebStorage",C)}return E}(u.newValue);l!==Ai.T&&r.sequenceNumberHandler(l)}else if(u.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(u)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,u){const l=new Tf(this.currentUser,n,r,u),g=q_(this.persistenceKey,this.currentUser,n);this.setItem(g,l.Os())}ni(n){const r=q_(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,u){const l=jg(this.persistenceKey,n),g=new Af(n,r,u);this.setItem(l,g.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const u=this.ai(n);return Sf.$s(u,r)}hi(n,r){const u=this.Gs.exec(n),l=Number(u[1]);return Tf.$s(new Xn(void 0!==u[2]?u[2]:null),l,r)}fi(n,r){const u=this.zs.exec(n),l=Number(u[1]);return Af.$s(l,r)}Xs(n){return W_.$s(n)}li(n){var r=this;return(0,ne.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);Me("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const u=r?this.qs.insert(n,r):this.qs.remove(n),l=this.ti(this.qs),g=this.ti(u),E=[],C=[];return g.forEach(A=>{l.has(A)||E.push(A)}),l.forEach(A=>{g.has(A)||C.push(A)}),this.syncEngine.gi(E,C).then(()=>{this.qs=u})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Dg();return n.forEach((u,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class LC{constructor(){this.yi=new z_,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,u){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,u){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new z_,Promise.resolve()}handleUserChange(n,r,u){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class YT{Ei(n){}shutdown(){}}class VC{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Hg{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class UC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,u,l){const g=this.Bi(n,r);Me("RestConnection","Sending: ",g,u);const E={};return this.Ui(E,l),this.qi(n,g,E,u).then(C=>(Me("RestConnection","Received: ",C),C),C=>{throw Fl("RestConnection",`${n} failed with error: `,C,"url: ",g,"request:",u),C})}Ki(n,r,u,l){return this.Li(n,r,u,l)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Rs,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const u in r.authHeaders)r.authHeaders.hasOwnProperty(u)&&(n[u]=r.authHeaders[u])}Bi(n,r){return`${this.Fi}/v1/${r}:${Hw[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,u,l){return new Promise((g,E)=>{const C=new kl;C.listenOnce(Co.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case sg.NO_ERROR:const N=C.getResponseJson();Me("Connection","XHR received:",JSON.stringify(N)),g(N);break;case sg.TIMEOUT:Me("Connection",'RPC "'+n+'" timed out'),E(new Se(re.DEADLINE_EXCEEDED,"Request time out"));break;case sg.HTTP_ERROR:const O=C.getStatus();if(Me("Connection",'RPC "'+n+'" failed with status:',O,"response text:",C.getResponseText()),O>0){const F=C.getResponseJson().error;if(F&&F.status&&F.message){const Q=function(ie){const Ie=ie.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Ie)>=0?Ie:re.UNKNOWN}(F.status);E(new Se(Q,F.message))}else E(new Se(re.UNKNOWN,"Server responded with status "+C.getStatus()))}else E(new Se(re.UNAVAILABLE,"Connection failed."));break;default:ze()}}finally{Me("Connection",'RPC "'+n+'" completed.')}});const A=JSON.stringify(l);C.send(r,"POST",A,u,15)})}ji(n,r){const u=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],l=T0(),g=A0(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(E.xmlHttpFactory=new zD({})),this.Ui(E.initMessageHeaders,r),(0,Ct.uI)()||(0,Ct.b$)()||(0,Ct.d)()||(0,Ct.w1)()||(0,Ct.Mn)()||(0,Ct.ru)()||(E.httpHeadersOverwriteParam="$httpHeaders");const C=u.join("");Me("Connection","Creating WebChannel: "+C,E);const A=l.createWebChannel(C,E);let N=!1,O=!1;const F=new Hg({vi:ie=>{O?Me("Connection","Not sending because WebChannel is closed:",ie):(N||(Me("Connection","Opening WebChannel transport."),A.open(),N=!0),Me("Connection","WebChannel sending:",ie),A.send(ie))},Vi:()=>A.close()}),Q=(ie,Ie,Be)=>{ie.listen(Ie,tt=>{try{Be(tt)}catch(Ot){setTimeout(()=>{throw Ot},0)}})};return Q(A,Xy.EventType.OPEN,()=>{O||Me("Connection","WebChannel transport opened.")}),Q(A,Xy.EventType.CLOSE,()=>{O||(O=!0,Me("Connection","WebChannel transport closed"),F.$i())}),Q(A,Xy.EventType.ERROR,ie=>{O||(O=!0,Fl("Connection","WebChannel transport errored:",ie),F.$i(new Se(re.UNAVAILABLE,"The operation could not be completed")))}),Q(A,Xy.EventType.MESSAGE,ie=>{var Ie;if(!O){const Be=ie.data[0];ct(!!Be);const tt=Be,Ot=tt.error||(null===(Ie=tt[0])||void 0===Ie?void 0:Ie.error);if(Ot){Me("Connection","WebChannel received error:",Ot);const Jt=Ot.status;let Lt=function(Gn){const Kf=jn[Gn];if(void 0!==Kf)return g_(Kf)}(Jt),Xt=Ot.message;void 0===Lt&&(Lt=re.INTERNAL,Xt="Unknown error status: "+Jt+" with message "+Ot.message),O=!0,F.$i(new Se(Lt,Xt)),A.close()}else Me("Connection","WebChannel received:",Be),F.Oi(Be)}}),Q(g,og.STAT_EVENT,ie=>{ie.stat===S0.PROXY?Me("Connection","Detected buffering proxy"):ie.stat===S0.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.ki()},0),F}}function $w(){return"undefined"!=typeof window?window:null}function Nf(){return"undefined"!=typeof document?document:null}function No(o){return new E_(o,!0)}class Z_{constructor(n,r,u=1e3,l=1.5,g=6e4){this.Oe=n,this.timerId=r,this.Qi=u,this.Wi=l,this.Gi=g,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),u=Math.max(0,Date.now()-this.Ji),l=Math.max(0,r-u);l>0&&Me("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${u} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Gw{constructor(n,r,u,l,g,E){this.Oe=n,this.er=u,this.nr=l,this.credentialsProvider=g,this.listener=E,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Z_(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,ne.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,ne.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var u=this;return(0,ne.Z)(function*(){u._r(),u.rr.cancel(),u.sr++,3!==n?u.rr.reset():r&&r.code===re.RESOURCE_EXHAUSTED?(xn(r.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),u.rr.Yi()):r&&r.code===re.UNAUTHENTICATED&&u.credentialsProvider.invalidateToken(),null!==u.stream&&(u.mr(),u.stream.close(),u.stream=null),u.state=n,yield u.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(u=>{this.sr===r&&this.yr(u)},u=>{n(()=>{const l=new Se(re.UNKNOWN,"Fetching auth token failed: "+u.message);return this.pr(l)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(u=>{r(()=>this.pr(u))}),this.stream.onMessage(u=>{r(()=>this.onMessage(u))})}ur(){var n=this;this.state=4,this.rr.Xi((0,ne.Z)(function*(){n.state=0,n.start()}))}pr(n){return Me("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BC extends Gw{constructor(n,r,u,l,g){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,u,g),this.N=l}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(o,n){let r;if("targetChange"in n){const u="NO_CHANGE"===(A=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===A?1:"REMOVE"===A?2:"CURRENT"===A?3:"RESET"===A?4:ze(),l=n.targetChange.targetIds||[],g=function(A,N){return A.D?(ct(void 0===N||"string"==typeof N),nr.fromBase64String(N||"")):(ct(void 0===N||N instanceof Uint8Array),nr.fromUint8Array(N||new Uint8Array))}(o,n.targetChange.resumeToken),E=n.targetChange.cause,C=E&&function(A){const N=void 0===A.code?re.UNKNOWN:g_(A.code);return new Se(N,A.message||"")}(E);r=new Cg(u,l,g,C||null)}else if("documentChange"in n){const u=n.documentChange,l=ns(o,u.document.name),g=Rn(u.document.updateTime),E=new Lr({mapValue:{fields:u.document.fields}}),C=rn.newFoundDocument(l,g,E);r=new mf(u.targetIds||[],u.removedTargetIds||[],C.key,C)}else if("documentDelete"in n){const u=n.documentDelete,l=ns(o,u.document),g=u.readTime?Rn(u.readTime):mt.min(),E=rn.newNoDocument(l,g);r=new mf([],u.removedTargetIds||[],E.key,E)}else if("documentRemove"in n){const u=n.documentRemove,l=ns(o,u.document);r=new mf([],u.removedTargetIds||[],l,null)}else{if(!("filter"in n))return ze();{const u=n.filter,g=new KT(u.count||0);r=new __(u.targetId,g)}}var A;return r}(this.N,n),u=function(l){if(!("targetChange"in l))return mt.min();const g=l.targetChange;return g.targetIds&&g.targetIds.length?mt.min():g.readTime?Rn(g.readTime):mt.min()}(n);return this.listener.Tr(r,u)}Ir(n){const r={};r.database=Zl(this.N),r.addTarget=function(l,g){let E;const C=g.target;return E=gg(C)?{documents:xg(l,C)}:{query:b_(l,C)},E.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?E.resumeToken=Q0(l,g.resumeToken):g.snapshotVersion.compareTo(mt.min())>0&&(E.readTime=Lu(l,g.snapshotVersion.toTimestamp())),E}(this.N,n);const u=function(o,n){const r=function(u,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ze()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);u&&(r.labels=u),this.wr(r)}Ar(n){const r={};r.database=Zl(this.N),r.removeTarget=n,this.wr(r)}}class jC extends Gw{constructor(n,r,u,l,g){super(n,"write_stream_connection_backoff","write_stream_idle",r,u,g),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(ct(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(o,n){return o&&o.length>0?(ct(void 0!==n),o.map(r=>function(u,l){let g=Rn(u.updateTime?u.updateTime:l);return g.isEqual(mt.min())&&(g=Rn(l)),new G0(g,u.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),u=Rn(n.commitTime);return this.listener.vr(u,r)}return ct(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Zl(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(u=>Ng(this.N,u))};this.wr(r)}}class HC extends class{}{constructor(n,r,u){super(),this.credentials=n,this.nr=r,this.N=u,this.Dr=!1}Cr(){if(this.Dr)throw new Se(re.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,u){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(n,r,u,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===re.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Se(re.UNKNOWN,l.toString())})}Ki(n,r,u){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(n,r,u,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===re.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Se(re.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class qw{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(xn(r),this.$r=!1):Me("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class $C{constructor(n,r,u,l,g){var E=this;this.localStore=n,this.datastore=r,this.asyncQueue=u,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=g,this.Qr.Ei(C=>{u.enqueueAndForget((0,ne.Z)(function*(){var A;ka(E)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(A=(0,ne.Z)(function*(N){const O=Fe(N);O.Kr.add(4),yield ed(O),O.Wr.set("Unknown"),O.Kr.delete(4),yield xf(O)}),function(N){return A.apply(this,arguments)})(E))}))}),this.Wr=new qw(u,l)}}function xf(o){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,ne.Z)(function*(o){if(ka(o))for(const n of o.jr)yield n(!0)})).apply(this,arguments)}function ed(o){return $g.apply(this,arguments)}function $g(){return($g=(0,ne.Z)(function*(o){for(const n of o.jr)yield n(!1)})).apply(this,arguments)}function Gg(o,n){const r=Fe(o);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),Mf(r)?Q_(r):Yu(r).cr()&&K_(r,n))}function td(o,n){const r=Fe(o),u=Yu(r);r.qr.delete(n),u.cr()&&Y_(r,n),0===r.qr.size&&(u.cr()?u.lr():ka(r)&&r.Wr.set("Unknown"))}function K_(o,n){o.Gr.Y(n.targetId),Yu(o).Ir(n)}function Y_(o,n){o.Gr.Y(n),Yu(o).Ar(n)}function Q_(o){o.Gr=new v_({getRemoteKeysForTarget:n=>o.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>o.qr.get(n)||null}),Yu(o).start(),o.Wr.Or()}function Mf(o){return ka(o)&&!Yu(o).ar()&&o.qr.size>0}function ka(o){return 0===Fe(o).Kr.size}function J_(o){o.Gr=void 0}function Ww(o){return X_.apply(this,arguments)}function X_(){return(X_=(0,ne.Z)(function*(o){o.qr.forEach((n,r)=>{K_(o,n)})})).apply(this,arguments)}function GC(o,n){return ev.apply(this,arguments)}function ev(){return(ev=(0,ne.Z)(function*(o,n){J_(o),Mf(o)?(o.Wr.Lr(n),Q_(o)):o.Wr.set("Unknown")})).apply(this,arguments)}function tv(o,n,r){return nv.apply(this,arguments)}function nv(){return(nv=(0,ne.Z)(function*(o,n,r){if(o.Wr.set("Online"),n instanceof Cg&&2===n.state&&n.cause)try{yield(u=(0,ne.Z)(function*(l,g){const E=g.cause;for(const C of g.targetIds)l.qr.has(C)&&(yield l.remoteSyncer.rejectListen(C,E),l.qr.delete(C),l.Gr.removeTarget(C))}),function(l,g){return u.apply(this,arguments)})(o,n)}catch(u){Me("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),u),yield Rf(o,u)}else if(n instanceof mf?o.Gr.rt(n):n instanceof __?o.Gr.ft(n):o.Gr.ct(n),!r.isEqual(mt.min()))try{const u=yield If(o.localStore);r.compareTo(u)>=0&&(yield function(l,g){const E=l.Gr._t(g);return E.targetChanges.forEach((C,A)=>{if(C.resumeToken.approximateByteSize()>0){const N=l.qr.get(A);N&&l.qr.set(A,N.withResumeToken(C.resumeToken,g))}}),E.targetMismatches.forEach(C=>{const A=l.qr.get(C);if(!A)return;l.qr.set(C,A.withResumeToken(nr.EMPTY_BYTE_STRING,A.snapshotVersion)),Y_(l,C);const N=new Ao(A.target,C,1,A.sequenceNumber);K_(l,N)}),l.remoteSyncer.applyRemoteEvent(E)}(o,r))}catch(u){Me("RemoteStore","Failed to raise snapshot:",u),yield Rf(o,u)}var u})).apply(this,arguments)}function Rf(o,n,r){return rv.apply(this,arguments)}function rv(){return(rv=(0,ne.Z)(function*(o,n,r){if(!Aa(n))throw n;o.Kr.add(1),yield ed(o),o.Wr.set("Offline"),r||(r=()=>If(o.localStore)),o.asyncQueue.enqueueRetryable((0,ne.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield r(),o.Kr.delete(1),yield xf(o)}))})).apply(this,arguments)}function zw(o,n){return n().catch(r=>Rf(o,r,n))}function nd(o){return iv.apply(this,arguments)}function iv(){return(iv=(0,ne.Z)(function*(o){const n=Fe(o),r=Us(n);let u=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;qC(n);)try{const l=yield Lw(n.localStore,u);if(null===l){0===n.Ur.length&&r.lr();break}u=l.batchId,WC(n,l)}catch(l){yield Rf(n,l)}Zw(n)&&Kw(n)})).apply(this,arguments)}function qC(o){return ka(o)&&o.Ur.length<10}function WC(o,n){o.Ur.push(n);const r=Us(o);r.cr()&&r.br&&r.Pr(n.mutations)}function Zw(o){return ka(o)&&!Us(o).ar()&&o.Ur.length>0}function Kw(o){Us(o).start()}function Yw(o){return qg.apply(this,arguments)}function qg(){return(qg=(0,ne.Z)(function*(o){Us(o).Sr()})).apply(this,arguments)}function zC(o){return sv.apply(this,arguments)}function sv(){return(sv=(0,ne.Z)(function*(o){const n=Us(o);for(const r of o.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function Qw(o,n,r){return ov.apply(this,arguments)}function ov(){return(ov=(0,ne.Z)(function*(o,n,r){const u=o.Ur.shift(),l=N_.from(u,n,r);yield zw(o,()=>o.remoteSyncer.applySuccessfulWrite(l)),yield nd(o)})).apply(this,arguments)}function ZC(o,n){return av.apply(this,arguments)}function av(){return(av=(0,ne.Z)(function*(o,n){var r;n&&Us(o).br&&(yield(r=(0,ne.Z)(function*(u,l){if(z0(g=l.code)&&g!==re.ABORTED){const E=u.Ur.shift();Us(u).hr(),yield zw(u,()=>u.remoteSyncer.rejectFailedWrite(E.batchId,l)),yield nd(u)}var g}),function(u,l){return r.apply(this,arguments)})(o,n)),Zw(o)&&Kw(o)})).apply(this,arguments)}function Of(o,n){return Pf.apply(this,arguments)}function Pf(){return(Pf=(0,ne.Z)(function*(o,n){const r=Fe(o);n?(r.Kr.delete(2),yield xf(r)):n||(r.Kr.add(2),yield ed(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function Yu(o){return o.zr||(o.zr=function(n,r,u){const l=Fe(n);return l.Cr(),new BC(r,l.nr,l.credentials,l.N,u)}(o.datastore,o.asyncQueue,{Si:Ww.bind(null,o),Ci:GC.bind(null,o),Tr:tv.bind(null,o)}),o.jr.push(function(){var n=(0,ne.Z)(function*(r){r?(o.zr.hr(),Mf(o)?Q_(o):o.Wr.set("Unknown")):(yield o.zr.stop(),J_(o))});return function(r){return n.apply(this,arguments)}}())),o.zr}function Us(o){return o.Hr||(o.Hr=function(n,r,u){const l=Fe(n);return l.Cr(),new jC(r,l.nr,l.credentials,l.N,u)}(o.datastore,o.asyncQueue,{Si:Yw.bind(null,o),Ci:ZC.bind(null,o),Vr:zC.bind(null,o),vr:Qw.bind(null,o)}),o.jr.push(function(){var n=(0,ne.Z)(function*(r){r?(o.Hr.hr(),yield nd(o)):(yield o.Hr.stop(),o.Ur.length>0&&(Me("RemoteStore",`Stopping write stream with ${o.Ur.length} pending writes`),o.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),o.Hr}class uv{constructor(n,r,u,l,g){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=u,this.op=l,this.removalCallback=g,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(n,r,u,l,g){const E=Date.now()+u,C=new uv(n,r,E,l,g);return C.start(u),C}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(re.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rd(o,n){if(xn("AsyncQueue",`${n}: ${o}`),Aa(o))return new Se(re.UNAVAILABLE,`${n}: ${o}`);throw o}class Fa{constructor(n){this.comparator=n?(r,u)=>n(r,u)||Ze.comparator(r.key,u.key):(r,u)=>Ze.comparator(r.key,u.key),this.keyedMap=y_(),this.sortedSet=new rr(this.comparator)}static emptySet(n){return new Fa(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,u)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof Fa)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),u=n.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,g=u.getNext().key;if(!l.isEqual(g))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const u=new Fa;return u.comparator=this.comparator,u.keyedMap=n,u.sortedSet=r,u}}class Jw{constructor(){this.Jr=new rr(Ze.comparator)}track(n){const r=n.doc.key,u=this.Jr.get(r);u?0!==n.type&&3===u.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==u.type?this.Jr=this.Jr.insert(r,{type:u.type,doc:n.doc}):2===n.type&&2===u.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===u.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===u.type?this.Jr=this.Jr.remove(r):1===n.type&&2===u.type?this.Jr=this.Jr.insert(r,{type:1,doc:u.doc}):0===n.type&&1===u.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):ze():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,u)=>{n.push(u)}),n}}class Qu{constructor(n,r,u,l,g,E,C,A){this.query=n,this.docs=r,this.oldDocs=u,this.docChanges=l,this.mutatedKeys=g,this.fromCache=E,this.syncStateChanged=C,this.excludesMetadataChanges=A}static fromInitialDocuments(n,r,u,l){const g=[];return r.forEach(E=>{g.push({type:0,doc:E})}),new Qu(n,r,Fa.emptySet(r),g,u,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Ps(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,u=n.docChanges;if(r.length!==u.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==u[l].type||!r[l].doc.isEqual(u[l].doc))return!1;return!0}}class KC{constructor(){this.Xr=void 0,this.listeners=[]}}class Xw{constructor(){this.queries=new zu(n=>Pu(n),Ps),this.onlineState="Unknown",this.Zr=new Set}}function Wg(o,n){return zg.apply(this,arguments)}function zg(){return(zg=(0,ne.Z)(function*(o,n){const r=Fe(o),u=n.query;let l=!1,g=r.queries.get(u);if(g||(l=!0,g=new KC),l)try{g.Xr=yield r.onListen(u)}catch(E){const C=rd(E,`Initialization of query '${Da(n.query)}' failed`);return void n.onError(C)}r.queries.set(u,g),g.listeners.push(n),n.eo(r.onlineState),g.Xr&&n.no(g.Xr)&&kf(r)})).apply(this,arguments)}function eI(o,n){return cv.apply(this,arguments)}function cv(){return(cv=(0,ne.Z)(function*(o,n){const r=Fe(o),u=n.query;let l=!1;const g=r.queries.get(u);if(g){const E=g.listeners.indexOf(n);E>=0&&(g.listeners.splice(E,1),l=0===g.listeners.length)}if(l)return r.queries.delete(u),r.onUnlisten(u)})).apply(this,arguments)}function id(o,n){const r=Fe(o);let u=!1;for(const l of n){const E=r.queries.get(l.query);if(E){for(const C of E.listeners)C.no(l)&&(u=!0);E.Xr=l}}u&&kf(r)}function QT(o,n,r){const u=Fe(o),l=u.queries.get(n);if(l)for(const g of l.listeners)g.onError(r);u.queries.delete(n)}function kf(o){o.Zr.forEach(n=>{n.next()})}class sd{constructor(n,r,u){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=u||{}}no(n){if(!this.options.includeMetadataChanges){const u=[];for(const l of n.docChanges)3!==l.type&&u.push(l);n=new Qu(n.query,n.docs,n.oldDocs,u,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=Qu.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class YC{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class Ju{constructor(n){this.N=n}zn(n){return ns(this.N,n)}Hn(n){return n.metadata.exists?Sg(this.N,n.document,!1):rn.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Rn(n)}}class QC{constructor(n,r,u){this.lo=n,this.localStore=r,this.N=u,this.queries=[],this.documents=[],this.progress=JC(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,u=new Ju(this.N);for(const l of n)if(l.metadata.queries){const g=u.zn(l.metadata.name);for(const E of l.metadata.queries){const C=(r.get(E)||Ut()).add(g);r.set(E,C)}}return r}complete(){var n=this;return(0,ne.Z)(function*(){const r=yield function(o,n,r,u){return Ku.apply(this,arguments)}(n.localStore,new Ju(n.N),n.documents,n.lo.id),u=n.wo(n.documents);for(const l of n.queries)yield OC(n.localStore,l,u.get(l.name));return n.progress.taskState="Success",new Pw(Object.assign({},n.progress),r)})()}}function JC(o){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}}class tI{constructor(n){this.key=n}}class os{constructor(n){this.key=n}}class lv{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=Ut(),this.mutatedKeys=Ut(),this.po=a_(n),this.Eo=new Fa(this.po)}get To(){return this._o}Io(n,r){const u=r?r.Ao:new Jw,l=r?r.Eo:this.Eo;let g=r?r.mutatedKeys:this.mutatedKeys,E=l,C=!1;const A=Ru(this.query)&&l.size===this.query.limit?l.last():null,N=Ur(this.query)&&l.size===this.query.limit?l.first():null;if(n.inorderTraversal((O,F)=>{const Q=l.get(O),ie=ks(this.query,F)?F:null,Ie=!!Q&&this.mutatedKeys.has(Q.key),Be=!!ie&&(ie.hasLocalMutations||this.mutatedKeys.has(ie.key)&&ie.hasCommittedMutations);let tt=!1;Q&&ie?Q.data.isEqual(ie.data)?Ie!==Be&&(u.track({type:3,doc:ie}),tt=!0):this.Ro(Q,ie)||(u.track({type:2,doc:ie}),tt=!0,(A&&this.po(ie,A)>0||N&&this.po(ie,N)<0)&&(C=!0)):!Q&&ie?(u.track({type:0,doc:ie}),tt=!0):Q&&!ie&&(u.track({type:1,doc:Q}),tt=!0,(A||N)&&(C=!0)),tt&&(ie?(E=E.add(ie),g=Be?g.add(O):g.delete(O)):(E=E.delete(O),g=g.delete(O)))}),Ru(this.query)||Ur(this.query))for(;E.size>this.query.limit;){const O=Ru(this.query)?E.last():E.first();E=E.delete(O.key),g=g.delete(O.key),u.track({type:1,doc:O})}return{Eo:E,Ao:u,Ln:C,mutatedKeys:g}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,u){const l=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const g=n.Ao.Yr();g.sort((N,O)=>function(F,Q){const ie=Ie=>{switch(Ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ze()}};return ie(F)-ie(Q)}(N.type,O.type)||this.po(N.doc,O.doc)),this.bo(u);const E=r?this.Po():[],C=0===this.yo.size&&this.current?1:0,A=C!==this.mo;return this.mo=C,0!==g.length||A?{snapshot:new Qu(this.query,n.Eo,l,g,n.mutatedKeys,0===C,A,!1),vo:E}:{vo:E}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Jw,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=Ut(),this.Eo.forEach(u=>{this.Vo(u.key)&&(this.yo=this.yo.add(u.key))});const r=[];return n.forEach(u=>{this.yo.has(u)||r.push(new os(u))}),this.yo.forEach(u=>{n.has(u)||r.push(new tI(u))}),r}So(n){this._o=n.Gn,this.yo=Ut();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return Qu.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class JT{constructor(n,r,u){this.query=n,this.targetId=r,this.view=u}}class Zg{constructor(n){this.key=n,this.Co=!1}}class XC{constructor(n,r,u,l,g,E){this.localStore=n,this.remoteStore=r,this.eventManager=u,this.sharedClientState=l,this.currentUser=g,this.maxConcurrentLimboResolutions=E,this.No={},this.xo=new zu(C=>Pu(C),Ps),this.ko=new Map,this.$o=new Set,this.Oo=new rr(Ze.comparator),this.Fo=new Map,this.Mo=new Xl,this.Lo={},this.Bo=new Map,this.Uo=qu.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function eb(o,n){return nI.apply(this,arguments)}function nI(){return(nI=(0,ne.Z)(function*(o,n){const r=Cv(o);let u,l;const g=r.xo.get(n);if(g)u=g.targetId,r.sharedClientState.addLocalQueryTarget(u),l=g.view.Do();else{const E=yield Oa(r.localStore,gr(n)),C=r.sharedClientState.addLocalQueryTarget(E.targetId);u=E.targetId,l=yield dv(r,n,u,"current"===C),r.isPrimaryClient&&Gg(r.remoteStore,E)}return l})).apply(this,arguments)}function dv(o,n,r,u){return hv.apply(this,arguments)}function hv(){return(hv=(0,ne.Z)(function*(o,n,r,u){o.Ko=(O,F,Q)=>{return(ie=(0,ne.Z)(function*(Ie,Be,tt,Ot){let Jt=Be.view.Io(tt);Jt.Ln&&(Jt=yield Df(Ie.localStore,Be.query,!1).then(({documents:Gn})=>Be.view.Io(Gn,Jt)));const Lt=Ot&&Ot.targetChanges.get(Be.targetId),Xt=Be.view.applyChanges(Jt,Ie.isPrimaryClient,Lt);return ud(Ie,Be.targetId,Xt.vo),Xt.snapshot}),function(Ie,Be,tt,Ot){return ie.apply(this,arguments)})(o,O,F,Q);var ie};const l=yield Df(o.localStore,n,!0),g=new lv(n,l.Gn),E=g.Io(l.documents),C=gf.createSynthesizedTargetChangeForCurrentChange(r,u&&"Offline"!==o.onlineState),A=g.applyChanges(E,o.isPrimaryClient,C);ud(o,r,A.vo);const N=new JT(n,r,g);return o.xo.set(n,N),o.ko.has(r)?o.ko.get(r).push(n):o.ko.set(r,[n]),A.snapshot})).apply(this,arguments)}function tb(o,n){return Ff.apply(this,arguments)}function Ff(){return(Ff=(0,ne.Z)(function*(o,n){const r=Fe(o),u=r.xo.get(n),l=r.ko.get(u.targetId);if(l.length>1)return r.ko.set(u.targetId,l.filter(g=>!Ps(g,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(u.targetId),r.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Jl(r.localStore,u.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(u.targetId),td(r.remoteStore,u.targetId),ad(r,u.targetId)}).catch(Wu))):(ad(r,u.targetId),yield Jl(r.localStore,u.targetId,!0))})).apply(this,arguments)}function Lf(){return(Lf=(0,ne.Z)(function*(o,n,r){const u=uI(o);try{const l=yield function(g,E){const C=Fe(g),A=Qt.now(),N=E.reduce((F,Q)=>F.add(Q.key),Ut());let O;return C.persistence.runTransaction("Locally write mutations","readwrite",F=>C.Qn.Pn(F,N).next(Q=>{O=Q;const ie=[];for(const Ie of E){const Be=ZT(Ie,O.get(Ie.key));null!=Be&&ie.push(new ku(Ie.key,Be,o_(Be.value.mapValue),Mn.exists(!0)))}return C.In.addMutationBatch(F,A,ie,E)})).then(F=>(F.applyToLocalDocumentSet(O),{batchId:F.batchId,changes:O}))}(u.localStore,n);u.sharedClientState.addPendingMutation(l.batchId),function(g,E,C){let A=g.Lo[g.currentUser.toKey()];A||(A=new rr(Qe)),A=A.insert(E,C),g.Lo[g.currentUser.toKey()]=A}(u,l.batchId,r),yield xo(u,l.changes),yield nd(u.remoteStore)}catch(l){const g=rd(l,"Failed to persist write");r.reject(g)}})).apply(this,arguments)}function fv(o,n){return pv.apply(this,arguments)}function pv(){return(pv=(0,ne.Z)(function*(o,n){const r=Fe(o);try{const u=yield wn(r.localStore,n);n.targetChanges.forEach((l,g)=>{const E=r.Fo.get(g);E&&(ct(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?E.Co=!0:l.modifiedDocuments.size>0?ct(E.Co):l.removedDocuments.size>0&&(ct(E.Co),E.Co=!1))}),yield xo(r,u,n)}catch(u){yield Wu(u)}})).apply(this,arguments)}function nb(o,n,r){const u=Fe(o);if(u.isPrimaryClient&&0===r||!u.isPrimaryClient&&1===r){const l=[];u.xo.forEach((g,E)=>{const C=E.view.eo(n);C.snapshot&&l.push(C.snapshot)}),function(g,E){const C=Fe(g);C.onlineState=E;let A=!1;C.queries.forEach((N,O)=>{for(const F of O.listeners)F.eo(E)&&(A=!0)}),A&&kf(C)}(u.eventManager,n),l.length&&u.No.Tr(l),u.onlineState=n,u.isPrimaryClient&&u.sharedClientState.setOnlineState(n)}}function rb(o,n,r){return gv.apply(this,arguments)}function gv(){return(gv=(0,ne.Z)(function*(o,n,r){const u=Fe(o);u.sharedClientState.updateQueryState(n,"rejected",r);const l=u.Fo.get(n),g=l&&l.key;if(g){let E=new rr(Ze.comparator);E=E.insert(g,rn.newNoDocument(g,mt.min()));const C=Ut().add(g),A=new zl(mt.min(),new Map,new En(Qe),E,C);yield fv(u,A),u.Oo=u.Oo.remove(g),u.Fo.delete(n),Xu(u)}else yield Jl(u.localStore,n,!1).then(()=>ad(u,n,r)).catch(Wu)})).apply(this,arguments)}function ib(o,n){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,ne.Z)(function*(o,n){const r=Fe(o),u=n.batch.batchId;try{const l=yield Ug(r.localStore,n);od(r,u,null),Qg(r,u),r.sharedClientState.updateMutationState(u,"acknowledged"),yield xo(r,l)}catch(l){yield Wu(l)}})).apply(this,arguments)}function iI(o,n,r){return Yg.apply(this,arguments)}function Yg(){return(Yg=(0,ne.Z)(function*(o,n,r){const u=Fe(o);try{const l=yield function(g,E){const C=Fe(g);return C.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let N;return C.In.lookupMutationBatch(A,E).next(O=>(ct(null!==O),N=O.keys(),C.In.removeMutationBatch(A,O))).next(()=>C.In.performConsistencyCheck(A)).next(()=>C.Qn.Pn(A,N))})}(u.localStore,n);od(u,n,r),Qg(u,n),u.sharedClientState.updateMutationState(n,"rejected",r),yield xo(u,l)}catch(l){yield Wu(l)}})).apply(this,arguments)}function mv(){return(mv=(0,ne.Z)(function*(o,n){const r=Fe(o);ka(r.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const u=yield function(g){const E=Fe(g);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>E.In.getHighestUnacknowledgedBatchId(C))}(r.localStore);if(-1===u)return void n.resolve();const l=r.Bo.get(u)||[];l.push(n),r.Bo.set(u,l)}catch(u){const l=rd(u,"Initialization of waitForPendingWrites() operation failed");n.reject(l)}})).apply(this,arguments)}function Qg(o,n){(o.Bo.get(n)||[]).forEach(r=>{r.resolve()}),o.Bo.delete(n)}function od(o,n,r){const u=Fe(o);let l=u.Lo[u.currentUser.toKey()];if(l){const g=l.get(n);g&&(r?g.reject(r):g.resolve(),l=l.remove(n)),u.Lo[u.currentUser.toKey()]=l}}function ad(o,n,r=null){o.sharedClientState.removeLocalQueryTarget(n);for(const u of o.ko.get(n))o.xo.delete(u),r&&o.No.jo(u,r);o.ko.delete(n),o.isPrimaryClient&&o.Mo.cs(n).forEach(u=>{o.Mo.containsKey(u)||yv(o,u)})}function yv(o,n){o.$o.delete(n.path.canonicalString());const r=o.Oo.get(n);null!==r&&(td(o.remoteStore,r),o.Oo=o.Oo.remove(n),o.Fo.delete(r),Xu(o))}function ud(o,n,r){for(const u of r)u instanceof tI?(o.Mo.addReference(u.key,n),Jg(o,u)):u instanceof os?(Me("SyncEngine","Document no longer in limbo: "+u.key),o.Mo.removeReference(u.key,n),o.Mo.containsKey(u.key)||yv(o,u.key)):ze()}function Jg(o,n){const r=n.key,u=r.path.canonicalString();o.Oo.get(r)||o.$o.has(u)||(Me("SyncEngine","New document in limbo: "+r),o.$o.add(u),Xu(o))}function Xu(o){for(;o.$o.size>0&&o.Oo.size<o.maxConcurrentLimboResolutions;){const n=o.$o.values().next().value;o.$o.delete(n);const r=new Ze(Mt.fromString(n)),u=o.Uo.next();o.Fo.set(u,new Zg(r)),o.Oo=o.Oo.insert(r,u),Gg(o.remoteStore,new Ao(gr(Ni(r.path)),u,2,Ai.T))}}function xo(o,n,r){return _v.apply(this,arguments)}function _v(){return(_v=(0,ne.Z)(function*(o,n,r){const u=Fe(o),l=[],g=[],E=[];var C;u.xo.isEmpty()||(u.xo.forEach((C,A)=>{E.push(u.Ko(A,n,r).then(N=>{if(N){u.isPrimaryClient&&u.sharedClientState.updateQueryState(A.targetId,N.fromCache?"not-current":"current"),l.push(N);const O=rt.kn(A.targetId,N);g.push(O)}}))}),yield Promise.all(E),u.No.Tr(l),yield(C=(0,ne.Z)(function*(A,N){const O=Fe(A);try{yield O.persistence.runTransaction("notifyLocalViewChanges","readwrite",F=>be.forEach(N,Q=>be.forEach(Q.Nn,ie=>O.persistence.referenceDelegate.addReference(F,Q.targetId,ie)).next(()=>be.forEach(Q.xn,ie=>O.persistence.referenceDelegate.removeReference(F,Q.targetId,ie)))))}catch(F){if(!Aa(F))throw F;Me("LocalStore","Failed to update sequence numbers: "+F)}for(const F of N){const Q=F.targetId;if(!F.fromCache){const ie=O.Un.get(Q),Be=ie.withLastLimboFreeSnapshotVersion(ie.snapshotVersion);O.Un=O.Un.insert(Q,Be)}}}),function(A,N){return C.apply(this,arguments)})(u.localStore,g))})).apply(this,arguments)}function XT(o,n){return vv.apply(this,arguments)}function vv(){return(vv=(0,ne.Z)(function*(o,n){const r=Fe(o);if(!r.currentUser.isEqual(n)){Me("SyncEngine","User change. New user:",n.toKey());const u=yield wf(r.localStore,n);r.currentUser=n,(l=r).Bo.forEach(E=>{E.forEach(C=>{C.reject(new Se(re.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,u.removedBatchIds,u.addedBatchIds),yield xo(r,u.Wn)}var l})).apply(this,arguments)}function ob(o,n){const r=Fe(o),u=r.Fo.get(n);if(u&&u.Co)return Ut().add(u.key);{let l=Ut();const g=r.ko.get(n);if(!g)return l;for(const E of g){const C=r.xo.get(E);l=l.unionWith(C.view.To)}return l}}function ab(o,n){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,ne.Z)(function*(o,n){const r=Fe(o),u=yield Df(r.localStore,n.query,!0),l=n.view.So(u);return r.isPrimaryClient&&ud(r,n.targetId,l.vo),l})).apply(this,arguments)}function ub(o){return wv.apply(this,arguments)}function wv(){return(wv=(0,ne.Z)(function*(o){const n=Fe(o);return j_(n.localStore).then(r=>xo(n,r))})).apply(this,arguments)}function cb(o,n,r,u){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,ne.Z)(function*(o,n,r,u){const l=Fe(o),g=yield function(E,C){const A=Fe(E),N=Fe(A.In);return A.persistence.runTransaction("Lookup mutation documents","readonly",O=>N.Xt(O,C).next(F=>F?A.Qn.Pn(O,F):be.resolve(null)))}(l.localStore,n);var C;null!==g?("pending"===r?yield nd(l.remoteStore):"acknowledged"===r||"rejected"===r?(od(l,n,u||null),Qg(l,n),C=n,Fe(Fe(l.localStore).In).te(C)):ze(),yield xo(l,g)):Me("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function sI(){return(sI=(0,ne.Z)(function*(o,n){const r=Fe(o);if(Cv(r),uI(r),!0===n&&!0!==r.qo){const u=r.sharedClientState.getAllActiveQueryTargets(),l=yield oI(r,u.toArray());r.qo=!0,yield Of(r.remoteStore,!0);for(const g of l)Gg(r.remoteStore,g)}else if(!1===n&&!1!==r.qo){const u=[];let l=Promise.resolve();r.ko.forEach((g,E)=>{r.sharedClientState.isLocalQueryTarget(E)?u.push(E):l=l.then(()=>(ad(r,E),Jl(r.localStore,E,!0))),td(r.remoteStore,E)}),yield l,yield oI(r,u),function(g){const E=Fe(g);E.Fo.forEach((C,A)=>{td(E.remoteStore,A)}),E.Mo.us(),E.Fo=new Map,E.Oo=new rr(Ze.comparator)}(r),r.qo=!1,yield Of(r.remoteStore,!1)}})).apply(this,arguments)}function oI(o,n,r){return ec.apply(this,arguments)}function ec(){return(ec=(0,ne.Z)(function*(o,n,r){const u=Fe(o),l=[],g=[];for(const E of n){let C;const A=u.ko.get(E);if(A&&0!==A.length){C=yield Oa(u.localStore,gr(A[0]));for(const N of A){const O=u.xo.get(N),F=yield ab(u,O);F.snapshot&&g.push(F.snapshot)}}else{const N=yield B_(u.localStore,E);C=yield Oa(u.localStore,N),yield dv(u,aI(N),E,!1)}l.push(C)}return u.No.Tr(g),l})).apply(this,arguments)}function aI(o){return pr(o.path,o.collectionGroup,o.orderBy,o.filters,o.limit,"F",o.startAt,o.endAt)}function db(o){const n=Fe(o);return Fe(Fe(n.localStore).persistence).pn()}function hb(o,n,r,u){return cd.apply(this,arguments)}function cd(){return(cd=(0,ne.Z)(function*(o,n,r,u){const l=Fe(o);if(l.qo)Me("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(n))switch(r){case"current":case"not-current":{const g=yield j_(l.localStore),E=zl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield xo(l,g,E);break}case"rejected":yield Jl(l.localStore,n,!0),ad(l,n,u);break;default:ze()}})).apply(this,arguments)}function tc(o,n,r){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,ne.Z)(function*(o,n,r){const u=Cv(o);if(u.qo){for(const l of n){if(u.ko.has(l)){Me("SyncEngine","Adding an already active target "+l);continue}const g=yield B_(u.localStore,l),E=yield Oa(u.localStore,g);yield dv(u,aI(g),E.targetId,!1),Gg(u.remoteStore,E)}for(const l of r)u.ko.has(l)&&(yield Jl(u.localStore,l,!1).then(()=>{td(u.remoteStore,l),ad(u,l)}).catch(Wu))}})).apply(this,arguments)}function Cv(o){const n=Fe(o);return n.remoteStore.remoteSyncer.applyRemoteEvent=fv.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=ob.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=rb.bind(null,n),n.No.Tr=id.bind(null,n.eventManager),n.No.jo=QT.bind(null,n.eventManager),n}function uI(o){const n=Fe(o);return n.remoteStore.remoteSyncer.applySuccessfulWrite=ib.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=iI.bind(null,n),n}class Vf{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,ne.Z)(function*(){r.N=No(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return Fw(this.persistence,new kw,n.initialUser,this.N)}Go(n){return new bf(G_.Ns,this.N)}Wo(n){return new LC}terminate(){var n=this;return(0,ne.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class cI extends Vf{constructor(n,r,u){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=u,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,u=this;return(0,ne.Z)(function*(){yield r().call(u,n),yield function(o){return H_.apply(this,arguments)}(u.localStore),yield u.Jo.initialize(u,n),yield uI(u.Jo.syncEngine),yield nd(u.Jo.remoteStore),yield u.persistence.nn(()=>(u.gcScheduler&&!u.gcScheduler.started&&u.gcScheduler.start(u.localStore),Promise.resolve()))})()}Ho(n){return Fw(this.persistence,new kw,n.initialUser,this.N)}zo(n){return new Aw(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=Vg(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),u=void 0!==this.cacheSizeBytes?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new Ow(this.synchronizeTabs,r,n.clientId,u,n.asyncQueue,$w(),Nf(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new LC}}class pb extends cI{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,u=this;return(0,ne.Z)(function*(){yield r().call(u,n);const l=u.Jo.syncEngine;u.sharedClientState instanceof jw&&(u.sharedClientState.syncEngine={_i:cb.bind(null,l),mi:hb.bind(null,l),gi:tc.bind(null,l),pn:db.bind(null,l),wi:ub.bind(null,l)},yield u.sharedClientState.start()),yield u.persistence.nn(function(){var g=(0,ne.Z)(function*(E){yield function(o,n){return sI.apply(this,arguments)}(u.Jo.syncEngine,E),u.gcScheduler&&(E&&!u.gcScheduler.started?u.gcScheduler.start(u.localStore):E||u.gcScheduler.stop())});return function(E){return g.apply(this,arguments)}}())})()}Wo(n){const r=$w();if(!jw.bt(r))throw new Se(re.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const u=Vg(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new jw(r,n.asyncQueue,u,n.clientId,n.initialUser)}}class Xg{initialize(n,r){var u=this;return(0,ne.Z)(function*(){u.localStore||(u.localStore=n.localStore,u.sharedClientState=n.sharedClientState,u.datastore=u.createDatastore(r),u.remoteStore=u.createRemoteStore(r),u.eventManager=u.createEventManager(r),u.syncEngine=u.createSyncEngine(r,!n.synchronizeTabs),u.sharedClientState.onlineStateHandler=l=>nb(u.syncEngine,l,1),u.remoteStore.remoteSyncer.handleCredentialChange=XT.bind(null,u.syncEngine),yield Of(u.remoteStore,u.syncEngine.isPrimaryClient))})()}createEventManager(n){return new Xw}createDatastore(n){const r=No(n.databaseInfo.databaseId),u=new UC(n.databaseInfo);return new HC(n.credentials,u,r)}createRemoteStore(n){return r=this.localStore,u=this.datastore,l=n.asyncQueue,g=C=>nb(this.syncEngine,C,0),E=VC.bt()?new VC:new YT,new $C(r,u,l,g,E);var r,u,l,g,E}createSyncEngine(n,r){return function(u,l,g,E,C,A,N){const O=new XC(u,l,g,E,C,A);return N&&(O.qo=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,ne.Z)(function*(r){const u=Fe(r);Me("RemoteStore","RemoteStore shutting down."),u.Kr.add(5),yield ed(u),u.Qr.shutdown(),u.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function bv(o,n=10240){let r=0;return{read:()=>(0,ne.Z)(function*(){if(r<o.byteLength){const u={value:o.slice(r,r+n),done:!1};return r+=n,u}return{done:!0}})(),cancel:()=>(0,ne.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ld{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class lI{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new er,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(u=>{u&&u.ho()?this.metadata.resolve(u.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==u?void 0:u.payload)}`))},u=>this.metadata.reject(u))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,ne.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,ne.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,ne.Z)(function*(){const r=yield n.na();if(null===r)return null;const u=n.ta.decode(r),l=Number(u);isNaN(l)&&n.sa(`length string (${u}) is not valid number`);const g=yield n.ia(l);return new YC(JSON.parse(g),r.length+l)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,ne.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const u=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),u})()}ia(n){var r=this;return(0,ne.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const u=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),u})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,ne.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const u=new Uint8Array(n.buffer.length+r.value.length);u.set(n.buffer),u.set(r.value,n.buffer.length),n.buffer=u}return r.done})()}}class dI{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,ne.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Se(re.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const u=yield(l=(0,ne.Z)(function*(g,E){const C=Fe(g),A=Zl(C.N)+"/documents",N={documents:E.map(ie=>_f(C.N,ie))},O=yield C.Ki("BatchGetDocuments",A,N),F=new Map;O.forEach(ie=>{const Ie=function(o,n){return"found"in n?function(r,u){ct(!!u.found);const l=ns(r,u.found.name),g=Rn(u.found.updateTime),E=new Lr({mapValue:{fields:u.found.fields}});return rn.newFoundDocument(l,g,E)}(o,n):"missing"in n?function(r,u){ct(!!u.missing),ct(!!u.readTime);const l=ns(r,u.missing),g=Rn(u.readTime);return rn.newNoDocument(l,g)}(o,n):ze()}(C.N,ie);F.set(Ie.key.toString(),Ie)});const Q=[];return E.forEach(ie=>{const Ie=F.get(ie.toString());ct(!!Ie),Q.push(Ie)}),Q}),function(g,E){return l.apply(this,arguments)})(r.datastore,n);var l;return u.forEach(l=>r.recordVersion(l)),u})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(u){this.lastWriteError=u}this.writtenDocs.add(n.toString())}delete(n){this.write(new Fu(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,ne.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var u;n.mutations.forEach(u=>{r.delete(u.key.toString())}),r.forEach((u,l)=>{const g=Ze.fromPath(l);n.mutations.push(new p_(g,n.precondition(g)))}),yield(u=(0,ne.Z)(function*(l,g){const E=Fe(l),C=Zl(E.N)+"/documents",A={writes:g.map(N=>Ng(E.N,N))};yield E.Li("Commit",C,A)}),function(l,g){return u.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw ze();r=mt.min()}const u=this.readVersions.get(n.key.toString());if(u){if(!r.isEqual(u))throw new Se(re.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Mn.updateTime(r):Mn.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(mt.min()))throw new Se(re.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mn.updateTime(r)}return Mn.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class gb{constructor(n,r,u,l){this.asyncQueue=n,this.datastore=r,this.updateFunction=u,this.deferred=l,this.aa=5,this.rr=new Z_(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,ne.Z)(function*(){const r=new dI(n.datastore),u=n.ua(r);u&&u.then(l=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(l)}).catch(g=>{n.ha(g)}))}).catch(l=>{n.ha(l)})}))}ua(n){try{const r=this.updateFunction(n);return!Mu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!z0(r)}return!1}}class mb{constructor(n,r,u){var l=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=u,this.user=Xn.UNAUTHENTICATED,this.clientId=r_.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var g=(0,ne.Z)(function*(E){Me("FirestoreClient","Received user=",E.uid),yield l.credentialListener(E),l.user=E});return function(E){return g.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,ne.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(re.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(u){const l=rd(u,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function Tv(o,n){return Av.apply(this,arguments)}function Av(){return(Av=(0,ne.Z)(function*(o,n){o.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const r=yield o.getConfiguration();yield n.initialize(r);let u=r.initialUser;o.setCredentialChangeListener(function(){var l=(0,ne.Z)(function*(g){u.isEqual(g)||(yield wf(n.localStore,g),u=g)});return function(g){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>o.terminate()),o.offlineComponents=n})).apply(this,arguments)}function Sv(o,n){return dd.apply(this,arguments)}function dd(){return(dd=(0,ne.Z)(function*(o,n){o.asyncQueue.verifyOperationInProgress();const r=yield hd(o);Me("FirestoreClient","Initializing OnlineComponentProvider");const u=yield o.getConfiguration();yield n.initialize(r,u),o.setCredentialChangeListener(l=>{return(g=(0,ne.Z)(function*(E,C){const A=Fe(E);A.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const N=ka(A);A.Kr.add(3),yield ed(A),N&&A.Wr.set("Unknown"),yield A.remoteSyncer.handleCredentialChange(C),A.Kr.delete(3),yield xf(A)}),function(E,C){return g.apply(this,arguments)})(n.remoteStore,l);var g}),o.onlineComponents=n})).apply(this,arguments)}function hd(o){return hI.apply(this,arguments)}function hI(){return(hI=(0,ne.Z)(function*(o){return o.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield Tv(o,new Vf)),o.offlineComponents})).apply(this,arguments)}function La(o){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,ne.Z)(function*(o){return o.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield Sv(o,new Xg)),o.onlineComponents})).apply(this,arguments)}function Mo(o){return hd(o).then(n=>n.persistence)}function Va(o){return hd(o).then(n=>n.localStore)}function fd(o){return La(o).then(n=>n.remoteStore)}function fI(o){return La(o).then(n=>n.syncEngine)}function st(o){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,ne.Z)(function*(o){const n=yield La(o),r=n.eventManager;return r.onListen=eb.bind(null,n.syncEngine),r.onUnlisten=tb.bind(null,n.syncEngine),r})).apply(this,arguments)}function xv(o,n,r={}){const u=new er;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(l,g,E,C,A){const N=new ld({next:F=>{g.enqueueAndForget(()=>eI(l,O));const Q=F.docs.has(E);!Q&&F.fromCache?A.reject(new Se(re.UNAVAILABLE,"Failed to get document because the client is offline.")):Q&&F.fromCache&&C&&"server"===C.source?A.reject(new Se(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(F)},error:F=>A.reject(F)}),O=new sd(Ni(E.path),N,{includeMetadataChanges:!0,uo:!0});return Wg(l,O)}(yield st(o),o.asyncQueue,n,r,u)})),u.promise}function yb(o,n,r={}){const u=new er;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(l,g,E,C,A){const N=new ld({next:F=>{g.enqueueAndForget(()=>eI(l,O)),F.fromCache&&"server"===C.source?A.reject(new Se(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):A.resolve(F)},error:F=>A.reject(F)}),O=new sd(E,N,{includeMetadataChanges:!0,uo:!0});return Wg(l,O)}(yield st(o),o.asyncQueue,n,r,u)})),u.promise}class as{constructor(n,r,u,l,g,E,C,A){this.databaseId=n,this.appId=r,this.persistenceKey=u,this.host=l,this.ssl=g,this.forceLongPolling=E,this.autoDetectLongPolling=C,this.useFetchStreams=A}}class rc{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof rc&&n.projectId===this.projectId&&n.database===this.database}}const gI=new Map;function em(o,n,r){if(!r)throw new Se(re.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${n}.`)}function tm(o,n,r,u){if(!0===n&&!0===u)throw new Se(re.INVALID_ARGUMENT,`${o} and ${r} cannot be used together.`)}function ic(o){if(!Ze.isDocumentKey(o))throw new Se(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function pd(o){if(Ze.isDocumentKey(o))throw new Se(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function nm(o){if(void 0===o)return"undefined";if(null===o)return"null";if("string"==typeof o)return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if("number"==typeof o||"boolean"==typeof o)return""+o;if("object"==typeof o){if(o instanceof Array)return"an array";{const n=(r=o).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof o?"a function":ze()}function wt(o,n){if("_delegate"in o&&(o=o._delegate),!(o instanceof n)){if(n.name===o.constructor.name)throw new Se(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=nm(o);throw new Se(re.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return o}function mI(o,n){if(n<=0)throw new Se(re.INVALID_ARGUMENT,`Function ${o}() requires a positive number, but it was: ${n}.`)}class Mv{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Se(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Se(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,tm("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class sc{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mv({}),this._settingsFrozen=!1,n instanceof rc?this._databaseId=n:(this._app=n,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Se(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rc(u.options.projectId)}(n))}get app(){if(!this._app)throw new Se(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Se(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mv(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new Ll;switch(r.type){case"gapi":const u=r.client;return ct(!("object"!=typeof u||null===u||!u.auth||!u.auth.getAuthHeaderValueForFirstParty)),new JD(u,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Se(re.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gI.get(n);r&&(Me("ComponentProvider","Removing Datastore"),gI.delete(n),r.terminate())}(this),Promise.resolve()}}class $t{constructor(n,r,u){this.converter=r,this._key=u,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new $t(this.firestore,n,this._key)}}class yr{constructor(n,r,u){this.converter=r,this._query=u,this.type="query",this.firestore=n}withConverter(n){return new yr(this.firestore,n,this._query)}}class jr extends yr{constructor(n,r,u){super(n,r,Ni(u)),this._path=u,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new $t(this.firestore,null,new Ze(n))}withConverter(n){return new jr(this.firestore,n,this._path)}}function yI(o,n,...r){if(o=(0,Ct.m9)(o),em("collection","path",n),o instanceof sc){const u=Mt.fromString(n,...r);return pd(u),new jr(o,null,u)}{if(!(o instanceof $t||o instanceof jr))throw new Se(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=o._path.child(Mt.fromString(n,...r));return pd(u),new jr(o.firestore,null,u)}}function Bf(o,n,...r){if(o=(0,Ct.m9)(o),1===arguments.length&&(n=r_.I()),em("doc","path",n),o instanceof sc){const u=Mt.fromString(n,...r);return ic(u),new $t(o,null,new Ze(u))}{if(!(o instanceof $t||o instanceof jr))throw new Se(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const u=o._path.child(Mt.fromString(n,...r));return ic(u),new $t(o.firestore,o instanceof jr?o.converter:null,new Ze(u))}}function Rv(o,n){return o=(0,Ct.m9)(o),n=(0,Ct.m9)(n),(o instanceof $t||o instanceof jr)&&(n instanceof $t||n instanceof jr)&&o.firestore===n.firestore&&o.path===n.path&&o.converter===n.converter}function Ov(o,n){return o=(0,Ct.m9)(o),n=(0,Ct.m9)(n),o instanceof yr&&n instanceof yr&&o.firestore===n.firestore&&Ps(o._query,n._query)&&o.converter===n.converter}class im{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Z_(this,"async_queue_retry"),this.Ea=()=>{const r=Nf();r&&Me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Nf();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Nf();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new er;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,ne.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!Aa(r))throw r;Me("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(u=>{throw this.ma=u,this.ga=!1,xn("INTERNAL UNHANDLED ERROR: ",function(l){let g=l.message||"";return l.stack&&(g=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),g}(u)),u}).then(u=>(this.ga=!1,u))));return this.fa=r,r}enqueueAfterDelay(n,r,u){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const l=uv.createAndSchedule(this,n,r,u,g=>this.Ra(g));return this._a.push(l),l}Ta(){this.ma&&ze()}verifyOperationInProgress(){}ba(){var n=this;return(0,ne.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,u)=>r.targetTimeMs-u.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function Pv(o){return function(n,r){if("object"!=typeof n||null===n)return!1;const u=n;for(const l of["next","error","complete"])if(l in u&&"function"==typeof u[l])return!0;return!1}(o)}class kv{constructor(){this._progressObserver={},this._taskCompletionResolver=new er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,u){this._progressObserver={next:n,error:r,complete:u}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class An extends sc{constructor(n,r){super(n,r),this.type="firestore",this._queue=new im,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||gd(this),this._firestoreClient.terminate()}}function ir(o){return o._firestoreClient||gd(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function gd(o){var n;const r=o._freezeSettings(),u=(g=(null===(n=o._app)||void 0===n?void 0:n.options.appId)||"",new as(o._databaseId,g,o._persistenceKey,(C=r).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var g,C;o._firestoreClient=new mb(o._credentials,o._queue,u)}function _I(o,n,r){const u=new er;return o.asyncQueue.enqueue((0,ne.Z)(function*(){try{yield Tv(o,r),yield Sv(o,n),u.resolve()}catch(l){if(!("FirebaseError"===(g=l).name?g.code===re.FAILED_PRECONDITION||g.code===re.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),u.reject(l)}var g})).then(()=>u.promise)}function vI(o){if(o._initialized||o._terminated)throw new Se(re.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ro{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Se(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Bs{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Bs(nr.fromBase64String(n))}catch(r){throw new Se(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Bs(nr.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class oc{constructor(n){this._methodName=n}}class sm{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Se(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Se(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return Qe(this._lat,n._lat)||Qe(this._long,n._long)}}const Vv=/^__.*__$/;class Cb{constructor(n,r,u){this.data=n,this.fieldMask=r,this.fieldTransforms=u}toMutation(n,r){return null!==this.fieldMask?new ku(n,this.data,this.fieldMask,r,this.fieldTransforms):new pf(n,this.data,r,this.fieldTransforms)}}class EI{constructor(n,r,u){this.data=n,this.fieldMask=r,this.fieldTransforms=u}toMutation(n,r){return new ku(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function Uv(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ze()}}class md{constructor(n,r,u,l,g,E){this.settings=n,this.databaseId=r,this.N=u,this.ignoreUndefinedProperties=l,void 0===g&&this.Sa(),this.fieldTransforms=g||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new md(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const u=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:u,xa:!1});return l.ka(n),l}$a(n){var r;const u=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:u,xa:!1});return l.Sa(),l}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return am(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(Uv(this.Da)&&Vv.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class bb{constructor(n,r,u){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=u||No(n)}Ba(n,r,u,l=!1){return new md({Da:n,methodName:r,La:u,path:tr.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function yd(o){const n=o._freezeSettings(),r=No(o._databaseId);return new bb(o._databaseId,!!n.ignoreUndefinedProperties,r)}function om(o,n,r,u,l,g={}){const E=o.Ba(g.merge||g.mergeFields?2:0,n,r,l);qv("Data must be an object, but it was:",E,u);const C=Sb(u,E);let A,N;if(g.merge)A=new Nu(E.fieldMask),N=E.fieldTransforms;else if(g.mergeFields){const O=[];for(const F of g.mergeFields){const Q=Wv(n,F,r);if(!E.contains(Q))throw new Se(re.INVALID_ARGUMENT,`Field '${Q}' is specified in your field mask but missing from your input data.`);Zv(O,Q)||O.push(Q)}A=new Nu(O),N=E.fieldTransforms.filter(F=>A.covers(F.field))}else A=null,N=E.fieldTransforms;return new Cb(new Lr(C),A,N)}class jf extends oc{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof jf}}function wI(o,n,r){return new md({Da:3,La:n.settings.La,methodName:o._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class Bv extends oc{_toFieldTransform(n){return new Wl(n.path,new Gl)}isEqual(n){return n instanceof Bv}}class Tb extends oc{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=wI(this,n,!0),u=this.Ua.map(g=>us(g,r)),l=new Ca(u);return new Wl(n.path,l)}isEqual(n){return this===n}}class Ab extends oc{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=wI(this,n,!0),u=this.Ua.map(g=>us(g,r)),l=new ba(u);return new Wl(n.path,l)}isEqual(n){return this===n}}class Hf extends oc{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new ql(n.N,l_(n.N,this.qa));return new Wl(n.path,r)}isEqual(n){return this===n}}function jv(o,n,r,u){const l=o.Ba(1,n,r);qv("Data must be an object, but it was:",l,u);const g=[],E=Lr.empty();Vl(u,(A,N)=>{const O=zv(n,A,r);N=(0,Ct.m9)(N);const F=l.$a(O);if(N instanceof jf)g.push(O);else{const Q=us(N,F);null!=Q&&(g.push(O),E.set(O,Q))}});const C=new Nu(g);return new EI(E,C,l.fieldTransforms)}function Hv(o,n,r,u,l,g){const E=o.Ba(1,n,r),C=[Wv(n,u,r)],A=[l];if(g.length%2!=0)throw new Se(re.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Q=0;Q<g.length;Q+=2)C.push(Wv(n,g[Q])),A.push(g[Q+1]);const N=[],O=Lr.empty();for(let Q=C.length-1;Q>=0;--Q)if(!Zv(N,C[Q])){const ie=C[Q];let Ie=A[Q];Ie=(0,Ct.m9)(Ie);const Be=E.$a(ie);if(Ie instanceof jf)N.push(ie);else{const tt=us(Ie,Be);null!=tt&&(N.push(ie),O.set(ie,tt))}}const F=new Nu(N);return new EI(O,F,E.fieldTransforms)}function $v(o,n,r,u=!1){return us(r,o.Ba(u?4:3,n))}function us(o,n){if(Gv(o=(0,Ct.m9)(o)))return qv("Unsupported field value:",n,o),Sb(o,n);if(o instanceof oc)return function(r,u){if(!Uv(u.Da))throw u.Fa(`${r._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Fa(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(u);l&&u.fieldTransforms.push(l)}(o,n),null;if(void 0===o&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),o instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,u){const l=[];let g=0;for(const E of r){let C=us(E,u.Oa(g));null==C&&(C={nullValue:"NULL_VALUE"}),l.push(C),g++}return{arrayValue:{values:l}}}(o,n)}return function(r,u){if(null===(r=(0,Ct.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return l_(u.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=Qt.fromDate(r);return{timestampValue:Lu(u.N,l)}}if(r instanceof Qt){const l=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lu(u.N,l)}}if(r instanceof sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bs)return{bytesValue:Q0(u.N,r._byteString)};if(r instanceof $t){const l=u.databaseId,g=r.firestore._databaseId;if(!g.isEqual(l))throw u.Fa(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:bg(r.firestore._databaseId||u.databaseId,r._key.path)}}throw u.Fa(`Unsupported field value: ${nm(r)}`)}(o,n)}function Sb(o,n){const r={};return x0(o)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):Vl(o,(u,l)=>{const g=us(l,n.Na(u));null!=g&&(r[u]=g)}),{mapValue:{fields:r}}}function Gv(o){return!("object"!=typeof o||null===o||o instanceof Array||o instanceof Date||o instanceof Qt||o instanceof sm||o instanceof Bs||o instanceof $t||o instanceof oc)}function qv(o,n,r){if(!Gv(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const u=nm(r);throw n.Fa("an object"===u?o+" a custom object":o+" "+u)}var u}function Wv(o,n,r){if((n=(0,Ct.m9)(n))instanceof Ro)return n._internalPath;if("string"==typeof n)return zv(o,n);throw am("Field path arguments must be of type string or FieldPath.",o,!1,void 0,r)}const Nb=new RegExp("[~\\*/\\[\\]]");function zv(o,n,r){if(n.search(Nb)>=0)throw am(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,r);try{return new Ro(...n.split("."))._internalPath}catch(u){throw am(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,r)}}function am(o,n,r,u,l){const g=u&&!u.isEmpty(),E=void 0!==l;let C=`Function ${n}() called with invalid data`;r&&(C+=" (via `toFirestore()`)"),C+=". ";let A="";return(g||E)&&(A+=" (found",g&&(A+=` in field ${u}`),E&&(A+=` in document ${l}`),A+=")"),new Se(re.INVALID_ARGUMENT,C+o+A)}function Zv(o,n){return o.some(r=>r.isEqual(n))}class $f{constructor(n,r,u,l,g){this._firestore=n,this._userDataWriter=r,this._key=u,this._document=l,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new xb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(Kv("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class xb extends $f{data(){return super.data()}}function Kv(o,n){return"string"==typeof n?zv(o,n):n instanceof Ro?n._internalPath:n._delegate._internalPath}class _d{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class Ua extends $f{constructor(n,r,u,l,g,E){super(n,r,u,l,E),this._firestore=n,this._firestoreImpl=n,this.metadata=g}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const u=this._document.data.field(Kv("DocumentSnapshot.get",n));if(null!==u)return this._userDataWriter.convertValue(u,r.serverTimestamps)}}}class ac extends Ua{data(n={}){return super.data(n)}}class Ba{constructor(n,r,u,l){this._firestore=n,this._userDataWriter=r,this._snapshot=l,this.metadata=new _d(l.hasPendingWrites,l.fromCache),this.query=u}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(u=>{n.call(r,new ac(this._firestore,this._userDataWriter,u.key,u,new _d(this._snapshot.mutatedKeys.has(u.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Se(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,l){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(E=>({type:"added",doc:new ac(u._firestore,u._userDataWriter,E.doc.key,E.doc,new _d(u._snapshot.mutatedKeys.has(E.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(E=>l||3!==E.type).map(E=>{const C=new ac(u._firestore,u._userDataWriter,E.doc.key,E.doc,new _d(u._snapshot.mutatedKeys.has(E.doc.key),u._snapshot.fromCache),u.query.converter);let A=-1,N=-1;return 0!==E.type&&(A=g.indexOf(E.doc.key),g=g.delete(E.doc.key)),1!==E.type&&(g=g.add(E.doc),N=g.indexOf(E.doc.key)),{type:Mb(E.type),doc:C,oldIndex:A,newIndex:N}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function Mb(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ze()}}function II(o,n){return o instanceof Ua&&n instanceof Ua?o._firestore===n._firestore&&o._key.isEqual(n._key)&&(null===o._document?null===n._document:o._document.isEqual(n._document))&&o._converter===n._converter:o instanceof Ba&&n instanceof Ba&&o._firestore===n._firestore&&Ov(o.query,n.query)&&o.metadata.isEqual(n.metadata)&&o._snapshot.isEqual(n._snapshot)}function DI(o){if(Ur(o)&&0===o.explicitOrderBy.length)throw new Se(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gf{}function ja(o,...n){for(const r of n)o=r._apply(o);return o}class CI extends Gf{constructor(n,r,u){super(),this.Ka=n,this.ja=r,this.Qa=u,this.type="where"}_apply(n){const r=yd(n.firestore),u=function(l,g,E,C,A,N,O){let F;if(A.isKeyField()){if("array-contains"===N||"array-contains-any"===N)throw new Se(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${N}' queries on FieldPath.documentId().`);if("in"===N||"not-in"===N){Jv(O,N);const ie=[];for(const Ie of O)ie.push(NI(C,l,Ie));F={arrayValue:{values:ie}}}else F=NI(C,l,O)}else"in"!==N&&"not-in"!==N&&"array-contains-any"!==N||Jv(O,N),F=$v(E,"where",O,"in"===N||"not-in"===N);const Q=fr.create(A,N,F);return function(ie,Ie){if(Ie.v()){const tt=wa(ie);if(null!==tt&&!tt.isEqual(Ie.field))throw new Se(re.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${Ie.field.toString()}'`);const Ot=hf(ie);null!==Ot&&xI(0,Ie.field,Ot)}const Be=function(tt,Ot){for(const Jt of tt.filters)if(Ot.indexOf(Jt.op)>=0)return Jt.op;return null}(ie,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Ie.op));if(null!==Be)throw new Se(re.INVALID_ARGUMENT,Be===Ie.op?`Invalid query. You cannot use more than one '${Ie.op.toString()}' filter.`:`Invalid query. You cannot use '${Ie.op.toString()}' filters with '${Be.toString()}' filters.`)}(l,Q),Q}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new yr(n.firestore,n.converter,function(l,g){const E=l.filters.concat([g]);return new li(l.path,l.collectionGroup,l.explicitOrderBy.slice(),E,l.limit,l.limitType,l.startAt,l.endAt)}(n._query,u))}}class Rb extends Gf{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(u,l,g){if(null!==u.startAt)throw new Se(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Se(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new $l(l,g);return function(C,A){if(null===hf(C)){const N=wa(C);null!==N&&xI(0,N,A.field)}}(u,E),E}(n._query,this.Ka,this.Wa);return new yr(n.firestore,n.converter,function(u,l){const g=u.explicitOrderBy.concat([l]);return new li(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n._query,r))}}class _r extends Gf{constructor(n,r,u){super(),this.type=n,this.Ga=r,this.za=u}_apply(n){return new yr(n.firestore,n.converter,Ou(n._query,this.Ga,this.za))}}class um extends Gf{constructor(n,r,u){super(),this.type=n,this.Ha=r,this.Ja=u}_apply(n){const r=SI(n,this.type,this.Ha,this.Ja);return new yr(n.firestore,n.converter,(l=r,new li((u=n._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,l,u.endAt)));var u,l}}class Qv extends Gf{constructor(n,r,u){super(),this.type=n,this.Ha=r,this.Ja=u}_apply(n){const r=SI(n,this.type,this.Ha,this.Ja);return new yr(n.firestore,n.converter,(l=r,new li((u=n._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,l)));var u,l}}function SI(o,n,r,u){if(r[0]=(0,Ct.m9)(r[0]),r[0]instanceof $f)return function(l,g,E,C,A){if(!C)throw new Se(re.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const N=[];for(const O of ts(l))if(O.field.isKeyField())N.push(lg(g,C.key));else{const F=C.data.field(O.field);if(ug(F))throw new Se(re.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+O.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===F){const Q=O.field.canonicalString();throw new Se(re.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Q}' (used as the orderBy) does not exist.`)}N.push(F)}return new Vr(N,A)}(o._query,o.firestore._databaseId,n,r[0]._document,u);{const l=yd(o.firestore);return function(g,E,C,A,N,O){const F=g.explicitOrderBy;if(N.length>F.length)throw new Se(re.INVALID_ARGUMENT,`Too many arguments provided to ${A}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Q=[];for(let ie=0;ie<N.length;ie++){const Ie=N[ie];if(F[ie].field.isKeyField()){if("string"!=typeof Ie)throw new Se(re.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${A}(), but got a ${typeof Ie}`);if(!Ia(g)&&-1!==Ie.indexOf("/"))throw new Se(re.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${A}() must be a plain document ID, but '${Ie}' contains a slash.`);const Be=g.path.child(Mt.fromString(Ie));if(!Ze.isDocumentKey(Be))throw new Se(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${A}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const tt=new Ze(Be);Q.push(lg(E,tt))}else{const Be=$v(C,A,Ie);Q.push(Be)}}return new Vr(Q,O)}(o._query,o.firestore._databaseId,l,n,r,u)}}function NI(o,n,r){if("string"==typeof(r=(0,Ct.m9)(r))){if(""===r)throw new Se(re.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ia(n)&&-1!==r.indexOf("/"))throw new Se(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const u=n.path.child(Mt.fromString(r));if(!Ze.isDocumentKey(u))throw new Se(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${u}' is not because it has an odd number of segments (${u.length}).`);return lg(o,new Ze(u))}if(r instanceof $t)return lg(o,r._key);throw new Se(re.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(r)}.`)}function Jv(o,n){if(!Array.isArray(o)||0===o.length)throw new Se(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(o.length>10)throw new Se(re.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function xI(o,n,r){if(!r.isEqual(n))throw new Se(re.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class MI{convertValue(n,r="none"){switch(Ul(n)){case 0:return null;case 1:return n.booleanValue;case 2:return Tn(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(xu(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw ze()}}convertObject(n,r){const u={};return Vl(n.fields,(l,g)=>{u[l]=this.convertValue(g,r)}),u}convertGeoPoint(n){return new sm(Tn(n.latitude),Tn(n.longitude))}convertArray(n,r){return(n.values||[]).map(u=>this.convertValue(u,r))}convertServerTimestamp(n,r){switch(r){case"previous":const u=i_(n);return null==u?null:this.convertValue(u,r);case"estimate":return this.convertTimestamp(cf(n));default:return null}}convertTimestamp(n){const r=Os(n);return new Qt(r.seconds,r.nanos)}convertDocumentKey(n,r){const u=Mt.fromString(n);ct(A_(u));const l=new rc(u.get(1),u.get(3)),g=new Ze(u.popFirst(5));return l.isEqual(r)||xn(`Document ${g} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),g}}function cm(o,n,r){let u;return u=o?r&&(r.merge||r.mergeFields)?o.toFirestore(n,r):o.toFirestore(n):n,u}class kb extends MI{constructor(n){super(),this.firestore=n}convertBytes(n){return new Bs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new $t(this.firestore,null,r)}}class uc{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=yd(n)}set(n,r,u){this._verifyNotCommitted();const l=cc(n,this._firestore),g=cm(l.converter,r,u),E=om(this._dataReader,"WriteBatch.set",l._key,g,null!==l.converter,u);return this._mutations.push(E.toMutation(l._key,Mn.none())),this}update(n,r,u,...l){this._verifyNotCommitted();const g=cc(n,this._firestore);let E;return E="string"==typeof(r=(0,Ct.m9)(r))||r instanceof Ro?Hv(this._dataReader,"WriteBatch.update",g._key,r,u,l):jv(this._dataReader,"WriteBatch.update",g._key,r),this._mutations.push(E.toMutation(g._key,Mn.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=cc(n,this._firestore);return this._mutations=this._mutations.concat(new Fu(r._key,Mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(re.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cc(o,n){if((o=(0,Ct.m9)(o)).firestore!==n)throw new Se(re.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return o}class lc extends MI{constructor(n){super(),this.firestore=n}convertBytes(n){return new Bs(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new $t(this.firestore,null,r)}}function PI(o,n,r){o=wt(o,$t);const u=wt(o.firestore,An),l=cm(o.converter,n,r);return Ed(u,[om(yd(u),"setDoc",o._key,l,null!==o.converter,r).toMutation(o._key,Mn.none())])}function kI(o,n,r,...u){o=wt(o,$t);const l=wt(o.firestore,An),g=yd(l);let E;return E="string"==typeof(n=(0,Ct.m9)(n))||n instanceof Ro?Hv(g,"updateDoc",o._key,n,r,u):jv(g,"updateDoc",o._key,n),Ed(l,[E.toMutation(o._key,Mn.exists(!0))])}function FI(o,...n){var r,u,l;o=(0,Ct.m9)(o);let g={includeMetadataChanges:!1},E=0;"object"!=typeof n[E]||Pv(n[E])||(g=n[E],E++);const C={includeMetadataChanges:g.includeMetadataChanges};if(Pv(n[E])){const F=n[E];n[E]=null===(r=F.next)||void 0===r?void 0:r.bind(F),n[E+1]=null===(u=F.error)||void 0===u?void 0:u.bind(F),n[E+2]=null===(l=F.complete)||void 0===l?void 0:l.bind(F)}let A,N,O;if(o instanceof $t)N=wt(o.firestore,An),O=Ni(o._key.path),A={next:F=>{n[E]&&n[E](eE(N,o,F))},error:n[E+1],complete:n[E+2]};else{const F=wt(o,yr);N=wt(F.firestore,An),O=F._query;const Q=new lc(N);A={next:ie=>{n[E]&&n[E](new Ba(N,Q,F,ie))},error:n[E+1],complete:n[E+2]},DI(o._query)}return function(F,Q,ie,Ie){const Be=new ld(Ie),tt=new sd(Q,Be,ie);return F.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return Wg(yield st(F),tt)})),()=>{Be.Xo(),F.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return eI(yield st(F),tt)}))}}(ir(N),O,C,A)}function Ed(o,n){return function(r,u){const l=new er;return r.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,n,r){return Lf.apply(this,arguments)}(yield fI(r),u,l)})),l.promise}(ir(o),n)}function eE(o,n,r){const u=r.docs.get(n._key),l=new lc(o);return new Ua(o,l,n._key,u,new _d(r.hasPendingWrites,r.fromCache),n.converter)}class jb extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=yd(n)}get(n){const r=cc(n,this._firestore),u=new kb(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return ze();const g=l[0];if(g.isFoundDocument())return new $f(this._firestore,u,g.key,g,r.converter);if(g.isNoDocument())return new $f(this._firestore,u,r._key,null,r.converter);throw ze()})}set(n,r,u){const l=cc(n,this._firestore),g=cm(l.converter,r,u),E=om(this._dataReader,"Transaction.set",l._key,g,null!==l.converter,u);return this._transaction.set(l._key,E),this}update(n,r,u,...l){const g=cc(n,this._firestore);let E;return E="string"==typeof(r=(0,Ct.m9)(r))||r instanceof Ro?Hv(this._dataReader,"Transaction.update",g._key,r,u,l):jv(this._dataReader,"Transaction.update",g._key,r),this._transaction.update(g._key,E),this}delete(n){const r=cc(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=cc(n,this._firestore),u=new lc(this._firestore);return super.get(n).then(l=>new Ua(this._firestore,u,r._key,l._document,new _d(!1,!1),r.converter))}}function tE(o,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Se("invalid-argument",`Invalid options passed to function ${o}(): You cannot specify both "merge" and "mergeFields".`);return n}function HI(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function $I(){if("undefined"==typeof atob)throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(o){Rs=o})(ai.SDK_VERSION),(0,ai._registerComponent)(new gu.wA("firestore",(o,{options:n})=>{const r=o.getProvider("app").getImmediate(),u=new An(r,new YD(o.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),u._setSettings(n),u},"PUBLIC")),(0,ai.registerVersion)("@firebase/firestore","3.1.0",void 0);class Oo{constructor(n){this._delegate=n}static fromBase64String(n){return $I(),new Oo(Bs.fromBase64String(n))}static fromUint8Array(n){return HI(),new Oo(Bs.fromUint8Array(n))}toBase64(){return $I(),this._delegate.toBase64()}toUint8Array(){return HI(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dc(o){return function(o,n){if("object"!=typeof o||null===o)return!1;const r=o;for(const u of["next","error","complete"])if(u in r&&"function"==typeof r[u])return!0;return!1}(o)}class nE{enableIndexedDbPersistence(n,r){return function(o,n){vI(o=wt(o,An));const r=ir(o),u=o._freezeSettings(),l=new Xg;return _I(r,l,new cI(l,u.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(o){vI(o=wt(o,An));const n=ir(o),r=o._freezeSettings(),u=new Xg;return _I(n,u,new pb(u,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(o){if(o._initialized&&!o._terminated)throw new Se(re.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new er;return o._queue.enqueueAndForgetEvenWhileRestricted((0,ne.Z)(function*(){try{yield(r=(0,ne.Z)(function*(u){if(!On.bt())return Promise.resolve();const l=u+"main";yield On.delete(l)}),function(u){return r.apply(this,arguments)})(Vg(o._databaseId,o._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class ls{constructor(n,r,u){this._delegate=r,this._persistenceProvider=u,this.INTERNAL={delete:()=>this.terminate()},n instanceof rc||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&Fl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,u={}){!function(o,n,r,u={}){var l;const g=(o=wt(o,sc))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==n&&Fl("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},g),{host:`${n}:${r}`,ssl:!1})),u.mockUserToken){let E,C;if("string"==typeof u.mockUserToken)E=u.mockUserToken,C=Xn.MOCK_USER;else{E=(0,Ct.Sg)(u.mockUserToken,null===(l=o._app)||void 0===l?void 0:l.options.projectId);const A=u.mockUserToken.sub||u.mockUserToken.user_id;if(!A)throw new Se(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Xn(A)}o._credentials=new KD(new N0(E,C))}}(this._delegate,n,r,u)}enableNetwork(){return function(o){return function(o){return o.asyncQueue.enqueue((0,ne.Z)(function*(){const n=yield Mo(o),r=yield fd(o);return n.setNetworkEnabled(!0),function(u){const l=Fe(u);return l.Kr.delete(0),xf(l)}(r)}))}(ir(o=wt(o,An)))}(this._delegate)}disableNetwork(){return function(o){return function(o){return o.asyncQueue.enqueue((0,ne.Z)(function*(){const n=yield Mo(o),r=yield fd(o);return n.setNetworkEnabled(!1),(u=(0,ne.Z)(function*(l){const g=Fe(l);g.Kr.add(0),yield ed(g),g.Wr.set("Offline")}),function(l){return u.apply(this,arguments)})(r);var u}))}(ir(o=wt(o,An)))}(this._delegate)}enablePersistence(n){let r=!1,u=!1;return n&&(r=!!n.synchronizeTabs,u=!!n.experimentalForceOwningTab,tm("synchronizeTabs",r,"experimentalForceOwningTab",u)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,u)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(o){return function(n){const r=new er;return n.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return function(o,n){return mv.apply(this,arguments)}(yield fI(n),r)})),r.promise}(ir(o=wt(o,An)))}(this._delegate)}onSnapshotsInSync(n){return function(o,n){return function(o,n){const r=new ld(n);return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return u=yield st(o),l=r,Fe(u).Zr.add(l),void l.next();var u,l})),()=>{r.Xo(),o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return u=yield st(o),l=r,void Fe(u).Zr.delete(l);var u,l}))}}(ir(o=wt(o,An)),Pv(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new fc(this,yI(this._delegate,n))}catch(r){throw vr(r,"collection()","Firestore.collection()")}}doc(n){try{return new Xr(this,Bf(this._delegate,n))}catch(r){throw vr(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new Hr(this,function(o,n){if(o=wt(o,sc),em("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Se(re.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yr(o,null,(r=n,new li(Mt.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw vr(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(o,n){return function(o,n){const r=new er;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){const u=yield(l=o,La(l).then(g=>g.datastore));var l;new gb(o.asyncQueue,u,n,r).run()})),r.promise}(ir(o),r=>n(new jb(o,r)))}(this._delegate,r=>n(new GI(this,r)))}batch(){return ir(this._delegate),new qI(new uc(this._delegate,n=>Ed(this._delegate,n)))}loadBundle(n){return function(o,n){const r=ir(o=wt(o,An)),u=new kv;return function(o,n,r,u){const l=function(g,E){let C;return C="string"==typeof g?(new TextEncoder).encode(g):g,A=function(A,N){if(A instanceof Uint8Array)return bv(A,N);if(A instanceof ArrayBuffer)return bv(new Uint8Array(A),N);if(A instanceof ReadableStream)return A.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new lI(A,E);var A}(r,No(n));o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){!function(o,n,r){const u=Fe(o);var l;(l=(0,ne.Z)(function*(g,E,C){try{const A=yield E.getMetadata();if(yield function(Q,ie){const Ie=Fe(Q),Be=Rn(ie.createTime);return Ie.persistence.runTransaction("hasNewerBundle","readonly",tt=>Ie.Je.getBundleMetadata(tt,ie.id)).then(tt=>!!tt&&tt.createTime.compareTo(Be)>=0)}(g.localStore,A))return yield E.close(),void C._completeWith((Q=A,{taskState:"Success",documentsLoaded:Q.totalDocuments,bytesLoaded:Q.totalBytes,totalDocuments:Q.totalDocuments,totalBytes:Q.totalBytes}));C._updateProgress(JC(A));const N=new QC(A,g.localStore,E.N);let O=yield E.Qo();for(;O;){const Q=yield N.fo(O);Q&&C._updateProgress(Q),O=yield E.Qo()}const F=yield N.complete();yield xo(g,F.Tn,void 0),yield function(Q,ie){const Ie=Fe(Q);return Ie.persistence.runTransaction("Save bundle","readwrite",Be=>Ie.Je.saveBundleMetadata(Be,ie))}(g.localStore,A),C._completeWith(F.progress)}catch(A){Fl("SyncEngine",`Loading bundle failed with ${A}`),C._failWith(A)}var Q}),function(g,E,C){return l.apply(this,arguments)})(u,n,r).then(()=>{u.sharedClientState.notifyBundleLoaded()})}(yield fI(o),l,u)}))}(r,o._databaseId,n,u),u}(this._delegate,n)}namedQuery(n){return function(o,n){return function(o,n){return o.asyncQueue.enqueue((0,ne.Z)(function*(){return function(r,u){const l=Fe(r);return l.persistence.runTransaction("Get named query","readonly",g=>l.Je.getNamedQuery(g,u))}(yield Va(o),n)}))}(ir(o=wt(o,An)),n).then(r=>r?new yr(o,null,r.query):null)}(this._delegate,n).then(r=>r?new Hr(this,r):null)}}class lm extends MI{constructor(n){super(),this.firestore=n}convertBytes(n){return new Oo(new Bs(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return Xr.forKey(r,this.firestore,null)}}class GI{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new lm(n)}get(n){const r=Po(n);return this._delegate.get(r).then(u=>new hc(this._firestore,new Ua(this._firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,r.converter)))}set(n,r,u){const l=Po(n);return u?(tE("Transaction.set",u),this._delegate.set(l,r,u)):this._delegate.set(l,r),this}update(n,r,u,...l){const g=Po(n);return 2===arguments.length?this._delegate.update(g,r):this._delegate.update(g,r,u,...l),this}delete(n){const r=Po(n);return this._delegate.delete(r),this}}class qI{constructor(n){this._delegate=n}set(n,r,u){const l=Po(n);return u?(tE("WriteBatch.set",u),this._delegate.set(l,r,u)):this._delegate.set(l,r),this}update(n,r,u,...l){const g=Po(n);return 2===arguments.length?this._delegate.update(g,r):this._delegate.update(g,r,u,...l),this}delete(n){const r=Po(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class wd{constructor(n,r,u){this._firestore=n,this._userDataWriter=r,this._delegate=u}fromFirestore(n,r){const u=new ac(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Wf(this._firestore,u),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const u=wd.INSTANCES;let l=u.get(n);l||(l=new WeakMap,u.set(n,l));let g=l.get(r);return g||(g=new wd(n,new lm(n),r),l.set(r,g)),g}}wd.INSTANCES=new WeakMap;class Xr{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new lm(n)}static forPath(n,r,u){if(n.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new Xr(r,new $t(r._delegate,u,new Ze(n)))}static forKey(n,r,u){return new Xr(r,new $t(r._delegate,u,n))}get id(){return this._delegate.id}get parent(){return new fc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new fc(this.firestore,yI(this._delegate,n))}catch(r){throw vr(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,Ct.m9)(n))instanceof $t&&Rv(this._delegate,n)}set(n,r){r=tE("DocumentReference.set",r);try{return r?PI(this._delegate,n,r):PI(this._delegate,n)}catch(u){throw vr(u,"setDoc()","DocumentReference.set()")}}update(n,r,...u){try{return 1===arguments.length?kI(this._delegate,n):kI(this._delegate,n,r,...u)}catch(l){throw vr(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(o){return Ed(wt(o.firestore,An),[new Fu(o._key,Mn.none())])}(this._delegate)}onSnapshot(...n){const r=rE(n),u=hm(n,l=>new hc(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return FI(this._delegate,r,u)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(o){o=wt(o,$t);const n=wt(o.firestore,An),r=ir(n),u=new lc(n);return function(o,n){const r=new er;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(u=(0,ne.Z)(function*(l,g,E){try{const C=yield function(A,N){const O=Fe(A);return O.persistence.runTransaction("read document","readonly",F=>O.Qn.An(F,N))}(l,g);C.isFoundDocument()?E.resolve(C):C.isNoDocument()?E.resolve(null):E.reject(new Se(re.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const A=rd(C,`Failed to get document '${g} from cache`);E.reject(A)}}),function(l,g,E){return u.apply(this,arguments)})(yield Va(o),n,r);var u})),r.promise}(r,o._key).then(l=>new Ua(n,u,o._key,l,new _d(null!==l&&l.hasLocalMutations,!0),o.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(o){o=wt(o,$t);const n=wt(o.firestore,An);return xv(ir(n),o._key,{source:"server"}).then(r=>eE(n,o,r))}(this._delegate):function(o){o=wt(o,$t);const n=wt(o.firestore,An);return xv(ir(n),o._key).then(r=>eE(n,o,r))}(this._delegate),r.then(u=>new hc(this.firestore,new Ua(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)))}withConverter(n){return new Xr(this.firestore,this._delegate.withConverter(n?wd.getInstance(this.firestore,n):null))}}function vr(o,n,r){return o.message=o.message.replace(n,r),o}function rE(o){for(const n of o)if("object"==typeof n&&!dc(n))return n;return{}}function hm(o,n){var r,u;let l;return l=dc(o[0])?o[0]:dc(o[1])?o[1]:"function"==typeof o[0]?{next:o[0],error:o[1],complete:o[2]}:{next:o[1],error:o[2],complete:o[3]},{next:g=>{l.next&&l.next(n(g))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(u=l.complete)||void 0===u?void 0:u.bind(l)}}class hc{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new Xr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return II(this._delegate,n._delegate)}}class Wf extends hc{data(n){const r=this._delegate.data(n);return function(o,n){o||ze()}(void 0!==r),r}}class Hr{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new lm(n)}where(n,r,u){try{return new Hr(this.firestore,ja(this._delegate,function(o,n,r){const u=n,l=Kv("where",o);return new CI(l,u,r)}(n,r,u)))}catch(l){throw vr(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new Hr(this.firestore,ja(this._delegate,function(o,n="asc"){const r=n,u=Kv("orderBy",o);return new Rb(u,r)}(n,r)))}catch(u){throw vr(u,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new Hr(this.firestore,ja(this._delegate,function(o){return mI("limit",o),new _r("limit",o,"F")}(n)))}catch(r){throw vr(r,"limit()","Query.limit()")}}limitToLast(n){try{return new Hr(this.firestore,ja(this._delegate,function(o){return mI("limitToLast",o),new _r("limitToLast",o,"L")}(n)))}catch(r){throw vr(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new Hr(this.firestore,ja(this._delegate,function(...o){return new um("startAt",o,!0)}(...n)))}catch(r){throw vr(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new Hr(this.firestore,ja(this._delegate,function(...o){return new um("startAfter",o,!1)}(...n)))}catch(r){throw vr(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new Hr(this.firestore,ja(this._delegate,function(...o){return new Qv("endBefore",o,!0)}(...n)))}catch(r){throw vr(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new Hr(this.firestore,ja(this._delegate,function(...o){return new Qv("endAt",o,!1)}(...n)))}catch(r){throw vr(r,"endAt()","Query.endAt()")}}isEqual(n){return Ov(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(o){o=wt(o,yr);const n=wt(o.firestore,An),r=ir(n),u=new lc(n);return function(o,n){const r=new er;return o.asyncQueue.enqueueAndForget((0,ne.Z)(function*(){return(u=(0,ne.Z)(function*(l,g,E){try{const C=yield Df(l,g,!0),A=new lv(g,C.Gn),N=A.Io(C.documents),O=A.applyChanges(N,!1);E.resolve(O.snapshot)}catch(C){const A=rd(C,`Failed to execute query '${g} against cache`);E.reject(A)}}),function(l,g,E){return u.apply(this,arguments)})(yield Va(o),n,r);var u})),r.promise}(r,o._query).then(l=>new Ba(n,u,o,l))}(this._delegate):"server"===(null==n?void 0:n.source)?function(o){o=wt(o,yr);const n=wt(o.firestore,An),r=ir(n),u=new lc(n);return yb(r,o._query,{source:"server"}).then(l=>new Ba(n,u,o,l))}(this._delegate):function(o){o=wt(o,yr);const n=wt(o.firestore,An),r=ir(n),u=new lc(n);return DI(o._query),yb(r,o._query).then(l=>new Ba(n,u,o,l))}(this._delegate),r.then(u=>new iE(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)))}onSnapshot(...n){const r=rE(n),u=hm(n,l=>new iE(this.firestore,new Ba(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return FI(this._delegate,r,u)}withConverter(n){return new Hr(this.firestore,this._delegate.withConverter(n?wd.getInstance(this.firestore,n):null))}}class Wb{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Wf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class iE{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new Hr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Wf(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new Wb(this._firestore,r))}forEach(n,r){this._delegate.forEach(u=>{n.call(r,new Wf(this._firestore,u))})}isEqual(n){return II(this._delegate,n._delegate)}}class fc extends Hr{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new Xr(this.firestore,n):null}doc(n){try{return new Xr(this.firestore,void 0===n?Bf(this._delegate):Bf(this._delegate,n))}catch(r){throw vr(r,"doc()","CollectionReference.doc()")}}add(n){return function(o,n){const r=wt(o.firestore,An),u=Bf(o),l=cm(o.converter,n);return Ed(r,[om(yd(o.firestore),"addDoc",u._key,l,null!==o.converter,{}).toMutation(u._key,Mn.exists(!1))]).then(()=>u)}(this._delegate,n).then(r=>new Xr(this.firestore,r))}isEqual(n){return Rv(this._delegate,n._delegate)}withConverter(n){return new fc(this.firestore,this._delegate.withConverter(n?wd.getInstance(this.firestore,n):null))}}function Po(o){return wt(o,$t)}class sE{constructor(...n){this._delegate=new Ro(...n)}static documentId(){return new sE(tr.keyField().canonicalString())}isEqual(n){return(n=(0,Ct.m9)(n))instanceof Ro&&this._delegate._internalPath.isEqual(n._internalPath)}}class pc{constructor(n){this._delegate=n}static serverTimestamp(){const n=new Bv("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new pc(n)}static delete(){const n=new jf("deleteField");return n._methodName="FieldValue.delete",new pc(n)}static arrayUnion(...n){const r=function(...o){return new Tb("arrayUnion",o)}(...n);return r._methodName="FieldValue.arrayUnion",new pc(r)}static arrayRemove(...n){const r=function(...o){return new Ab("arrayRemove",o)}(...n);return r._methodName="FieldValue.arrayRemove",new pc(r)}static increment(n){const r=function(o){return new Hf("increment",o)}(n);return r._methodName="FieldValue.increment",new pc(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const zb={Firestore:ls,GeoPoint:sm,Timestamp:Qt,Blob:Oo,Transaction:GI,WriteBatch:qI,DocumentReference:Xr,DocumentSnapshot:hc,Query:Hr,QueryDocumentSnapshot:Wf,QuerySnapshot:iE,CollectionReference:fc,FieldPath:sE,FieldValue:pc,setLogLevel:function(o){!function(o){Ti.setLogLevel(o)}(o)},CACHE_SIZE_UNLIMITED:-1};!function(o){(function(o,n){o.INTERNAL.registerComponent(new gu.wA("firestore-compat",r=>((n,r)=>new ls(n,r,new nE))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},zb)))})(o),o.registerVersion("@firebase/firestore-compat","0.1.3")}(Op.Z);var oE=k(9765),WI=k(6682),zf=k(309),fm=k(5345);function js(o,n){return"function"==typeof n?r=>r.pipe(js((u,l)=>(0,Cr.D)(o(u,l)).pipe((0,hn.U)((g,E)=>n(u,g,l,E))))):r=>r.lift(new aA(o))}class aA{constructor(n){this.project=n}call(n,r){return r.subscribe(new $r(n,this.project))}}class $r extends fm.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const u=this.index++;try{r=this.project(n,u)}catch(l){return void this.destination.error(l)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const u=new fm.IY(this),l=this.destination;l.add(u),this.innerSubscription=(0,fm.ft)(n,u),this.innerSubscription!==u&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}var Id=k(7771),Yb=k(5319),Qb=k(7971),uA=k(8858);class Zf extends oE.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,u){super(),this.scheduler=u,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new Jb(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,u=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,g=u.length;let E;if(this.closed)throw new Qb.N;if(this.isStopped||this.hasError?E=Yb.w.EMPTY:(this.observers.push(n),E=new uA.W(this,n)),l&&n.add(n=new zf.ht(n,l)),r)for(let C=0;C<g&&!n.closed;C++)n.next(u[C]);else for(let C=0;C<g&&!n.closed;C++)n.next(u[C].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),E}_getNow(){return(this.scheduler||Id.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,u=this._windowTime,l=this._events,g=l.length;let E=0;for(;E<g&&!(n-l[E].time<u);)E++;return g>r&&(E=Math.max(E,g-r)),E>0&&l.splice(0,E),l}}class Jb{constructor(n,r){this.time=n,this.value=r}}function pm(o,n,r){let u;return u=o&&"object"==typeof o?o:{bufferSize:o,windowTime:n,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:o=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:u}){let l,E,g=0,C=!1,A=!1;return function(O){let F;g++,!l||C?(C=!1,l=new Zf(o,n,u),F=l.subscribe(this),E=O.subscribe({next(Q){l.next(Q)},error(Q){C=!0,l.error(Q)},complete(){A=!0,E=void 0,l.complete()}}),A&&(E=void 0)):F=l.subscribe(this),this.add(()=>{g--,F.unsubscribe(),F=void 0,E&&!A&&r&&0===g&&(E.unsubscribe(),E=void 0,l=void 0)})}}(u))}const zI=(()=>{function o(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return o.prototype=Object.create(Error.prototype),o})(),aE=(()=>{function o(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return o.prototype=Object.create(Error.prototype),o})();var ZI=k(9193);function KI(o){return n=>0===o?(0,ZI.c)():n.lift(new gm(o))}class gm{constructor(n){if(this.total=n,this.total<0)throw new aE}call(n,r){return r.subscribe(new uE(n,this.total))}}class uE extends Ki.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,u=++this.count;u<=r&&(this.destination.next(n),u===r&&(this.destination.complete(),this.unsubscribe()))}}function lA(o=null){return n=>n.lift(new YI(o))}class YI{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new tT(n,this.defaultValue))}}class tT extends Ki.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function QI(o=nT){return n=>n.lift(new mm(o))}class mm{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new JI(n,this.errorFactory))}}class JI extends Ki.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function nT(){return new zI}var cE=k(4487);function XI(o,n){return n?js(()=>o,n):js(()=>o)}var dE=k(3101),eD=k(7841);const hE=new _.OlP("angularfire2.auth.use-emulator"),nD=new _.OlP("angularfire2.auth.settings"),fE=new _.OlP("angularfire2.auth.tenant-id"),pE=new _.OlP("angularfire2.auth.langugage-code"),rD=new _.OlP("angularfire2.auth.use-device-language"),iD=new _.OlP("angularfire.auth.persistence"),gE=(o,n,r,u,l,g,E,C)=>(0,Sn.cc)(`${o.name}.auth`,"AngularFireAuth",o.name,()=>{const A=n.runOutsideAngular(()=>o.auth());if(r&&A.useEmulator(...r),u&&(A.tenantId=u),A.languageCode=l,g&&A.useDeviceLanguage(),E)for(const[N,O]of Object.entries(E))A.settings[N]=O;return C&&A.setPersistence(C),A},[r,u,l,g,E,C]);let mE=(()=>{class o{constructor(r,u,l,g,E,C,A,N,O,F,Q){const ie=new oE.xQ,Ie=(0,As.of)(void 0).pipe((0,zf.QV)(E.outsideAngular),js(()=>g.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,670)))),(0,hn.U)(()=>(0,Fr.on)(r,g,u)),(0,hn.U)(Be=>gE(Be,g,C,N,O,F,A,Q)),pm({bufferSize:1,refCount:!1}));if(Go(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,As.of)(null);else{Ie.pipe(function(o,n){const r=arguments.length>=2;return u=>u.pipe(o?ml((l,g)=>o(l,g,u)):cE.y,KI(1),r?lA(n):QI(()=>new zI))}()).subscribe();const tt=Ie.pipe(js(Lt=>Lt.getRedirectResult().then(Xt=>Xt,()=>null)),Sn.iC,pm({bufferSize:1,refCount:!1})),Ot=Ie.pipe(js(Lt=>new ta.y(Xt=>({unsubscribe:g.runOutsideAngular(()=>Lt.onAuthStateChanged(Gn=>Xt.next(Gn),Gn=>Xt.error(Gn),()=>Xt.complete()))})))),Jt=Ie.pipe(js(Lt=>new ta.y(Xt=>({unsubscribe:g.runOutsideAngular(()=>Lt.onIdTokenChanged(Gn=>Xt.next(Gn),Gn=>Xt.error(Gn),()=>Xt.complete()))}))));this.authState=tt.pipe(XI(Ot),(0,dE.R)(E.outsideAngular),(0,zf.QV)(E.insideAngular)),this.user=tt.pipe(XI(Jt),(0,dE.R)(E.outsideAngular),(0,zf.QV)(E.insideAngular)),this.idToken=this.user.pipe(js(Lt=>Lt?(0,Cr.D)(Lt.getIdToken()):(0,As.of)(null))),this.idTokenResult=this.user.pipe(js(Lt=>Lt?(0,Cr.D)(Lt.getIdTokenResult()):(0,As.of)(null))),this.credential=(0,WI.T)(tt,ie,this.authState.pipe(ml(Lt=>!Lt))).pipe((0,hn.U)(Lt=>(null==Lt?void 0:Lt.user)?Lt:null),(0,dE.R)(E.outsideAngular),(0,zf.QV)(E.insideAngular))}return(0,Fr.pX)(this,Ie,g,{spy:{apply:(Be,tt,Ot)=>{(Be.startsWith("signIn")||Be.startsWith("createUser"))&&Ot.then(Jt=>ie.next(Jt))}}})}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Fr.Dh),_.LFG(Fr.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Sn.HU),_.LFG(hE,8),_.LFG(nD,8),_.LFG(fE,8),_.LFG(pE,8),_.LFG(rD,8),_.LFG(iD,8))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),sD=(()=>{class o{constructor(){eD.Z.registerVersion("angularfire",Sn.q4.full,"auth-compat")}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o}),o.\u0275inj=_.cJS({providers:[mE]}),o})();function yE(o,n){return function(o,n=vh.z){return new ta.y(r=>{let u;return null!=n?n.schedule(()=>{u=o.onSnapshot({includeMetadataChanges:!0},r)}):u=o.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=u&&u()}})}(o,n)}function _E(o,n){return yE(o,n).pipe((0,hn.U)(r=>({payload:r,type:"query"})))}function ym(o,n){return _E(o,n).pipe(Yt(void 0),pu(),(0,hn.U)(([r,u])=>{const l=u.payload.docChanges(),g=l.map(E=>({type:E.type,payload:E}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((E,C)=>{const A=l.find(O=>O.doc.ref.isEqual(E.ref)),N=null==r?void 0:r.payload.docs.find(O=>O.ref.isEqual(E.ref));A&&JSON.stringify(A.doc.metadata)===JSON.stringify(E.metadata)||!A&&N&&JSON.stringify(N.metadata)===JSON.stringify(E.metadata)||g.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:E}})}),g}))}function uD(o,n,r){return ym(o,r).pipe(Ih((u,l)=>function(o,n,r){return n.forEach(u=>{r.indexOf(u.type)>-1&&(o=function(o,n){switch(n.type){case"added":if(!o[n.newIndex]||!o[n.newIndex].doc.ref.isEqual(n.doc.ref))return lD(o,n.newIndex,0,n);break;case"modified":if(null==o[n.oldIndex]||o[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=o.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return lD(o,n.newIndex,1,n)}break;case"removed":if(o[n.oldIndex]&&o[n.oldIndex].doc.ref.isEqual(n.doc.ref))return lD(o,n.oldIndex,1)}return o}(o,u))}),o}(u,l.map(g=>g.payload),n),[]),r=>r.lift(new ly(void 0,void 0)),(0,hn.U)(u=>u.map(l=>({type:l.type,payload:l}))))}function lD(o,n,r,...u){const l=o.slice();return l.splice(n,r,...u),l}function rT(o){return(!o||0===o.length)&&(o=["added","removed","modified"]),o}class iT{constructor(n,r,u){this.ref=n,this.query=r,this.afs=u}stateChanges(n){let r=ym(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,hn.U)(u=>u.filter(l=>n.indexOf(l.type)>-1)))),r.pipe(Yt(void 0),pu(),ml(([u,l])=>l.length>0||!u),(0,hn.U)(([u,l])=>l),Sn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Ih((r,u)=>[...r,...u],[]))}snapshotChanges(n){const r=rT(n);return uD(this.query,r,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(n={}){return _E(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(r=>r.payload.docs.map(u=>n.idField?Object.assign(Object.assign({},u.data()),{[n.idField]:u.id}):u.data())),Sn.iC)}get(n){return(0,Cr.D)(this.query.get(n)).pipe(Sn.iC)}add(n){return this.ref.add(n)}doc(n){return new sT(this.ref.doc(n),this.afs)}}class sT{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const u=this.ref.collection(n),{ref:l,query:g}=oT(u,r);return new iT(l,g,this.afs)}snapshotChanges(){return function(o,n){return yE(o,n).pipe(Yt(void 0),pu(),(0,hn.U)(([r,u])=>u.exists?(null==r?void 0:r.exists)?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,hn.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,Cr.D)(this.ref.get(n)).pipe(Sn.iC)}}class hA{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(r=>r.filter(u=>n.indexOf(u.type)>-1)),ml(r=>r.length>0),Sn.iC):ym(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Ih((r,u)=>[...r,...u],[]))}snapshotChanges(n){const r=rT(n);return uD(this.query,r,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(n={}){return _E(this.query,this.afs.schedulers.outsideAngular).pipe((0,hn.U)(u=>u.payload.docs.map(l=>n.idField?Object.assign({[n.idField]:l.id},l.data()):l.data())),Sn.iC)}get(n){return(0,Cr.D)(this.query.get(n)).pipe(Sn.iC)}}const fA=new _.OlP("angularfire2.enableFirestorePersistence"),pA=new _.OlP("angularfire2.firestore.persistenceSettings"),gA=new _.OlP("angularfire2.firestore.settings"),mA=new _.OlP("angularfire2.firestore.use-emulator");function oT(o,n=(r=>r)){return{query:n(o),ref:o}}let yA=(()=>{class o{constructor(r,u,l,g,E,C,A,N,O,F,Q,ie,Ie,Be,tt,Ot){this.schedulers=A;const Jt=(0,Fr.on)(r,C,u),Lt=O;F&&gE(Jt,C,Q,Ie,Be,tt,ie,Ot),[this.firestore,this.persistenceEnabled$]=(0,Sn.cc)(`${Jt.name}.firestore`,"AngularFirestore",Jt.name,()=>{const Xt=C.runOutsideAngular(()=>Jt.firestore());if(g&&Xt.settings(g),Lt&&Xt.useEmulator(...Lt),l&&!Go(E)){const Gn=()=>{try{return(0,Cr.D)(Xt.enablePersistence(N||void 0).then(()=>!0,()=>!1))}catch(Kf){return"undefined"!=typeof console&&console.warn(Kf),(0,As.of)(!1)}};return[Xt,C.runOutsideAngular(Gn)]}return[Xt,(0,As.of)(!1)]},[g,Lt,l])}collection(r,u){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:g,query:E}=oT(l,u),C=this.schedulers.ngZone.run(()=>g);return new iT(C,E,this)}collectionGroup(r,u){const l=u||(E=>E),g=this.firestore.collectionGroup(r);return new hA(l(g),this)}doc(r){let u;u="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>u);return new sT(l,this)}createId(){return this.firestore.collection("_").doc().id}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(Fr.Dh),_.LFG(Fr.xv,8),_.LFG(fA,8),_.LFG(gA,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Sn.HU),_.LFG(pA,8),_.LFG(mA,8),_.LFG(mE,8),_.LFG(hE,8),_.LFG(nD,8),_.LFG(fE,8),_.LFG(pE,8),_.LFG(rD,8),_.LFG(iD,8))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"any"}),o})(),aT=(()=>{class o{constructor(r){this.db=r,this.productsCollection=this.db.collection("products"),this.products=this.productsCollection.snapshotChanges().pipe((0,hn.U)(u=>u.map(l=>{const g=l.payload.doc.data();return g.id=l.payload.doc.id,g})))}getProduct(){return this.products}addProduct(r){this.productsCollection.add(r)}deleteProduct(r){this.productDoc=this.db.doc(`products/${r.id}`),this.productDoc.delete()}updateProduct(r){this.productDoc=this.db.doc(`products/${r.id}`),this.productDoc.update(r)}}return o.\u0275fac=function(r){return new(r||o)(_.LFG(yA))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),_A=(()=>{class o{constructor(r){this.productService=r,this.product={image:""}}ngOnInit(){}addProduct(){""!==this.product.name&&""!==this.product.description&&0!==this.product.price&&(this.productService.addProduct(this.product),this.product={})}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(aT))},o.\u0275cmp=_.Xpm({type:o,selectors:[["app-product-form"]],decls:15,vars:5,consts:[[1,"card","card-body"],[3,"ngSubmit"],[1,"form-group"],["type","text","name","name","placeholder","Product name","required","",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["type","text","name","description","placeholder","Product description",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["type","number","name","price","step","0.01","placeholder","Product price",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["type","text","name","image","placeholder","URL Image",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["onError","this.src='./assets/no-image.png'",1,"card-img-top",3,"src"],["type","submit",1,"btn","btn-dark","btn-block","mt-3"]],template:function(r,u){1&r&&(_.TgZ(0,"div",0),_.TgZ(1,"h3"),_._uU(2,"Alta de Producto"),_.qZA(),_.TgZ(3,"form",1),_.NdJ("ngSubmit",function(){return u.addProduct()}),_.TgZ(4,"div",2),_.TgZ(5,"input",3),_.NdJ("ngModelChange",function(g){return u.product.name=g}),_.qZA(),_.qZA(),_.TgZ(6,"div",2),_.TgZ(7,"input",4),_.NdJ("ngModelChange",function(g){return u.product.description=g}),_.qZA(),_.qZA(),_.TgZ(8,"div",2),_.TgZ(9,"input",5),_.NdJ("ngModelChange",function(g){return u.product.price=g}),_.qZA(),_.qZA(),_.TgZ(10,"div",2),_.TgZ(11,"input",6),_.NdJ("ngModelChange",function(g){return u.product.image=g}),_.qZA(),_.qZA(),_._UZ(12,"img",7),_.TgZ(13,"button",8),_._uU(14," Save "),_.qZA(),_.qZA(),_.qZA()),2&r&&(_.xp6(5),_.Q6J("ngModel",u.product.name),_.xp6(2),_.Q6J("ngModel",u.product.description),_.xp6(2),_.Q6J("ngModel",u.product.price),_.xp6(2),_.Q6J("ngModel",u.product.image),_.xp6(1),_.Q6J("src",""==u.product.image?"./assets/no-image.png":u.product.image,_.LSH))},directives:[bs,Zc,nl,nu,fl,fo,sl,ol],styles:[""]}),o})();function vA(o,n){if(1&o){const r=_.EpF();_.TgZ(0,"div"),_.TgZ(1,"form",12),_.NdJ("ngSubmit",function(){return _.CHM(r),_.oxw(3).updateProduct()}),_.TgZ(2,"div",13),_.TgZ(3,"input",14),_.NdJ("ngModelChange",function(l){return _.CHM(r),_.oxw(3).editingProduct.name=l}),_.qZA(),_.qZA(),_.TgZ(4,"div",15),_.TgZ(5,"input",16),_.NdJ("ngModelChange",function(l){return _.CHM(r),_.oxw(3).editingProduct.description=l}),_.qZA(),_.qZA(),_.TgZ(6,"div",17),_.TgZ(7,"input",18),_.NdJ("ngModelChange",function(l){return _.CHM(r),_.oxw(3).editingProduct.price=l}),_.qZA(),_.qZA(),_.TgZ(8,"div",17),_.TgZ(9,"input",19),_.NdJ("ngModelChange",function(l){return _.CHM(r),_.oxw(3).editingProduct.image=l}),_.qZA(),_.qZA(),_.TgZ(10,"button",20),_._uU(11," Update "),_.qZA(),_.qZA(),_.qZA()}if(2&o){const r=_.oxw(3);_.xp6(3),_.Q6J("ngModel",r.editingProduct.name),_.xp6(2),_.Q6J("ngModel",r.editingProduct.description),_.xp6(2),_.Q6J("ngModel",r.editingProduct.price),_.xp6(2),_.Q6J("ngModel",r.editingProduct.image)}}function EA(o,n){if(1&o){const r=_.EpF();_.TgZ(0,"li",4),_.TgZ(1,"div",5),_.TgZ(2,"div",6),_.TgZ(3,"h5"),_._uU(4),_.qZA(),_.TgZ(5,"h3"),_._uU(6),_.qZA(),_.TgZ(7,"p"),_._uU(8),_.qZA(),_.TgZ(9,"button",7),_.NdJ("click",function(l){const E=_.CHM(r).$implicit;return _.oxw(2).deleteProduct(l,E)}),_._uU(10," Delete "),_.qZA(),_.TgZ(11,"button",8),_.NdJ("click",function(l){const E=_.CHM(r).$implicit;return _.oxw(2).editProduct(l,E)}),_._uU(12," Edit "),_.qZA(),_.qZA(),_.TgZ(13,"div",9),_._UZ(14,"img",10),_.qZA(),_.qZA(),_.YNc(15,vA,12,4,"div",11),_.qZA()}if(2&o){const r=n.$implicit,u=_.oxw(2);_.xp6(4),_.Oqu(r.name),_.xp6(2),_.hij("$ ",r.price,""),_.xp6(2),_.Oqu(r.description),_.xp6(6),_.Q6J("src",r.image,_.LSH),_.xp6(1),_.Q6J("ngIf",u.editing&&u.editingProduct.id==r.id)}}function uT(o,n){if(1&o&&(_.TgZ(0,"div"),_.TgZ(1,"ul",2),_.YNc(2,EA,16,5,"li",3),_.qZA(),_.qZA()),2&o){const r=_.oxw();_.xp6(2),_.Q6J("ngForOf",r.products)}}function cT(o,n){1&o&&(_.TgZ(0,"h3",21),_._uU(1,"There are no products yet."),_.qZA())}let lT=(()=>{class o{constructor(r){this.productService=r,this.products=[],this.editingProduct={},this.editing=!1}ngOnInit(){this.productService.getProduct().subscribe(r=>{console.log(r),this.products=r})}deleteProduct(r,u){confirm("Are you sure you wnat to delete it?")&&this.productService.deleteProduct(u)}editProduct(r,u){this.editingProduct=u,this.editing=!this.editing}updateProduct(){this.productService.updateProduct(this.editingProduct),this.editingProduct={},this.editing=!1}}return o.\u0275fac=function(r){return new(r||o)(_.Y36(aT))},o.\u0275cmp=_.Xpm({type:o,selectors:[["app-products"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noproducts",""],[1,"list-group"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[1,"row"],[1,"col-8"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-secondary","mx-3",3,"click"],[1,"col-4"],["onError","this.src='./assets/no-image.png'",1,"card-img-top",3,"src"],[4,"ngIf"],[3,"ngSubmit"],[1,"mt-3"],["type","text","name","name",1,"form-control","mt-3",3,"ngModel","ngModelChange"],[1,"form"],["type","text","name","description",1,"form-control","mt-3",3,"ngModel","ngModelChange"],[1,"form-group"],["type","number","name","price",1,"form-control","mt-3",3,"ngModel","ngModelChange"],["type","text","name","image","placeholder","URL Image",1,"form-control","mb-3",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-success","btn-block","mt-3"],[1,"text-center"]],template:function(r,u){if(1&r&&(_.YNc(0,uT,3,1,"div",0),_.YNc(1,cT,2,0,"ng-template",null,1,_.W1O)),2&r){const l=_.MAs(2);_.Q6J("ngIf",u.products.length>0)("ngIfElse",l)}},directives:[gt,Zt,bs,Zc,nl,nu,fo,sl,ol],styles:[""]}),o})(),wA=(()=>{class o{constructor(){this.title="angular-firestore"}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=_.Xpm({type:o,selectors:[["app-root"]],decls:9,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],["href","/",1,"navbar-brand"],[1,"container","pt-4"],[1,"row"],[1,"col-md-5"],[1,"col-md-7"]],template:function(r,u){1&r&&(_.TgZ(0,"nav",0),_.TgZ(1,"a",1),_._uU(2,"Angular Firestore"),_.qZA(),_.qZA(),_.TgZ(3,"div",2),_.TgZ(4,"div",3),_.TgZ(5,"div",4),_._UZ(6,"app-product-form"),_.qZA(),_.TgZ(7,"div",5),_._UZ(8,"app-products"),_.qZA(),_.qZA(),_.qZA())},directives:[_A,lT],styles:[""]}),o})();const dT_firebase={apiKey:"AIzaSyBUuzrLEbSsgJk3XhzxXjjssZ3vaMdBx74",authDomain:"angular-firestore-bb4af.firebaseapp.com",projectId:"angular-firestore-bb4af",storageBucket:"angular-firestore-bb4af.appspot.com",messagingSenderId:"621519971483",appId:"1:621519971483:web:42f9211fbf7484e01a523e",measurementId:"G-5797FSTFFV"};let IA=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=_.oAB({type:o,bootstrap:[wA]}),o.\u0275inj=_.cJS({providers:[],imports:[[kc,Fr.hO.initializeApp(dT_firebase),sD,WE]]}),o})();(0,_.G48)(),Um().bootstrapModule(IA).catch(o=>console.error(o))},4762:(Je,Te,k)=>{"use strict";function ge(Y,ae){var ue={};for(var q in Y)Object.prototype.hasOwnProperty.call(Y,q)&&ae.indexOf(q)<0&&(ue[q]=Y[q]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(q=Object.getOwnPropertySymbols(Y);ve<q.length;ve++)ae.indexOf(q[ve])<0&&Object.prototype.propertyIsEnumerable.call(Y,q[ve])&&(ue[q[ve]]=Y[q[ve]])}return ue}function Ee(Y,ae,ue,q){return new(ue||(ue=Promise))(function(oe,ut){function At(Re){try{Ce(q.next(Re))}catch(Ue){ut(Ue)}}function Gt(Re){try{Ce(q.throw(Re))}catch(Ue){ut(Ue)}}function Ce(Re){Re.done?oe(Re.value):function(oe){return oe instanceof ue?oe:new ue(function(ut){ut(oe)})}(Re.value).then(At,Gt)}Ce((q=q.apply(Y,ae||[])).next())})}function se(Y,ae){var q,ve,oe,ut,ue={label:0,sent:function(){if(1&oe[0])throw oe[1];return oe[1]},trys:[],ops:[]};return ut={next:At(0),throw:At(1),return:At(2)},"function"==typeof Symbol&&(ut[Symbol.iterator]=function(){return this}),ut;function At(Ce){return function(Re){return function(Ce){if(q)throw new TypeError("Generator is already executing.");for(;ue;)try{if(q=1,ve&&(oe=2&Ce[0]?ve.return:Ce[0]?ve.throw||((oe=ve.return)&&oe.call(ve),0):ve.next)&&!(oe=oe.call(ve,Ce[1])).done)return oe;switch(ve=0,oe&&(Ce=[2&Ce[0],oe.value]),Ce[0]){case 0:case 1:oe=Ce;break;case 4:return ue.label++,{value:Ce[1],done:!1};case 5:ue.label++,ve=Ce[1],Ce=[0];continue;case 7:Ce=ue.ops.pop(),ue.trys.pop();continue;default:if(!(oe=(oe=ue.trys).length>0&&oe[oe.length-1])&&(6===Ce[0]||2===Ce[0])){ue=0;continue}if(3===Ce[0]&&(!oe||Ce[1]>oe[0]&&Ce[1]<oe[3])){ue.label=Ce[1];break}if(6===Ce[0]&&ue.label<oe[1]){ue.label=oe[1],oe=Ce;break}if(oe&&ue.label<oe[2]){ue.label=oe[2],ue.ops.push(Ce);break}oe[2]&&ue.ops.pop(),ue.trys.pop();continue}Ce=ae.call(Y,ue)}catch(Re){Ce=[6,Re],ve=0}finally{q=oe=0}if(5&Ce[0])throw Ce[1];return{value:Ce[0]?Ce[1]:void 0,done:!0}}([Ce,Re])}}}function K(Y){var ae="function"==typeof Symbol&&Symbol.iterator,ue=ae&&Y[ae],q=0;if(ue)return ue.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&q>=Y.length&&(Y=void 0),{value:Y&&Y[q++],done:!Y}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}function X(Y,ae){var ue="function"==typeof Symbol&&Y[Symbol.iterator];if(!ue)return Y;var ve,ut,q=ue.call(Y),oe=[];try{for(;(void 0===ae||ae-- >0)&&!(ve=q.next()).done;)oe.push(ve.value)}catch(At){ut={error:At}}finally{try{ve&&!ve.done&&(ue=q.return)&&ue.call(q)}finally{if(ut)throw ut.error}}return oe}function ee(Y,ae,ue){if(ue||2===arguments.length)for(var oe,q=0,ve=ae.length;q<ve;q++)(oe||!(q in ae))&&(oe||(oe=Array.prototype.slice.call(ae,0,q)),oe[q]=ae[q]);return Y.concat(oe||Array.prototype.slice.call(ae))}k.d(Te,{_T:()=>ge,mG:()=>Ee,Jh:()=>se,XA:()=>K,CR:()=>X,ev:()=>ee})},8239:(Je,Te,k)=>{"use strict";function _(j,ge,fe,de,Ae,Ee,se){try{var P=j[Ee](se),B=P.value}catch(K){return void fe(K)}P.done?ge(B):Promise.resolve(B).then(de,Ae)}function J(j){return function(){var ge=this,fe=arguments;return new Promise(function(de,Ae){var Ee=j.apply(ge,fe);function se(B){_(Ee,de,Ae,se,P,"next",B)}function P(B){_(Ee,de,Ae,se,P,"throw",B)}se(void 0)})}}k.d(Te,{Z:()=>J})}},Je=>{Je(Je.s=3702)}]);